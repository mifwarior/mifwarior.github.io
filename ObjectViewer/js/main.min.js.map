{"version":3,"file":"main.min.js","sources":["../../node_modules/three/src/math/Matrix4.js","../../node_modules/three/src/math/Quaternion.js","../../node_modules/three/src/math/Vector3.js","../../node_modules/three/src/math/Vector2.js","../../node_modules/three/src/math/Box3.js","../../node_modules/three/src/math/Sphere.js","../../node_modules/three/src/math/Ray.js","../../node_modules/three/src/core/EventDispatcher.js","../../node_modules/three/src/math/Euler.js","../../node_modules/three/src/core/Layers.js","../../node_modules/three/src/math/Matrix3.js","../../node_modules/three/src/core/Object3D.js","../../node_modules/three/src/math/Line3.js","../../node_modules/three/src/math/Plane.js","../../node_modules/three/src/math/Triangle.js","../../node_modules/three/src/math/Color.js","../../node_modules/three/src/core/Face3.js","../../node_modules/three/src/materials/Material.js","../../node_modules/three/src/materials/MeshBasicMaterial.js","../../node_modules/three/src/math/Vector4.js","../../node_modules/three/src/core/BufferAttribute.js","../../node_modules/three/src/core/DirectGeometry.js","../../node_modules/three/src/utils.js","../../node_modules/three/src/core/Geometry.js","../../node_modules/three/src/core/BufferGeometry.js","../../node_modules/three/src/objects/Mesh.js","../../node_modules/three/src/core/Clock.js","../../node_modules/three/src/cameras/Camera.js","../../node_modules/three/src/cameras/PerspectiveCamera.js","../../node_modules/three/src/textures/Texture.js","../../node_modules/three/src/renderers/WebGLRenderTarget.js","../../node_modules/three/src/scenes/Scene.js","../../node_modules/three/src/loaders/LoadingManager.js","../../node_modules/three/src/loaders/ImageLoader.js","../../node_modules/three/src/textures/CubeTexture.js","../../node_modules/three/src/loaders/CubeTextureLoader.js","../../node_modules/three/src/materials/MeshPhongMaterial.js","../../node_modules/three/src/geometries/PlaneGeometry.js","../../node_modules/three/src/geometries/BoxGeometry.js","../../node_modules/three/src/lights/Light.js","../../node_modules/three/src/lights/LightShadow.js","../../node_modules/three/src/lights/SpotLightShadow.js","../../node_modules/three/src/lights/SpotLight.js","../../node_modules/three/src/lights/PointLight.js","../../node_modules/three/src/cameras/OrthographicCamera.js","../../node_modules/three/src/lights/DirectionalLightShadow.js","../../node_modules/three/src/lights/DirectionalLight.js","../../node_modules/three/src/lights/AmbientLight.js","../../node_modules/three/src/loaders/FileLoader.js","../../node_modules/three/src/materials/MeshLambertMaterial.js","../../node_modules/three/src/materials/LineBasicMaterial.js","../../node_modules/three/src/objects/Line.js","../../node_modules/three/src/objects/LineSegments.js","../../node_modules/three/src/objects/Group.js","../../src/scripts/ColladaLoader2.js","../../node_modules/three/src/helpers/CameraHelper.js","../../node_modules/three/src/textures/DataTexture.js","../../node_modules/three/src/renderers/webgl/WebGLUniforms.js","../../node_modules/three/src/math/Box2.js","../../node_modules/three/src/renderers/webgl/plugins/LensFlarePlugin.js","../../node_modules/three/src/renderers/webgl/plugins/SpritePlugin.js","../../node_modules/three/src/materials/ShaderMaterial.js","../../node_modules/three/src/materials/MeshDepthMaterial.js","../../node_modules/three/src/math/Frustum.js","../../node_modules/three/src/renderers/webgl/WebGLShadowMap.js","../../node_modules/three/src/renderers/webgl/WebGLAttributes.js","../../node_modules/three/src/renderers/webgl/WebGLRenderLists.js","../../node_modules/three/src/renderers/webgl/WebGLIndexedBufferRenderer.js","../../node_modules/three/src/renderers/webgl/WebGLBufferRenderer.js","../../node_modules/three/src/renderers/webgl/WebGLGeometries.js","../../node_modules/three/src/renderers/webgl/WebGLLights.js","../../node_modules/three/src/renderers/webgl/WebGLObjects.js","../../node_modules/three/src/renderers/webgl/WebGLShader.js","../../node_modules/three/src/renderers/webgl/WebGLProgram.js","../../node_modules/three/src/renderers/webgl/WebGLPrograms.js","../../node_modules/three/src/renderers/webgl/WebGLTextures.js","../../node_modules/three/src/renderers/webgl/WebGLProperties.js","../../node_modules/three/src/renderers/webgl/WebGLState.js","../../node_modules/three/src/renderers/webgl/WebGLCapabilities.js","../../node_modules/three/src/renderers/webgl/WebGLExtensions.js","../../node_modules/three/src/renderers/webgl/WebGLClipping.js","../../node_modules/three/src/renderers/WebGLRenderer.js","../../node_modules/three/src/math/Spherical.js","../../src/scripts/OrbitControls.js","../../node_modules/three/src/loaders/TextureLoader.js","../../node_modules/three/src/constants.js","../../node_modules/three/src/math/Math.js","../../node_modules/three/src/loaders/Cache.js","../../node_modules/three/src/renderers/shaders/UniformsLib.js","../../node_modules/three/src/renderers/shaders/UniformsUtils.js","../../node_modules/three/src/renderers/shaders/ShaderChunk.js","../../node_modules/three/src/renderers/shaders/ShaderLib.js","../../src/scripts/ObjectViewer.js"],"sourcesContent":["import { Vector3 } from './Vector3';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author jordi_ros / http://plattsoft.com\n * @author D1plo1d / http://github.com/D1plo1d\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author timknip / http://www.floorplanner.com/\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Matrix4() {\n\n\tthis.elements = [\n\n\t\t1, 0, 0, 0,\n\t\t0, 1, 0, 0,\n\t\t0, 0, 1, 0,\n\t\t0, 0, 0, 1\n\n\t];\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nObject.assign( Matrix4.prototype, {\n\n\tisMatrix4: true,\n\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t},\n\n\tcopyPosition: function ( m ) {\n\n\t\tvar te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0,       0,       0,       1\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\textractRotation: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function extractRotation( m ) {\n\n\t\t\tvar te = this.elements;\n\t\t\tvar me = m.elements;\n\n\t\t\tvar scaleX = 1 / v1.setFromMatrixColumn( m, 0 ).length();\n\t\t\tvar scaleY = 1 / v1.setFromMatrixColumn( m, 1 ).length();\n\t\t\tvar scaleZ = 1 / v1.setFromMatrixColumn( m, 2 ).length();\n\n\t\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\n\t\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\n\t\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmakeRotationFromEuler: function ( euler ) {\n\n\t\tif ( ( euler && euler.isEuler ) === false ) {\n\n\t\t\tconsole.error( 'THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// last column\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// bottom row\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationFromQuaternion: function ( q ) {\n\n\t\tvar te = this.elements;\n\n\t\tvar x = q._x, y = q._y, z = q._z, w = q._w;\n\t\tvar x2 = x + x, y2 = y + y, z2 = z + z;\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tte[ 0 ] = 1 - ( yy + zz );\n\t\tte[ 4 ] = xy - wz;\n\t\tte[ 8 ] = xz + wy;\n\n\t\tte[ 1 ] = xy + wz;\n\t\tte[ 5 ] = 1 - ( xx + zz );\n\t\tte[ 9 ] = yz - wx;\n\n\t\tte[ 2 ] = xz - wy;\n\t\tte[ 6 ] = yz + wx;\n\t\tte[ 10 ] = 1 - ( xx + yy );\n\n\t\t// last column\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// bottom row\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function () {\n\n\t\tvar x = new Vector3();\n\t\tvar y = new Vector3();\n\t\tvar z = new Vector3();\n\n\t\treturn function lookAt( eye, target, up ) {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tz.subVectors( eye, target );\n\n\t\t\tif ( z.lengthSq() === 0 ) {\n\n\t\t\t\t// eye and target are in the same position\n\n\t\t\t\tz.z = 1;\n\n\t\t\t}\n\n\t\t\tz.normalize();\n\t\t\tx.crossVectors( up, z );\n\n\t\t\tif ( x.lengthSq() === 0 ) {\n\n\t\t\t\t// eye and target are in the same vertical\n\n\t\t\t\tz.z += 0.0001;\n\t\t\t\tx.crossVectors( up, z );\n\n\t\t\t}\n\n\t\t\tx.normalize();\n\t\t\ty.crossVectors( z, x );\n\n\t\t\tte[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\n\t\t\tte[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\n\t\t\tte[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmultiply: function ( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tapplyToBufferAttribute: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function applyToBufferAttribute( attribute ) {\n\n\t\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\tv1.x = attribute.getX( i );\n\t\t\t\tv1.y = attribute.getY( i );\n\t\t\t\tv1.z = attribute.getZ( i );\n\n\t\t\t\tv1.applyMatrix4( this );\n\n\t\t\t\tattribute.setXYZ( i, v1.x, v1.y, v1.z );\n\n\t\t\t}\n\n\t\t\treturn attribute;\n\n\t\t};\n\n\t}(),\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar te = this.elements;\n\t\tvar tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tsetPosition: function ( v ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 12 ] = v.x;\n\t\tte[ 13 ] = v.y;\n\t\tte[ 14 ] = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tgetInverse: function ( m, throwOnDegenerate ) {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tvar te = this.elements,\n\t\t\tme = m.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tvar det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) {\n\n\t\t\tvar msg = \"THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnDegenerate === true ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\treturn this.identity();\n\n\t\t}\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( v ) {\n\n\t\tvar te = this.elements;\n\t\tvar x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t},\n\n\tgetMaxScaleOnAxis: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t},\n\n\tmakeTranslation: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationX: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0,  0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s,  c, 0,\n\t\t\t0, 0,  0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationY: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationZ: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts,  c, 0, 0,\n\t\t\t0,  0, 1, 0,\n\t\t\t0,  0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationAxis: function ( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tvar c = Math.cos( angle );\n\t\tvar s = Math.sin( angle );\n\t\tvar t = 1 - c;\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\n\t\tvar tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\t return this;\n\n\t},\n\n\tmakeScale: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeShear: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, y, z, 0,\n\t\t\tx, 1, z, 0,\n\t\t\tx, y, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcompose: function ( position, quaternion, scale ) {\n\n\t\tthis.makeRotationFromQuaternion( quaternion );\n\t\tthis.scale( scale );\n\t\tthis.setPosition( position );\n\n\t\treturn this;\n\n\t},\n\n\tdecompose: function () {\n\n\t\tvar vector = new Vector3();\n\t\tvar matrix = new Matrix4();\n\n\t\treturn function decompose( position, quaternion, scale ) {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tvar sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\t\tvar sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\t\tvar sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t\t// if determine is negative, we need to invert one scale\n\t\t\tvar det = this.determinant();\n\t\t\tif ( det < 0 ) sx = - sx;\n\n\t\t\tposition.x = te[ 12 ];\n\t\t\tposition.y = te[ 13 ];\n\t\t\tposition.z = te[ 14 ];\n\n\t\t\t// scale the rotation part\n\t\t\tmatrix.copy( this );\n\n\t\t\tvar invSX = 1 / sx;\n\t\t\tvar invSY = 1 / sy;\n\t\t\tvar invSZ = 1 / sz;\n\n\t\t\tmatrix.elements[ 0 ] *= invSX;\n\t\t\tmatrix.elements[ 1 ] *= invSX;\n\t\t\tmatrix.elements[ 2 ] *= invSX;\n\n\t\t\tmatrix.elements[ 4 ] *= invSY;\n\t\t\tmatrix.elements[ 5 ] *= invSY;\n\t\t\tmatrix.elements[ 6 ] *= invSY;\n\n\t\t\tmatrix.elements[ 8 ] *= invSZ;\n\t\t\tmatrix.elements[ 9 ] *= invSZ;\n\t\t\tmatrix.elements[ 10 ] *= invSZ;\n\n\t\t\tquaternion.setFromRotationMatrix( matrix );\n\n\t\t\tscale.x = sx;\n\t\t\tscale.y = sy;\n\t\t\tscale.z = sz;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmakePerspective: function ( left, right, top, bottom, near, far ) {\n\n\t\tif ( far === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\t\tvar x = 2 * near / ( right - left );\n\t\tvar y = 2 * near / ( top - bottom );\n\n\t\tvar a = ( right + left ) / ( right - left );\n\t\tvar b = ( top + bottom ) / ( top - bottom );\n\t\tvar c = - ( far + near ) / ( far - near );\n\t\tvar d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t},\n\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\n\n\t\tvar te = this.elements;\n\t\tvar w = 1.0 / ( right - left );\n\t\tvar h = 1.0 / ( top - bottom );\n\t\tvar p = 1.0 / ( far - near );\n\n\t\tvar x = ( right + left ) * w;\n\t\tvar y = ( top + bottom ) * h;\n\t\tvar z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = matrix.elements;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n} );\n\n\nexport { Matrix4 };\n","import { Vector3 } from './Vector3';\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nfunction Quaternion( x, y, z, w ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._w = ( w !== undefined ) ? w : 1;\n\n}\n\nObject.assign( Quaternion, {\n\n\tslerp: function ( qa, qb, qm, t ) {\n\n\t\treturn qm.copy( qa ).slerp( qb, t );\n\n\t},\n\n\tslerpFlat: function ( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tvar x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ],\n\n\t\t\tx1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tvar s = 1 - t,\n\n\t\t\t\tcos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tvar sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tvar tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tvar f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n} );\n\nObject.defineProperties( Quaternion.prototype, {\n\n\tx: {\n\n\t\tget: function () {\n\n\t\t\treturn this._x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._x = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\ty: {\n\n\t\tget: function () {\n\n\t\t\treturn this._y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._y = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tz: {\n\n\t\tget: function () {\n\n\t\t\treturn this._z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._z = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tw: {\n\n\t\tget: function () {\n\n\t\t\treturn this._w;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._w = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Quaternion.prototype, {\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t},\n\n\tcopy: function ( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromEuler: function ( euler, update ) {\n\n\t\tif ( ( euler && euler.isEuler ) === false ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar x = euler._x, y = euler._y, z = euler._z, order = euler.order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tvar cos = Math.cos;\n\t\tvar sin = Math.sin;\n\n\t\tvar c1 = cos( x / 2 );\n\t\tvar c2 = cos( y / 2 );\n\t\tvar c3 = cos( z / 2 );\n\n\t\tvar s1 = sin( x / 2 );\n\t\tvar s2 = sin( y / 2 );\n\t\tvar s3 = sin( z / 2 );\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t}\n\n\t\tif ( update !== false ) this.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromAxisAngle: function ( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33,\n\t\t\ts;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromUnitVectors: function () {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tvar v1 = new Vector3();\n\t\tvar r;\n\n\t\tvar EPS = 0.000001;\n\n\t\treturn function setFromUnitVectors( vFrom, vTo ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new Vector3();\n\n\t\t\tr = vFrom.dot( vTo ) + 1;\n\n\t\t\tif ( r < EPS ) {\n\n\t\t\t\tr = 0;\n\n\t\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\t\tv1.set( - vFrom.y, vFrom.x, 0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv1.set( 0, - vFrom.z, vFrom.y );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tv1.crossVectors( vFrom, vTo );\n\n\t\t\t}\n\n\t\t\tthis._x = v1.x;\n\t\t\tthis._y = v1.y;\n\t\t\tthis._z = v1.z;\n\t\t\tthis._w = r;\n\n\t\t\treturn this.normalize();\n\n\t\t};\n\n\t}(),\n\n\tinverse: function () {\n\n\t\treturn this.conjugate().normalize();\n\n\t},\n\n\tconjugate: function () {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\tvar l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t},\n\n\tpremultiply: function ( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t},\n\n\tmultiplyQuaternions: function ( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tslerp: function ( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\n\n\t\tif ( Math.abs( sinHalfTheta ) < 0.001 ) {\n\n\t\t\tthis._w = 0.5 * ( w + this._w );\n\t\t\tthis._x = 0.5 * ( x + this._x );\n\t\t\tthis._y = 0.5 * ( y + this._y );\n\t\t\tthis._z = 0.5 * ( z + this._z );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t},\n\n\tonChange: function ( callback ) {\n\n\t\tthis.onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tonChangeCallback: function () {}\n\n} );\n\n\nexport { Quaternion };\n","import { _Math } from './Math';\nimport { Matrix4 } from './Matrix4';\nimport { Quaternion } from './Quaternion';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author *kile / http://kile.stravaganza.org/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Vector3( x, y, z ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\n}\n\nObject.assign( Vector3.prototype, {\n\n\tisVector3: true,\n\n\tset: function ( x, y, z ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVectors: function ( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyEuler: function () {\n\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function applyEuler( euler ) {\n\n\t\t\tif ( ( euler && euler.isEuler ) === false ) {\n\n\t\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t\t}\n\n\t\t\treturn this.applyQuaternion( quaternion.setFromEuler( euler ) );\n\n\t\t};\n\n\t}(),\n\n\tapplyAxisAngle: function () {\n\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function applyAxisAngle( axis, angle ) {\n\n\t\t\treturn this.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\n\n\t\t};\n\n\t}(),\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ];\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ];\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ];\n\t\tvar w =  e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ];\n\n\t\treturn this.divideScalar( w );\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tvar ix =  qw * x + qy * z - qz * y;\n\t\tvar iy =  qw * y + qz * x - qx * z;\n\t\tvar iz =  qw * z + qx * y - qy * x;\n\t\tvar iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t},\n\n\tproject: function () {\n\n\t\tvar matrix = new Matrix4();\n\n\t\treturn function project( camera ) {\n\n\t\t\tmatrix.multiplyMatrices( camera.projectionMatrix, matrix.getInverse( camera.matrixWorld ) );\n\t\t\treturn this.applyMatrix4( matrix );\n\n\t\t};\n\n\t}(),\n\n\tunproject: function () {\n\n\t\tvar matrix = new Matrix4();\n\n\t\treturn function unproject( camera ) {\n\n\t\t\tmatrix.multiplyMatrices( camera.matrixWorld, matrix.getInverse( camera.projectionMatrix ) );\n\t\t\treturn this.applyMatrix4( matrix );\n\n\t\t};\n\n\t}(),\n\n\ttransformDirection: function ( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function () {\n\n\t\tvar min = new Vector3();\n\t\tvar max = new Vector3();\n\n\t\treturn function clampScalar( minVal, maxVal ) {\n\n\t\t\tmin.set( minVal, minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t}(),\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.multiplyScalar( Math.max( min, Math.min( max, length ) ) / length );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t},\n\n\t// TODO lengthSquared?\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t},\n\n\tlengthManhattan: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.multiplyScalar( length / this.length() );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tcross: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\n\t\tthis.x = y * v.z - z * v.y;\n\t\tthis.y = z * v.x - x * v.z;\n\t\tthis.z = x * v.y - y * v.x;\n\n\t\treturn this;\n\n\t},\n\n\tcrossVectors: function ( a, b ) {\n\n\t\tvar ax = a.x, ay = a.y, az = a.z;\n\t\tvar bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t},\n\n\tprojectOnVector: function ( vector ) {\n\n\t\tvar scalar = vector.dot( this ) / vector.lengthSq();\n\n\t\treturn this.copy( vector ).multiplyScalar( scalar );\n\n\t},\n\n\tprojectOnPlane: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function projectOnPlane( planeNormal ) {\n\n\t\t\tv1.copy( this ).projectOnVector( planeNormal );\n\n\t\t\treturn this.sub( v1 );\n\n\t\t};\n\n\t}(),\n\n\treflect: function () {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function reflect( normal ) {\n\n\t\t\treturn this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t\t};\n\n\t}(),\n\n\tangleTo: function ( v ) {\n\n\t\tvar theta = this.dot( v ) / ( Math.sqrt( this.lengthSq() * v.lengthSq() ) );\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( _Math.clamp( theta, - 1, 1 ) );\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t},\n\n\tdistanceToManhattan: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t},\n\n\tsetFromSpherical: function ( s ) {\n\n\t\tvar sinPhiRadius = Math.sin( s.phi ) * s.radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( s.theta );\n\t\tthis.y = Math.cos( s.phi ) * s.radius;\n\t\tthis.z = sinPhiRadius * Math.cos( s.theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCylindrical: function ( c ) {\n\n\t\tthis.x = c.radius * Math.sin( c.theta );\n\t\tthis.y = c.y;\n\t\tthis.z = c.radius * Math.cos( c.theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixPosition: function ( m ) {\n\n\t\treturn this.setFromMatrixColumn( m, 3 );\n\n\t},\n\n\tsetFromMatrixScale: function ( m ) {\n\n\t\tvar sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tvar sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tvar sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixColumn: function ( m, index ) {\n\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Vector3 };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author philogb / http://blog.thejit.org/\n * @author egraether / http://egraether.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nfunction Vector2( x, y ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\n}\n\nObject.defineProperties( Vector2.prototype, {\n\n\t\"width\" : {\n\n\t\tget: function () {\n\n\t\t\treturn this.x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.x = value;\n\n\t\t}\n\n\t},\n\n\t\"height\" : {\n\n\t\tget: function () {\n\n\t\t\treturn this.y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.y = value;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Vector2.prototype, {\n\n\tisVector2: true,\n\n\tset: function ( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function () {\n\n\t\tvar min = new Vector2();\n\t\tvar max = new Vector2();\n\n\t\treturn function clampScalar( minVal, maxVal ) {\n\n\t\t\tmin.set( minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t}(),\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.multiplyScalar( Math.max( min, Math.min( max, length ) ) / length );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t},\n\n\tlengthManhattan: function() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() );\n\n\t},\n\n\tangle: function () {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tvar angle = Math.atan2( this.y, this.x );\n\n\t\tif ( angle < 0 ) angle += 2 * Math.PI;\n\n\t\treturn angle;\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t},\n\n\tdistanceToManhattan: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.multiplyScalar( length / this.length() );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t},\n\n\trotateAround: function ( center, angle ) {\n\n\t\tvar c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tvar x = this.x - center.x;\n\t\tvar y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Vector2 };\n","import { Vector3 } from './Vector3';\nimport { Sphere } from './Sphere';\n\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Box3( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new Vector3( + Infinity, + Infinity, + Infinity );\n\tthis.max = ( max !== undefined ) ? max : new Vector3( - Infinity, - Infinity, - Infinity );\n\n}\n\nObject.assign( Box3.prototype, {\n\n\tisBox3: true,\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromArray: function ( array ) {\n\n\t\tvar minX = + Infinity;\n\t\tvar minY = + Infinity;\n\t\tvar minZ = + Infinity;\n\n\t\tvar maxX = - Infinity;\n\t\tvar maxY = - Infinity;\n\t\tvar maxZ = - Infinity;\n\n\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\tvar x = array[ i ];\n\t\t\tvar y = array[ i + 1 ];\n\t\t\tvar z = array[ i + 2 ];\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromBufferAttribute: function ( attribute ) {\n\n\t\tvar minX = + Infinity;\n\t\tvar minY = + Infinity;\n\t\tvar minZ = + Infinity;\n\n\t\tvar maxX = - Infinity;\n\t\tvar maxY = - Infinity;\n\t\tvar maxZ = - Infinity;\n\n\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\tvar x = attribute.getX( i );\n\t\t\tvar y = attribute.getY( i );\n\t\t\tvar z = attribute.getZ( i );\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function setFromCenterAndSize( center, size ) {\n\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\n\n\t\t\tthis.min.copy( center ).sub( halfSize );\n\t\t\tthis.max.copy( center ).add( halfSize );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tsetFromObject: function ( object ) {\n\n\t\tthis.makeEmpty();\n\n\t\treturn this.expandByObject( object );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tisEmpty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t},\n\n\tgetCenter: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\treturn this.isEmpty() ? result.set( 0, 0, 0 ) : result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tgetSize: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\treturn this.isEmpty() ? result.set( 0, 0, 0 ) : result.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t},\n\n\texpandByObject: function () {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and children's, world transforms\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function expandByObject( object ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tobject.updateMatrixWorld( true );\n\n\t\t\tobject.traverse( function ( node ) {\n\n\t\t\t\tvar i, l;\n\n\t\t\t\tvar geometry = node.geometry;\n\n\t\t\t\tif ( geometry !== undefined ) {\n\n\t\t\t\t\tif ( geometry.isGeometry ) {\n\n\t\t\t\t\t\tvar vertices = geometry.vertices;\n\n\t\t\t\t\t\tfor ( i = 0, l = vertices.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tv1.copy( vertices[ i ] );\n\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( geometry.isBufferGeometry ) {\n\n\t\t\t\t\t\tvar attribute = geometry.attributes.position;\n\n\t\t\t\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\t\t\t\tfor ( i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\t\t\t\t\tv1.fromBufferAttribute( attribute, i ).applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\t\t\tscope.expandByPoint( v1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\n\n\t},\n\n\tgetParameter: function ( point, optionalTarget ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\treturn result.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n\t},\n\n\tintersectsSphere: ( function () {\n\n\t\tvar closestPoint = new Vector3();\n\n\t\treturn function intersectsSphere( sphere ) {\n\n\t\t\t// Find the point on the AABB closest to the sphere center.\n\t\t\tthis.clampPoint( sphere.center, closestPoint );\n\n\t\t\t// If that point is inside the sphere, the AABB and sphere intersect.\n\t\t\treturn closestPoint.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t\t};\n\n\t} )(),\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// We compute the minimum and maximum dot product values. If those values\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\n\n\t\tvar min, max;\n\n\t\tif ( plane.normal.x > 0 ) {\n\n\t\t\tmin = plane.normal.x * this.min.x;\n\t\t\tmax = plane.normal.x * this.max.x;\n\n\t\t} else {\n\n\t\t\tmin = plane.normal.x * this.max.x;\n\t\t\tmax = plane.normal.x * this.min.x;\n\n\t\t}\n\n\t\tif ( plane.normal.y > 0 ) {\n\n\t\t\tmin += plane.normal.y * this.min.y;\n\t\t\tmax += plane.normal.y * this.max.y;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.y * this.max.y;\n\t\t\tmax += plane.normal.y * this.min.y;\n\n\t\t}\n\n\t\tif ( plane.normal.z > 0 ) {\n\n\t\t\tmin += plane.normal.z * this.min.z;\n\t\t\tmax += plane.normal.z * this.max.z;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.z * this.max.z;\n\t\t\tmax += plane.normal.z * this.min.z;\n\n\t\t}\n\n\t\treturn ( min <= plane.constant && max >= plane.constant );\n\n\t},\n\n\tclampPoint: function ( point, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\treturn result.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function distanceToPoint( point ) {\n\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\n\t\t\treturn clampedPoint.sub( point ).length();\n\n\t\t};\n\n\t}(),\n\n\tgetBoundingSphere: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function getBoundingSphere( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Sphere();\n\n\t\t\tthis.getCenter( result.center );\n\n\t\t\tresult.radius = this.getSize( v1 ).length() * 0.5;\n\n\t\t\treturn result;\n\n\t\t};\n\n\t}(),\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\t\tif( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function () {\n\n\t\tvar points = [\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3(),\n\t\t\tnew Vector3()\n\t\t];\n\n\t\treturn function applyMatrix4( matrix ) {\n\n\t\t\t// transform of empty box is an empty box.\n\t\t\tif( this.isEmpty() ) return this;\n\n\t\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t\tpoints[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t\tpoints[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t\tpoints[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t\tpoints[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t\tpoints[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t\tpoints[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t\tpoints[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t\tpoints[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix );\t// 111\n\n\t\t\tthis.setFromPoints( points );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n} );\n\n\nexport { Box3 };\n","import { Box3 } from './Box3';\nimport { Vector3 } from './Vector3';\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Sphere( center, radius ) {\n\n\tthis.center = ( center !== undefined ) ? center : new Vector3();\n\tthis.radius = ( radius !== undefined ) ? radius : 0;\n\n}\n\nObject.assign( Sphere.prototype, {\n\n\tset: function ( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function () {\n\n\t\tvar box = new Box3();\n\n\t\treturn function setFromPoints( points, optionalCenter ) {\n\n\t\t\tvar center = this.center;\n\n\t\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\t\tcenter.copy( optionalCenter );\n\n\t\t\t} else {\n\n\t\t\t\tbox.setFromPoints( points ).getCenter( center );\n\n\t\t\t}\n\n\t\t\tvar maxRadiusSq = 0;\n\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t\t}\n\n\t\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t},\n\n\tempty: function () {\n\n\t\treturn ( this.radius <= 0 );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsSphere( this );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// We use the following equation to compute the signed distance from\n\t\t// the center of the sphere to the plane.\n\t\t//\n\t\t// distance = q * n - d\n\t\t//\n\t\t// If this distance is greater than the radius of the sphere,\n\t\t// then there is no intersection.\n\n\t\treturn Math.abs( this.center.dot( plane.normal ) - plane.constant ) <= this.radius;\n\n\t},\n\n\tclampPoint: function ( point, optionalTarget ) {\n\n\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\tresult.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\tresult.sub( this.center ).normalize();\n\t\t\tresult.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\tgetBoundingBox: function ( optionalTarget ) {\n\n\t\tvar box = optionalTarget || new Box3();\n\n\t\tbox.set( this.center, this.center );\n\t\tbox.expandByScalar( this.radius );\n\n\t\treturn box;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t}\n\n} );\n\n\nexport { Sphere };\n","import { Vector3 } from './Vector3';\n\n/**\n * @author bhouston / http://clara.io\n */\n\nfunction Ray( origin, direction ) {\n\n\tthis.origin = ( origin !== undefined ) ? origin : new Vector3();\n\tthis.direction = ( direction !== undefined ) ? direction : new Vector3();\n\n}\n\nObject.assign( Ray.prototype, {\n\n\tset: function ( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t},\n\n\tat: function ( t, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\treturn result.copy( this.direction ).multiplyScalar( t ).add( this.origin );\n\n\t},\n\n\tlookAt: function ( v ) {\n\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\trecast: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function recast( t ) {\n\n\t\t\tthis.origin.copy( this.at( t, v1 ) );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclosestPointToPoint: function ( point, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\tresult.subVectors( point, this.origin );\n\t\tvar directionDistance = result.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn result.copy( this.origin );\n\n\t\t}\n\n\t\treturn result.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\n\n\t},\n\n\tdistanceSqToPoint: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function distanceSqToPoint( point ) {\n\n\t\t\tvar directionDistance = v1.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t\t// point behind the ray\n\n\t\t\tif ( directionDistance < 0 ) {\n\n\t\t\t\treturn this.origin.distanceToSquared( point );\n\n\t\t\t}\n\n\t\t\tv1.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\t\treturn v1.distanceToSquared( point );\n\n\t\t};\n\n\t}(),\n\n\tdistanceSqToSegment: function () {\n\n\t\tvar segCenter = new Vector3();\n\t\tvar segDir = new Vector3();\n\t\tvar diff = new Vector3();\n\n\t\treturn function distanceSqToSegment( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\n\t\t\t// It returns the min distance between the ray and the segment\n\t\t\t// defined by v0 and v1\n\t\t\t// It can also set two optional targets :\n\t\t\t// - The closest point on the ray\n\t\t\t// - The closest point on the segment\n\n\t\t\tsegCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t\tsegDir.copy( v1 ).sub( v0 ).normalize();\n\t\t\tdiff.copy( this.origin ).sub( segCenter );\n\n\t\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\t\tvar a01 = - this.direction.dot( segDir );\n\t\t\tvar b0 = diff.dot( this.direction );\n\t\t\tvar b1 = - diff.dot( segDir );\n\t\t\tvar c = diff.lengthSq();\n\t\t\tvar det = Math.abs( 1 - a01 * a01 );\n\t\t\tvar s0, s1, sqrDist, extDet;\n\n\t\t\tif ( det > 0 ) {\n\n\t\t\t\t// The ray and segment are not parallel.\n\n\t\t\t\ts0 = a01 * b1 - b0;\n\t\t\t\ts1 = a01 * b0 - b1;\n\t\t\t\textDet = segExtent * det;\n\n\t\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\t\tvar invDet = 1 / det;\n\t\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 5\n\n\t\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t\t// region 4\n\n\t\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 3\n\n\t\t\t\t\t\ts0 = 0;\n\t\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 2\n\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Ray and segment are parallel.\n\n\t\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t}\n\n\t\t\tif ( optionalPointOnRay ) {\n\n\t\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\n\n\t\t\t}\n\n\t\t\tif ( optionalPointOnSegment ) {\n\n\t\t\t\toptionalPointOnSegment.copy( segDir ).multiplyScalar( s1 ).add( segCenter );\n\n\t\t\t}\n\n\t\t\treturn sqrDist;\n\n\t\t};\n\n\t}(),\n\n\tintersectSphere: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function intersectSphere( sphere, optionalTarget ) {\n\n\t\t\tv1.subVectors( sphere.center, this.origin );\n\t\t\tvar tca = v1.dot( this.direction );\n\t\t\tvar d2 = v1.dot( v1 ) - tca * tca;\n\t\t\tvar radius2 = sphere.radius * sphere.radius;\n\n\t\t\tif ( d2 > radius2 ) return null;\n\n\t\t\tvar thc = Math.sqrt( radius2 - d2 );\n\n\t\t\t// t0 = first intersect point - entrance on front of sphere\n\t\t\tvar t0 = tca - thc;\n\n\t\t\t// t1 = second intersect point - exit point on back of sphere\n\t\t\tvar t1 = tca + thc;\n\n\t\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\n\t\t\tif ( t0 < 0 && t1 < 0 ) return null;\n\n\t\t\t// test to see if t0 is behind the ray:\n\t\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t\t// in order to always return an intersect point that is in front of the ray.\n\t\t\tif ( t0 < 0 ) return this.at( t1, optionalTarget );\n\n\t\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\n\t\t\treturn this.at( t0, optionalTarget );\n\n\t\t};\n\n\t}(),\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) <= sphere.radius;\n\n\t},\n\n\tdistanceToPlane: function ( plane ) {\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t :  null;\n\n\t},\n\n\tintersectPlane: function ( plane, optionalTarget ) {\n\n\t\tvar t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn this.at( t, optionalTarget );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tvar distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t},\n\n\tintersectBox: function ( box, optionalTarget ) {\n\n\t\tvar tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\t\tvar invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tvar origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\t// These lines also handle the case where tmin or tmax is NaN\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\n\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\n\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, optionalTarget );\n\n\t},\n\n\tintersectsBox: ( function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function intersectsBox( box ) {\n\n\t\t\treturn this.intersectBox( box, v ) !== null;\n\n\t\t};\n\n\t} )(),\n\n\tintersectTriangle: function () {\n\n\t\t// Compute the offset origin, edges, and normal.\n\t\tvar diff = new Vector3();\n\t\tvar edge1 = new Vector3();\n\t\tvar edge2 = new Vector3();\n\t\tvar normal = new Vector3();\n\n\t\treturn function intersectTriangle( a, b, c, backfaceCulling, optionalTarget ) {\n\n\t\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n\n\t\t\tedge1.subVectors( b, a );\n\t\t\tedge2.subVectors( c, a );\n\t\t\tnormal.crossVectors( edge1, edge2 );\n\n\t\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\t\tvar DdN = this.direction.dot( normal );\n\t\t\tvar sign;\n\n\t\t\tif ( DdN > 0 ) {\n\n\t\t\t\tif ( backfaceCulling ) return null;\n\t\t\t\tsign = 1;\n\n\t\t\t} else if ( DdN < 0 ) {\n\n\t\t\t\tsign = - 1;\n\t\t\t\tDdN = - DdN;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tdiff.subVectors( this.origin, a );\n\t\t\tvar DdQxE2 = sign * this.direction.dot( edge2.crossVectors( diff, edge2 ) );\n\n\t\t\t// b1 < 0, no intersection\n\t\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tvar DdE1xQ = sign * this.direction.dot( edge1.cross( diff ) );\n\n\t\t\t// b2 < 0, no intersection\n\t\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// b1+b2 > 1, no intersection\n\t\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// Line intersects triangle, check if ray does.\n\t\t\tvar QdN = - sign * diff.dot( normal );\n\n\t\t\t// t < 0, no intersection\n\t\t\tif ( QdN < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// Ray intersects triangle.\n\t\t\treturn this.at( QdN / DdN, optionalTarget );\n\n\t\t};\n\n\t}(),\n\n\tapplyMatrix4: function ( matrix4 ) {\n\n\t\tthis.direction.add( this.origin ).applyMatrix4( matrix4 );\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.sub( this.origin );\n\t\tthis.direction.normalize();\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t}\n\n} );\n\n\nexport { Ray };\n","/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nfunction EventDispatcher() {}\n\nObject.assign( EventDispatcher.prototype, {\n\n\taddEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tvar listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t},\n\n\thasEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tvar listeners = this._listeners;\n\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t},\n\n\tremoveEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tvar index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\tvar array = [], i = 0;\n\t\t\tvar length = listenerArray.length;\n\n\t\t\tfor ( i = 0; i < length; i ++ ) {\n\n\t\t\t\tarray[ i ] = listenerArray[ i ];\n\n\t\t\t}\n\n\t\t\tfor ( i = 0; i < length; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { EventDispatcher };\n","import { Quaternion } from './Quaternion';\nimport { Vector3 } from './Vector3';\nimport { Matrix4 } from './Matrix4';\nimport { _Math } from './Math';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nfunction Euler( x, y, z, order ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._order = order || Euler.DefaultOrder;\n\n}\n\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nEuler.DefaultOrder = 'XYZ';\n\nObject.defineProperties( Euler.prototype, {\n\n\tx: {\n\n\t\tget: function () {\n\n\t\t\treturn this._x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._x = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\ty: {\n\n\t\tget: function () {\n\n\t\t\treturn this._y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._y = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tz: {\n\n\t\tget: function () {\n\n\t\t\treturn this._z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._z = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\torder: {\n\n\t\tget: function () {\n\n\t\t\treturn this._order;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._order = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Euler.prototype, {\n\n\tisEuler: true,\n\n\tset: function ( x, y, z, order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order || this._order;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t},\n\n\tcopy: function ( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m, order, update ) {\n\n\t\tvar clamp = _Math.clamp;\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements;\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\torder = order || this._order;\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m13 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m23 ) < 0.99999 ) {\n\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m32 ) < 0.99999 ) {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = 0;\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m31 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m21 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m12 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._y = 0;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update !== false ) this.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromQuaternion: function () {\n\n\t\tvar matrix = new Matrix4();\n\n\t\treturn function setFromQuaternion( q, order, update ) {\n\n\t\t\tmatrix.makeRotationFromQuaternion( q );\n\n\t\t\treturn this.setFromRotationMatrix( matrix, order, update );\n\n\t\t};\n\n\t}(),\n\n\tsetFromVector3: function ( v, order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\n\n\t},\n\n\treorder: function () {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\tvar q = new Quaternion();\n\n\t\treturn function reorder( newOrder ) {\n\n\t\t\tq.setFromEuler( this );\n\n\t\t\treturn this.setFromQuaternion( q, newOrder );\n\n\t\t};\n\n\t}(),\n\n\tequals: function ( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t},\n\n\ttoVector3: function ( optionalResult ) {\n\n\t\tif ( optionalResult ) {\n\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\n\n\t\t} else {\n\n\t\t\treturn new Vector3( this._x, this._y, this._z );\n\n\t\t}\n\n\t},\n\n\tonChange: function ( callback ) {\n\n\t\tthis.onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tonChangeCallback: function () {}\n\n} );\n\n\nexport { Euler };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Layers() {\n\n\tthis.mask = 1 | 0;\n\n}\n\nObject.assign( Layers.prototype, {\n\n\tset: function ( channel ) {\n\n\t\tthis.mask = 1 << channel | 0;\n\n\t},\n\n\tenable: function ( channel ) {\n\n\t\tthis.mask |= 1 << channel | 0;\n\n\t},\n\n\ttoggle: function ( channel ) {\n\n\t\tthis.mask ^= 1 << channel | 0;\n\n\t},\n\n\tdisable: function ( channel ) {\n\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\n\n\t},\n\n\ttest: function ( layers ) {\n\n\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t}\n\n} );\n\n\nexport { Layers };\n","import { Vector3 } from './Vector3';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n * @author tschw\n */\n\nfunction Matrix3() {\n\n\tthis.elements = [\n\n\t\t1, 0, 0,\n\t\t0, 1, 0,\n\t\t0, 0, 1\n\n\t];\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nObject.assign( Matrix3.prototype, {\n\n\tisMatrix3: true,\n\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix4: function ( m ) {\n\n\t\tvar me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[  8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[  9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tapplyToBufferAttribute: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function applyToBufferAttribute( attribute ) {\n\n\t\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\tv1.x = attribute.getX( i );\n\t\t\t\tv1.y = attribute.getY( i );\n\t\t\t\tv1.z = attribute.getZ( i );\n\n\t\t\t\tv1.applyMatrix3( this );\n\n\t\t\t\tattribute.setXYZ( i, v1.x, v1.y, v1.z );\n\n\t\t\t}\n\n\t\t\treturn attribute;\n\n\t\t};\n\n\t}(),\n\n\tmultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t},\n\n\tgetInverse: function ( matrix, throwOnDegenerate ) {\n\n\t\tif ( matrix && matrix.isMatrix4 ) {\n\n\t\t\tconsole.error( \"THREE.Matrix3.getInverse no longer takes a Matrix4 argument.\" );\n\n\t\t}\n\n\t\tvar me = matrix.elements,\n\t\t\tte = this.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\n\t\t\tn12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\n\t\t\tn13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) {\n\n\t\t\tvar msg = \"THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnDegenerate === true ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\treturn this.identity();\n\n\t\t}\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar tmp, m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tgetNormalMatrix: function ( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\n\n\t},\n\n\ttransposeIntoArray: function ( r ) {\n\n\t\tvar m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = matrix.elements;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n} );\n\n\nexport { Matrix3 };\n","import { Quaternion } from '../math/Quaternion';\nimport { Vector3 } from '../math/Vector3';\nimport { Matrix4 } from '../math/Matrix4';\nimport { EventDispatcher } from './EventDispatcher';\nimport { Euler } from '../math/Euler';\nimport { Layers } from './Layers';\nimport { Matrix3 } from '../math/Matrix3';\nimport { _Math } from '../math/Math';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author elephantatwork / www.elephantatwork.ch\n */\n\nvar object3DId = 0;\n\nfunction Object3D() {\n\n\tObject.defineProperty( this, 'id', { value: object3DId ++ } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Object3D';\n\n\tthis.parent = null;\n\tthis.children = [];\n\n\tthis.up = Object3D.DefaultUp.clone();\n\n\tvar position = new Vector3();\n\tvar rotation = new Euler();\n\tvar quaternion = new Quaternion();\n\tvar scale = new Vector3( 1, 1, 1 );\n\n\tfunction onRotationChange() {\n\n\t\tquaternion.setFromEuler( rotation, false );\n\n\t}\n\n\tfunction onQuaternionChange() {\n\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t}\n\n\trotation.onChange( onRotationChange );\n\tquaternion.onChange( onQuaternionChange );\n\n\tObject.defineProperties( this, {\n\t\tposition: {\n\t\t\tenumerable: true,\n\t\t\tvalue: position\n\t\t},\n\t\trotation: {\n\t\t\tenumerable: true,\n\t\t\tvalue: rotation\n\t\t},\n\t\tquaternion: {\n\t\t\tenumerable: true,\n\t\t\tvalue: quaternion\n\t\t},\n\t\tscale: {\n\t\t\tenumerable: true,\n\t\t\tvalue: scale\n\t\t},\n\t\tmodelViewMatrix: {\n\t\t\tvalue: new Matrix4()\n\t\t},\n\t\tnormalMatrix: {\n\t\t\tvalue: new Matrix3()\n\t\t}\n\t} );\n\n\tthis.matrix = new Matrix4();\n\tthis.matrixWorld = new Matrix4();\n\n\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n\tthis.matrixWorldNeedsUpdate = false;\n\n\tthis.layers = new Layers();\n\tthis.visible = true;\n\n\tthis.castShadow = false;\n\tthis.receiveShadow = false;\n\n\tthis.frustumCulled = true;\n\tthis.renderOrder = 0;\n\n\tthis.userData = {};\n\n\tthis.onBeforeRender = function () {};\n\tthis.onAfterRender = function () {};\n\n}\n\nObject3D.DefaultUp = new Vector3( 0, 1, 0 );\nObject3D.DefaultMatrixAutoUpdate = true;\n\nObject.assign( Object3D.prototype, EventDispatcher.prototype, {\n\n\tisObject3D: true,\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tthis.matrix.multiplyMatrices( matrix, this.matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t},\n\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t},\n\n\tsetRotationFromEuler: function ( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t},\n\n\tsetRotationFromMatrix: function ( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t},\n\n\trotateOnAxis: function () {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\tvar q1 = new Quaternion();\n\n\t\treturn function rotateOnAxis( axis, angle ) {\n\n\t\t\tq1.setFromAxisAngle( axis, angle );\n\n\t\t\tthis.quaternion.multiply( q1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateX: function () {\n\n\t\tvar v1 = new Vector3( 1, 0, 0 );\n\n\t\treturn function rotateX( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\trotateY: function () {\n\n\t\tvar v1 = new Vector3( 0, 1, 0 );\n\n\t\treturn function rotateY( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\trotateZ: function () {\n\n\t\tvar v1 = new Vector3( 0, 0, 1 );\n\n\t\treturn function rotateZ( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\ttranslateOnAxis: function () {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function translateOnAxis( axis, distance ) {\n\n\t\t\tv1.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\t\tthis.position.add( v1.multiplyScalar( distance ) );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslateX: function () {\n\n\t\tvar v1 = new Vector3( 1, 0, 0 );\n\n\t\treturn function translateX( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\ttranslateY: function () {\n\n\t\tvar v1 = new Vector3( 0, 1, 0 );\n\n\t\treturn function translateY( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\ttranslateZ: function () {\n\n\t\tvar v1 = new Vector3( 0, 0, 1 );\n\n\t\treturn function translateZ( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\tlocalToWorld: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t},\n\n\tworldToLocal: function () {\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function worldToLocal( vector ) {\n\n\t\t\treturn vector.applyMatrix4( m1.getInverse( this.matrixWorld ) );\n\n\t\t};\n\n\t}(),\n\n\tlookAt: function () {\n\n\t\t// This routine does not support objects with rotated and/or translated parent(s)\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function lookAt( vector ) {\n\n\t\t\tif ( this.isCamera ) {\n\n\t\t\t\tm1.lookAt( this.position, vector, this.up );\n\n\t\t\t} else {\n\n\t\t\t\tm1.lookAt( vector, this.position, this.up );\n\n\t\t\t}\n\n\t\t\tthis.quaternion.setFromRotationMatrix( m1 );\n\n\t\t};\n\n\t}(),\n\n\tadd: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( ( object && object.isObject3D ) ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tobject.dispatchEvent( { type: 'added' } );\n\n\t\t\tthis.children.push( object );\n\n\t\t} else {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tremove: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = null;\n\n\t\t\tobject.dispatchEvent( { type: 'removed' } );\n\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t}\n\n\t},\n\n\tgetObjectById: function ( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t},\n\n\tgetObjectByName: function ( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t},\n\n\tgetObjectByProperty: function ( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tvar child = this.children[ i ];\n\t\t\tvar object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tgetWorldPosition: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\treturn result.setFromMatrixPosition( this.matrixWorld );\n\n\t},\n\n\tgetWorldQuaternion: function () {\n\n\t\tvar position = new Vector3();\n\t\tvar scale = new Vector3();\n\n\t\treturn function getWorldQuaternion( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Quaternion();\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.matrixWorld.decompose( position, result, scale );\n\n\t\t\treturn result;\n\n\t\t};\n\n\t}(),\n\n\tgetWorldRotation: function () {\n\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function getWorldRotation( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Euler();\n\n\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\treturn result.setFromQuaternion( quaternion, this.rotation.order, false );\n\n\t\t};\n\n\t}(),\n\n\tgetWorldScale: function () {\n\n\t\tvar position = new Vector3();\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function getWorldScale( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.matrixWorld.decompose( position, quaternion, result );\n\n\t\t\treturn result;\n\n\t\t};\n\n\t}(),\n\n\tgetWorldDirection: function () {\n\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function getWorldDirection( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\treturn result.set( 0, 0, 1 ).applyQuaternion( quaternion );\n\n\t\t};\n\n\t}(),\n\n\traycast: function () {},\n\n\ttraverse: function ( callback ) {\n\n\t\tcallback( this );\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseVisible: function ( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseAncestors: function ( callback ) {\n\n\t\tvar parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t},\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\t// meta is '' when called from JSON.stringify\n\t\tvar isRootObject = ( meta === undefined || meta === '' );\n\n\t\tvar output = {};\n\n\t\t// meta is a hash used to collect geometries, materials.\n\t\t// not providing it implies that this is the root object\n\t\t// being serialized.\n\t\tif ( isRootObject ) {\n\n\t\t\t// initialize meta obj\n\t\t\tmeta = {\n\t\t\t\tgeometries: {},\n\t\t\t\tmaterials: {},\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t\toutput.metadata = {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t};\n\n\t\t}\n\n\t\t// standard Object3D serialization\n\n\t\tvar object = {};\n\n\t\tobject.uuid = this.uuid;\n\t\tobject.type = this.type;\n\n\t\tif ( this.name !== '' ) object.name = this.name;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\n\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\tif ( this.visible === false ) object.visible = false;\n\n\t\tobject.matrix = this.matrix.toArray();\n\n\t\t//\n\n\t\tfunction serialize( library, element ) {\n\n\t\t\tif ( library[ element.uuid ] === undefined ) {\n\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\n\n\t\t\t}\n\n\t\t\treturn element.uuid;\n\n\t\t}\n\n\t\tif ( this.geometry !== undefined ) {\n\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\n\n\t\t}\n\n\t\tif ( this.material !== undefined ) {\n\n\t\t\tif ( Array.isArray( this.material ) ) {\n\n\t\t\t\tvar uuids = [];\n\n\t\t\t\tfor ( var i = 0, l = this.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tobject.material = uuids;\n\n\t\t\t} else {\n\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.children.length > 0 ) {\n\n\t\t\tobject.children = [];\n\n\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tvar geometries = extractFromCache( meta.geometries );\n\t\t\tvar materials = extractFromCache( meta.materials );\n\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\tvar images = extractFromCache( meta.images );\n\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\tif ( images.length > 0 ) output.images = images;\n\n\t\t}\n\n\t\toutput.object = object;\n\n\t\treturn output;\n\n\t\t// extract data from the cache hash\n\t\t// remove metadata on each item\n\t\t// and return as array\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tvar values = [];\n\t\t\tfor ( var key in cache ) {\n\n\t\t\t\tvar data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\t\t\treturn values;\n\n\t\t}\n\n\t},\n\n\tclone: function ( recursive ) {\n\n\t\treturn new this.constructor().copy( this, recursive );\n\n\t},\n\n\tcopy: function ( source, recursive ) {\n\n\t\tif ( recursive === undefined ) recursive = true;\n\n\t\tthis.name = source.name;\n\n\t\tthis.up.copy( source.up );\n\n\t\tthis.position.copy( source.position );\n\t\tthis.quaternion.copy( source.quaternion );\n\t\tthis.scale.copy( source.scale );\n\n\t\tthis.matrix.copy( source.matrix );\n\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\tthis.layers.mask = source.layers.mask;\n\t\tthis.visible = source.visible;\n\n\t\tthis.castShadow = source.castShadow;\n\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\tthis.frustumCulled = source.frustumCulled;\n\t\tthis.renderOrder = source.renderOrder;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( var i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\tvar child = source.children[ i ];\n\t\t\t\tthis.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Object3D };\n","import { Vector3 } from './Vector3';\nimport { _Math } from './Math';\n\n/**\n * @author bhouston / http://clara.io\n */\n\nfunction Line3( start, end ) {\n\n\tthis.start = ( start !== undefined ) ? start : new Vector3();\n\tthis.end = ( end !== undefined ) ? end : new Vector3();\n\n}\n\nObject.assign( Line3.prototype, {\n\n\tset: function ( start, end ) {\n\n\t\tthis.start.copy( start );\n\t\tthis.end.copy( end );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( line ) {\n\n\t\tthis.start.copy( line.start );\n\t\tthis.end.copy( line.end );\n\n\t\treturn this;\n\n\t},\n\n\tgetCenter: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\treturn result.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\n\n\t},\n\n\tdelta: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\treturn result.subVectors( this.end, this.start );\n\n\t},\n\n\tdistanceSq: function () {\n\n\t\treturn this.start.distanceToSquared( this.end );\n\n\t},\n\n\tdistance: function () {\n\n\t\treturn this.start.distanceTo( this.end );\n\n\t},\n\n\tat: function ( t, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\n\n\t},\n\n\tclosestPointToPointParameter: function () {\n\n\t\tvar startP = new Vector3();\n\t\tvar startEnd = new Vector3();\n\n\t\treturn function closestPointToPointParameter( point, clampToLine ) {\n\n\t\t\tstartP.subVectors( point, this.start );\n\t\t\tstartEnd.subVectors( this.end, this.start );\n\n\t\t\tvar startEnd2 = startEnd.dot( startEnd );\n\t\t\tvar startEnd_startP = startEnd.dot( startP );\n\n\t\t\tvar t = startEnd_startP / startEnd2;\n\n\t\t\tif ( clampToLine ) {\n\n\t\t\t\tt = _Math.clamp( t, 0, 1 );\n\n\t\t\t}\n\n\t\t\treturn t;\n\n\t\t};\n\n\t}(),\n\n\tclosestPointToPoint: function ( point, clampToLine, optionalTarget ) {\n\n\t\tvar t = this.closestPointToPointParameter( point, clampToLine );\n\n\t\tvar result = optionalTarget || new Vector3();\n\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.start.applyMatrix4( matrix );\n\t\tthis.end.applyMatrix4( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( line ) {\n\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\n\n\t}\n\n} );\n\n\nexport { Line3 };\n","import { Matrix3 } from './Matrix3';\nimport { Vector3 } from './Vector3';\n\n/**\n * @author bhouston / http://clara.io\n */\n\nfunction Plane( normal, constant ) {\n\n\tthis.normal = ( normal !== undefined ) ? normal : new Vector3( 1, 0, 0 );\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\n\n}\n\nObject.assign( Plane.prototype, {\n\n\tset: function ( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponents: function ( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\t// must be this.normal, not normal, as this.normal is normalized\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCoplanarPoints: function () {\n\n\t\tvar v1 = new Vector3();\n\t\tvar v2 = new Vector3();\n\n\t\treturn function setFromCoplanarPoints( a, b, c ) {\n\n\t\t\tvar normal = v1.subVectors( c, b ).cross( v2.subVectors( a, b ) ).normalize();\n\n\t\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t},\n\n\tnormalize: function () {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tvar inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t},\n\n\tdistanceToSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t},\n\n\tprojectPoint: function ( point, optionalTarget ) {\n\n\t\treturn this.orthoPoint( point, optionalTarget ).sub( point ).negate();\n\n\t},\n\n\torthoPoint: function ( point, optionalTarget ) {\n\n\t\tvar perpendicularMagnitude = this.distanceToPoint( point );\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\treturn result.copy( this.normal ).multiplyScalar( perpendicularMagnitude );\n\n\t},\n\n\tintersectLine: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function intersectLine( line, optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\tvar direction = line.delta( v1 );\n\n\t\t\tvar denominator = this.normal.dot( direction );\n\n\t\t\tif ( denominator === 0 ) {\n\n\t\t\t\t// line is coplanar, return origin\n\t\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\t\treturn result.copy( line.start );\n\n\t\t\t\t}\n\n\t\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\n\t\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\n\t\t\treturn result.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t\t};\n\n\t}(),\n\n\tintersectsLine: function ( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tvar startSign = this.distanceToPoint( line.start );\n\t\tvar endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsPlane( this );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\treturn sphere.intersectsPlane( this );\n\n\t},\n\n\tcoplanarPoint: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\treturn result.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t},\n\n\tapplyMatrix4: function () {\n\n\t\tvar v1 = new Vector3();\n\t\tvar m1 = new Matrix3();\n\n\t\treturn function applyMatrix4( matrix, optionalNormalMatrix ) {\n\n\t\t\tvar referencePoint = this.coplanarPoint( v1 ).applyMatrix4( matrix );\n\n\t\t\t// transform normal based on theory here:\n\t\t\t// http://www.songho.ca/opengl/gl_normaltransform.html\n\t\t\tvar normalMatrix = optionalNormalMatrix || m1.getNormalMatrix( matrix );\n\t\t\tvar normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t// recalculate constant (like in setFromNormalAndCoplanarPoint)\n\t\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.constant = this.constant - offset.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t}\n\n} );\n\n\nexport { Plane };\n","import { Vector3 } from './Vector3';\nimport { Line3 } from './Line3';\nimport { Plane } from './Plane';\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Triangle( a, b, c ) {\n\n\tthis.a = ( a !== undefined ) ? a : new Vector3();\n\tthis.b = ( b !== undefined ) ? b : new Vector3();\n\tthis.c = ( c !== undefined ) ? c : new Vector3();\n\n}\n\nObject.assign( Triangle, {\n\n\tnormal: function () {\n\n\t\tvar v0 = new Vector3();\n\n\t\treturn function normal( a, b, c, optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\tresult.subVectors( c, b );\n\t\t\tv0.subVectors( a, b );\n\t\t\tresult.cross( v0 );\n\n\t\t\tvar resultLengthSq = result.lengthSq();\n\t\t\tif ( resultLengthSq > 0 ) {\n\n\t\t\t\treturn result.multiplyScalar( 1 / Math.sqrt( resultLengthSq ) );\n\n\t\t\t}\n\n\t\t\treturn result.set( 0, 0, 0 );\n\n\t\t};\n\n\t}(),\n\n\t// static/instance method to calculate barycentric coordinates\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n\tbarycoordFromPoint: function () {\n\n\t\tvar v0 = new Vector3();\n\t\tvar v1 = new Vector3();\n\t\tvar v2 = new Vector3();\n\n\t\treturn function barycoordFromPoint( point, a, b, c, optionalTarget ) {\n\n\t\t\tv0.subVectors( c, a );\n\t\t\tv1.subVectors( b, a );\n\t\t\tv2.subVectors( point, a );\n\n\t\t\tvar dot00 = v0.dot( v0 );\n\t\t\tvar dot01 = v0.dot( v1 );\n\t\t\tvar dot02 = v0.dot( v2 );\n\t\t\tvar dot11 = v1.dot( v1 );\n\t\t\tvar dot12 = v1.dot( v2 );\n\n\t\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\t// collinear or singular triangle\n\t\t\tif ( denom === 0 ) {\n\n\t\t\t\t// arbitrary location outside of triangle?\n\t\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\t\treturn result.set( - 2, - 1, - 1 );\n\n\t\t\t}\n\n\t\t\tvar invDenom = 1 / denom;\n\t\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t\t// barycentric coordinates must always sum to 1\n\t\t\treturn result.set( 1 - u - v, v, u );\n\n\t\t};\n\n\t}(),\n\n\tcontainsPoint: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function containsPoint( point, a, b, c ) {\n\n\t\t\tvar result = Triangle.barycoordFromPoint( point, a, b, c, v1 );\n\n\t\t\treturn ( result.x >= 0 ) && ( result.y >= 0 ) && ( ( result.x + result.y ) <= 1 );\n\n\t\t};\n\n\t}()\n\n} );\n\nObject.assign( Triangle.prototype, {\n\n\tset: function ( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t},\n\n\tarea: function () {\n\n\t\tvar v0 = new Vector3();\n\t\tvar v1 = new Vector3();\n\n\t\treturn function area() {\n\n\t\t\tv0.subVectors( this.c, this.b );\n\t\t\tv1.subVectors( this.a, this.b );\n\n\t\t\treturn v0.cross( v1 ).length() * 0.5;\n\n\t\t};\n\n\t}(),\n\n\tmidpoint: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector3();\n\t\treturn result.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t},\n\n\tnormal: function ( optionalTarget ) {\n\n\t\treturn Triangle.normal( this.a, this.b, this.c, optionalTarget );\n\n\t},\n\n\tplane: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Plane();\n\n\t\treturn result.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t},\n\n\tbarycoordFromPoint: function ( point, optionalTarget ) {\n\n\t\treturn Triangle.barycoordFromPoint( point, this.a, this.b, this.c, optionalTarget );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t},\n\n\tclosestPointToPoint: function () {\n\n\t\tvar plane = new Plane();\n\t\tvar edgeList = [ new Line3(), new Line3(), new Line3() ];\n\t\tvar projectedPoint = new Vector3();\n\t\tvar closestPoint = new Vector3();\n\n\t\treturn function closestPointToPoint( point, optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\t\t\tvar minDistance = Infinity;\n\n\t\t\t// project the point onto the plane of the triangle\n\n\t\t\tplane.setFromCoplanarPoints( this.a, this.b, this.c );\n\t\t\tplane.projectPoint( point, projectedPoint );\n\n\t\t\t// check if the projection lies within the triangle\n\n\t\t\tif( this.containsPoint( projectedPoint ) === true ) {\n\n\t\t\t\t// if so, this is the closest point\n\n\t\t\t\tresult.copy( projectedPoint );\n\n\t\t\t} else {\n\n\t\t\t\t// if not, the point falls outside the triangle. the result is the closest point to the triangle's edges or vertices\n\n\t\t\t\tedgeList[ 0 ].set( this.a, this.b );\n\t\t\t\tedgeList[ 1 ].set( this.b, this.c );\n\t\t\t\tedgeList[ 2 ].set( this.c, this.a );\n\n\t\t\t\tfor( var i = 0; i < edgeList.length; i ++ ) {\n\n\t\t\t\t\tedgeList[ i ].closestPointToPoint( projectedPoint, true, closestPoint );\n\n\t\t\t\t\tvar distance = projectedPoint.distanceToSquared( closestPoint );\n\n\t\t\t\t\tif( distance < minDistance ) {\n\n\t\t\t\t\t\tminDistance = distance;\n\n\t\t\t\t\t\tresult.copy( closestPoint );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn result;\n\n\t\t};\n\n\t}(),\n\n\tequals: function ( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t}\n\n} );\n\n\nexport { Triangle };\n","import { _Math } from './Math';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar ColorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\nfunction Color( r, g, b ) {\n\n\tif ( g === undefined && b === undefined ) {\n\n\t\t// r is THREE.Color, hex or string\n\t\treturn this.set( r );\n\n\t}\n\n\treturn this.setRGB( r, g, b );\n\n}\n\nObject.assign( Color.prototype, {\n\n\tisColor: true,\n\n\tr: 1, g: 1, b: 1,\n\n\tset: function ( value ) {\n\n\t\tif ( value && value.isColor ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetHex: function ( hex ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\treturn this;\n\n\t},\n\n\tsetRGB: function ( r, g, b ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\treturn this;\n\n\t},\n\n\tsetHSL: function () {\n\n\t\tfunction hue2rgb( p, q, t ) {\n\n\t\t\tif ( t < 0 ) t += 1;\n\t\t\tif ( t > 1 ) t -= 1;\n\t\t\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\t\t\tif ( t < 1 / 2 ) return q;\n\t\t\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\t\t\treturn p;\n\n\t\t}\n\n\t\treturn function setHSL( h, s, l ) {\n\n\t\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\t\th = _Math.euclideanModulo( h, 1 );\n\t\t\ts = _Math.clamp( s, 0, 1 );\n\t\t\tl = _Math.clamp( l, 0, 1 );\n\n\t\t\tif ( s === 0 ) {\n\n\t\t\t\tthis.r = this.g = this.b = l;\n\n\t\t\t} else {\n\n\t\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\t\tvar q = ( 2 * l ) - p;\n\n\t\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tsetStyle: function ( style ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tvar m;\n\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tvar color;\n\t\t\tvar name = m[ 1 ];\n\t\t\tvar components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] ) / 360;\n\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\n\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tvar hex = m[ 1 ];\n\t\t\tvar size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( style && style.length > 0 ) {\n\n\t\t\t// color keywords\n\t\t\tvar hex = ColorKeywords[ style ];\n\n\t\t\tif ( hex !== undefined ) {\n\n\t\t\t\t// red\n\t\t\t\tthis.setHex( hex );\n\n\t\t\t} else {\n\n\t\t\t\t// unknown color\n\t\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t},\n\n\tcopy: function ( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t},\n\n\tcopyGammaToLinear: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tthis.r = Math.pow( color.r, gammaFactor );\n\t\tthis.g = Math.pow( color.g, gammaFactor );\n\t\tthis.b = Math.pow( color.b, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tcopyLinearToGamma: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tvar safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\n\n\t\tthis.r = Math.pow( color.r, safeInverse );\n\t\tthis.g = Math.pow( color.g, safeInverse );\n\t\tthis.b = Math.pow( color.b, safeInverse );\n\n\t\treturn this;\n\n\t},\n\n\tconvertGammaToLinear: function () {\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tthis.r = r * r;\n\t\tthis.g = g * g;\n\t\tthis.b = b * b;\n\n\t\treturn this;\n\n\t},\n\n\tconvertLinearToGamma: function () {\n\n\t\tthis.r = Math.sqrt( this.r );\n\t\tthis.g = Math.sqrt( this.g );\n\t\tthis.b = Math.sqrt( this.b );\n\n\t\treturn this;\n\n\t},\n\n\tgetHex: function () {\n\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n\n\t},\n\n\tgetHexString: function () {\n\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\n\n\t},\n\n\tgetHSL: function ( optionalTarget ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tvar hsl = optionalTarget || { h: 0, s: 0, l: 0 };\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tvar max = Math.max( r, g, b );\n\t\tvar min = Math.min( r, g, b );\n\n\t\tvar hue, saturation;\n\t\tvar lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tvar delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\thsl.h = hue;\n\t\thsl.s = saturation;\n\t\thsl.l = lightness;\n\n\t\treturn hsl;\n\n\t},\n\n\tgetStyle: function () {\n\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n\n\t},\n\n\toffsetHSL: function ( h, s, l ) {\n\n\t\tvar hsl = this.getHSL();\n\n\t\thsl.h += h; hsl.s += s; hsl.l += l;\n\n\t\tthis.setHSL( hsl.h, hsl.s, hsl.l );\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t},\n\n\taddColors: function ( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\treturn this.getHex();\n\n\t}\n\n} );\n\n\nexport { Color };\n","import { Color } from '../math/Color';\nimport { Vector3 } from '../math/Vector3';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Face3( a, b, c, normal, color, materialIndex ) {\n\n\tthis.a = a;\n\tthis.b = b;\n\tthis.c = c;\n\n\tthis.normal = ( normal && normal.isVector3 ) ? normal : new Vector3();\n\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\n\n\tthis.color = ( color && color.isColor ) ? color : new Color();\n\tthis.vertexColors = Array.isArray( color ) ? color : [];\n\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\n\n}\n\nObject.assign( Face3.prototype, {\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.a = source.a;\n\t\tthis.b = source.b;\n\t\tthis.c = source.c;\n\n\t\tthis.normal.copy( source.normal );\n\t\tthis.color.copy( source.color );\n\n\t\tthis.materialIndex = source.materialIndex;\n\n\t\tfor ( var i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\n\n\t\t}\n\n\t\tfor ( var i = 0, il = source.vertexColors.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Face3 };\n","import { EventDispatcher } from '../core/EventDispatcher';\nimport { NoColors, FrontSide, SmoothShading, NormalBlending, LessEqualDepth, AddEquation, OneMinusSrcAlphaFactor, SrcAlphaFactor } from '../constants';\nimport { _Math } from '../math/Math';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nvar materialId = 0;\n\nfunction Material() {\n\n\tObject.defineProperty( this, 'id', { value: materialId ++ } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Material';\n\n\tthis.fog = true;\n\tthis.lights = true;\n\n\tthis.blending = NormalBlending;\n\tthis.side = FrontSide;\n\tthis.shading = SmoothShading; // THREE.FlatShading, THREE.SmoothShading\n\tthis.vertexColors = NoColors; // THREE.NoColors, THREE.VertexColors, THREE.FaceColors\n\n\tthis.opacity = 1;\n\tthis.transparent = false;\n\n\tthis.blendSrc = SrcAlphaFactor;\n\tthis.blendDst = OneMinusSrcAlphaFactor;\n\tthis.blendEquation = AddEquation;\n\tthis.blendSrcAlpha = null;\n\tthis.blendDstAlpha = null;\n\tthis.blendEquationAlpha = null;\n\n\tthis.depthFunc = LessEqualDepth;\n\tthis.depthTest = true;\n\tthis.depthWrite = true;\n\n\tthis.clippingPlanes = null;\n\tthis.clipIntersection = false;\n\tthis.clipShadows = false;\n\n\tthis.colorWrite = true;\n\n\tthis.precision = null; // override the renderer's default precision for this material\n\n\tthis.polygonOffset = false;\n\tthis.polygonOffsetFactor = 0;\n\tthis.polygonOffsetUnits = 0;\n\n\tthis.dithering = false;\n\n\tthis.alphaTest = 0;\n\tthis.premultipliedAlpha = false;\n\n\tthis.overdraw = 0; // Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\n\n\tthis.visible = true;\n\n\tthis.needsUpdate = true;\n\n}\n\nObject.assign( Material.prototype, EventDispatcher.prototype, {\n\n\tisMaterial: true,\n\n\tsetValues: function ( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( var key in values ) {\n\n\t\t\tvar newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar currentValue = this[ key ];\n\n\t\t\tif ( currentValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( currentValue && currentValue.isColor ) {\n\n\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\n\n\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t} else if ( key === 'overdraw' ) {\n\n\t\t\t\t// ensure overdraw is backwards-compatible with legacy boolean type\n\t\t\t\tthis[ key ] = Number( newValue );\n\n\t\t\t} else {\n\n\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar isRoot = meta === undefined;\n\n\t\tif ( isRoot ) {\n\n\t\t\tmeta = {\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t}\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Material',\n\t\t\t\tgenerator: 'Material.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Material serialization\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\n\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\n\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\n\t\tif ( this.clearCoat !== undefined ) data.clearCoat = this.clearCoat;\n\t\tif ( this.clearCoatRoughness !== undefined ) data.clearCoatRoughness = this.clearCoatRoughness;\n\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\n\t\tif ( this.lightMap && this.lightMap.isTexture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\n\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\n\t\t\tdata.bumpScale = this.bumpScale;\n\n\t\t}\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\n\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\n\t\t\tdata.normalScale = this.normalScale.toArray();\n\n\t\t}\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\n\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\n\t\t\tdata.displacementScale = this.displacementScale;\n\t\t\tdata.displacementBias = this.displacementBias;\n\n\t\t}\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\n\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\n\n\t\tif ( this.envMap && this.envMap.isTexture ) {\n\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\n\n\t\t}\n\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\n\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\n\t\tif ( this.shading !== SmoothShading ) data.shading = this.shading;\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\n\t\tif ( this.vertexColors !== NoColors ) data.vertexColors = this.vertexColors;\n\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\n\n\t\tdata.depthFunc = this.depthFunc;\n\t\tdata.depthTest = this.depthTest;\n\t\tdata.depthWrite = this.depthWrite;\n\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\n\n\t\tdata.skinning = this.skinning;\n\t\tdata.morphTargets = this.morphTargets;\n\n\t\tdata.dithering = this.dithering;\n\n\t\t// TODO: Copied from Object3D.toJSON\n\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tvar values = [];\n\n\t\t\tfor ( var key in cache ) {\n\n\t\t\t\tvar data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t\tif ( isRoot ) {\n\n\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\tvar images = extractFromCache( meta.images );\n\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\tif ( images.length > 0 ) data.images = images;\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.fog = source.fog;\n\t\tthis.lights = source.lights;\n\n\t\tthis.blending = source.blending;\n\t\tthis.side = source.side;\n\t\tthis.shading = source.shading;\n\t\tthis.vertexColors = source.vertexColors;\n\n\t\tthis.opacity = source.opacity;\n\t\tthis.transparent = source.transparent;\n\n\t\tthis.blendSrc = source.blendSrc;\n\t\tthis.blendDst = source.blendDst;\n\t\tthis.blendEquation = source.blendEquation;\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\n\n\t\tthis.depthFunc = source.depthFunc;\n\t\tthis.depthTest = source.depthTest;\n\t\tthis.depthWrite = source.depthWrite;\n\n\t\tthis.colorWrite = source.colorWrite;\n\n\t\tthis.precision = source.precision;\n\n\t\tthis.polygonOffset = source.polygonOffset;\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\t\tthis.dithering = source.dithering;\n\n\t\tthis.alphaTest = source.alphaTest;\n\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\n\n\t\tthis.overdraw = source.overdraw;\n\n\t\tthis.visible = source.visible;\n\t\tthis.clipShadows = source.clipShadows;\n\t\tthis.clipIntersection = source.clipIntersection;\n\n\t\tvar srcPlanes = source.clippingPlanes,\n\t\t\tdstPlanes = null;\n\n\t\tif ( srcPlanes !== null ) {\n\n\t\t\tvar n = srcPlanes.length;\n\t\t\tdstPlanes = new Array( n );\n\n\t\t\tfor ( var i = 0; i !== n; ++ i )\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\n\n\t\t}\n\n\t\tthis.clippingPlanes = dstPlanes;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { Material };\n","import { Material } from './Material';\nimport { MultiplyOperation } from '../constants';\nimport { Color } from '../math/Color';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  shading: THREE.SmoothShading,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>\n * }\n */\n\nfunction MeshBasicMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshBasicMaterial';\n\n\tthis.color = new Color( 0xffffff ); // emissive\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshBasicMaterial.prototype = Object.create( Material.prototype );\nMeshBasicMaterial.prototype.constructor = MeshBasicMaterial;\n\nMeshBasicMaterial.prototype.isMeshBasicMaterial = true;\n\nMeshBasicMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\n\nexport { MeshBasicMaterial };\n","/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Vector4( x, y, z, w ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\tthis.w = ( w !== undefined ) ? w : 1;\n\n}\n\nObject.assign( Vector4.prototype, {\n\n\tisVector4: true,\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tsetAxisAngleFromQuaternion: function ( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\t this.x = 1;\n\t\t\t this.y = 0;\n\t\t\t this.z = 0;\n\n\t\t} else {\n\n\t\t\t this.x = q.x / s;\n\t\t\t this.y = q.y / s;\n\t\t\t this.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar angle, x, y, z,\t\t// variables for result\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tvar xx = ( m11 + 1 ) / 2;\n\t\t\tvar yy = ( m22 + 1 ) / 2;\n\t\t\tvar zz = ( m33 + 1 ) / 2;\n\t\t\tvar xy = ( m12 + m21 ) / 4;\n\t\t\tvar xz = ( m13 + m31 ) / 4;\n\t\t\tvar yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t                   ( m13 - m31 ) * ( m13 - m31 ) +\n\t\t                   ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function () {\n\n\t\tvar min = new Vector4();\n\t\tvar max = new Vector4();\n\n\t\treturn function clampScalar( minVal, maxVal ) {\n\n\t\t\tmin.set( minVal, minVal, minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal, maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t}(),\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t},\n\n\tlengthManhattan: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.multiplyScalar( length / this.length() );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Vector4 };\n","import { Vector4 } from '../math/Vector4';\nimport { Vector3 } from '../math/Vector3';\nimport { Vector2 } from '../math/Vector2';\nimport { Color } from '../math/Color';\nimport { _Math } from '../math/Math';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction BufferAttribute( array, itemSize, normalized ) {\n\n\tif ( Array.isArray( array ) ) {\n\n\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t}\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.array = array;\n\tthis.itemSize = itemSize;\n\tthis.count = array !== undefined ? array.length / itemSize : 0;\n\tthis.normalized = normalized === true;\n\n\tthis.dynamic = false;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.onUploadCallback = function () {};\n\n\tthis.version = 0;\n\n}\n\nObject.defineProperty( BufferAttribute.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( BufferAttribute.prototype, {\n\n\tisBufferAttribute: true,\n\n\tsetArray: function ( array ) {\n\n\t\tif ( Array.isArray( array ) ) {\n\n\t\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t\t}\n\n\t\tthis.count = array !== undefined ? array.length / this.itemSize : 0;\n\t\tthis.array = array;\n\n\t},\n\n\tsetDynamic: function ( value ) {\n\n\t\tthis.dynamic = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.itemSize = source.itemSize;\n\t\tthis.count = source.count;\n\t\tthis.normalized = source.normalized;\n\n\t\tthis.dynamic = source.dynamic;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyArray: function ( array ) {\n\n\t\tthis.array.set( array );\n\n\t\treturn this;\n\n\t},\n\n\tcopyColorsArray: function ( colors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = colors.length; i < l; i ++ ) {\n\n\t\t\tvar color = colors[ i ];\n\n\t\t\tif ( color === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\n\t\t\t\tcolor = new Color();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = color.r;\n\t\t\tarray[ offset ++ ] = color.g;\n\t\t\tarray[ offset ++ ] = color.b;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyIndicesArray: function ( indices ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\tvar index = indices[ i ];\n\n\t\t\tarray[ offset ++ ] = index.a;\n\t\t\tarray[ offset ++ ] = index.b;\n\t\t\tarray[ offset ++ ] = index.c;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector2sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector2();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector3sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector3();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector4sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector4();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\t\t\tarray[ offset ++ ] = vector.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize ];\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 1 ];\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 2 ];\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 3 ];\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\n\n\t}\n\n} );\n\n//\n\nfunction Int8BufferAttribute( array, itemSize ) {\n\n\tBufferAttribute.call( this, new Int8Array( array ), itemSize );\n\n}\n\nInt8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt8BufferAttribute.prototype.constructor = Int8BufferAttribute;\n\n\nfunction Uint8BufferAttribute( array, itemSize ) {\n\n\tBufferAttribute.call( this, new Uint8Array( array ), itemSize );\n\n}\n\nUint8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8BufferAttribute.prototype.constructor = Uint8BufferAttribute;\n\n\nfunction Uint8ClampedBufferAttribute( array, itemSize ) {\n\n\tBufferAttribute.call( this, new Uint8ClampedArray( array ), itemSize );\n\n}\n\nUint8ClampedBufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8ClampedBufferAttribute.prototype.constructor = Uint8ClampedBufferAttribute;\n\n\nfunction Int16BufferAttribute( array, itemSize ) {\n\n\tBufferAttribute.call( this, new Int16Array( array ), itemSize );\n\n}\n\nInt16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt16BufferAttribute.prototype.constructor = Int16BufferAttribute;\n\n\nfunction Uint16BufferAttribute( array, itemSize ) {\n\n\tBufferAttribute.call( this, new Uint16Array( array ), itemSize );\n\n}\n\nUint16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint16BufferAttribute.prototype.constructor = Uint16BufferAttribute;\n\n\nfunction Int32BufferAttribute( array, itemSize ) {\n\n\tBufferAttribute.call( this, new Int32Array( array ), itemSize );\n\n}\n\nInt32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt32BufferAttribute.prototype.constructor = Int32BufferAttribute;\n\n\nfunction Uint32BufferAttribute( array, itemSize ) {\n\n\tBufferAttribute.call( this, new Uint32Array( array ), itemSize );\n\n}\n\nUint32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint32BufferAttribute.prototype.constructor = Uint32BufferAttribute;\n\n\nfunction Float32BufferAttribute( array, itemSize ) {\n\n\tBufferAttribute.call( this, new Float32Array( array ), itemSize );\n\n}\n\nFloat32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat32BufferAttribute.prototype.constructor = Float32BufferAttribute;\n\n\nfunction Float64BufferAttribute( array, itemSize ) {\n\n\tBufferAttribute.call( this, new Float64Array( array ), itemSize );\n\n}\n\nFloat64BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat64BufferAttribute.prototype.constructor = Float64BufferAttribute;\n\n//\n\nexport {\n\tFloat64BufferAttribute,\n\tFloat32BufferAttribute,\n\tUint32BufferAttribute,\n\tInt32BufferAttribute,\n\tUint16BufferAttribute,\n\tInt16BufferAttribute,\n\tUint8ClampedBufferAttribute,\n\tUint8BufferAttribute,\n\tInt8BufferAttribute,\n\tBufferAttribute\n};\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Vector2 } from '../math/Vector2';\n\nfunction DirectGeometry() {\n\n\tthis.indices = [];\n\tthis.vertices = [];\n\tthis.normals = [];\n\tthis.colors = [];\n\tthis.uvs = [];\n\tthis.uvs2 = [];\n\n\tthis.groups = [];\n\n\tthis.morphTargets = {};\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\t// this.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.verticesNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n}\n\nObject.assign( DirectGeometry.prototype, {\n\n\tcomputeGroups: function ( geometry ) {\n\n\t\tvar group;\n\t\tvar groups = [];\n\t\tvar materialIndex = undefined;\n\n\t\tvar faces = geometry.faces;\n\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\t// materials\n\n\t\t\tif ( face.materialIndex !== materialIndex ) {\n\n\t\t\t\tmaterialIndex = face.materialIndex;\n\n\t\t\t\tif ( group !== undefined ) {\n\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\t\t\tgroups.push( group );\n\n\t\t\t\t}\n\n\t\t\t\tgroup = {\n\t\t\t\t\tstart: i * 3,\n\t\t\t\t\tmaterialIndex: materialIndex\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( group !== undefined ) {\n\n\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\tgroups.push( group );\n\n\t\t}\n\n\t\tthis.groups = groups;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tvar faces = geometry.faces;\n\t\tvar vertices = geometry.vertices;\n\t\tvar faceVertexUvs = geometry.faceVertexUvs;\n\n\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\n\t\tvar hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\n\n\t\t// morphs\n\n\t\tvar morphTargets = geometry.morphTargets;\n\t\tvar morphTargetsLength = morphTargets.length;\n\n\t\tvar morphTargetsPosition;\n\n\t\tif ( morphTargetsLength > 0 ) {\n\n\t\t\tmorphTargetsPosition = [];\n\n\t\t\tfor ( var i = 0; i < morphTargetsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsPosition[ i ] = [];\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\n\n\t\t}\n\n\t\tvar morphNormals = geometry.morphNormals;\n\t\tvar morphNormalsLength = morphNormals.length;\n\n\t\tvar morphTargetsNormal;\n\n\t\tif ( morphNormalsLength > 0 ) {\n\n\t\t\tmorphTargetsNormal = [];\n\n\t\t\tfor ( var i = 0; i < morphNormalsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsNormal[ i ] = [];\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\n\n\t\t}\n\n\t\t// skins\n\n\t\tvar skinIndices = geometry.skinIndices;\n\t\tvar skinWeights = geometry.skinWeights;\n\n\t\tvar hasSkinIndices = skinIndices.length === vertices.length;\n\t\tvar hasSkinWeights = skinWeights.length === vertices.length;\n\n\t\t//\n\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tvar normal = face.normal;\n\n\t\t\t\tthis.normals.push( normal, normal, normal );\n\n\t\t\t}\n\n\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\tif ( vertexColors.length === 3 ) {\n\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tvar color = face.color;\n\n\t\t\t\tthis.colors.push( color, color, color );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv === true ) {\n\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\n\n\t\t\t\t\tthis.uvs.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv2 === true ) {\n\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 1 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\n\n\t\t\t\t\tthis.uvs2.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// morphs\n\n\t\t\tfor ( var j = 0; j < morphTargetsLength; j ++ ) {\n\n\t\t\t\tvar morphTarget = morphTargets[ j ].vertices;\n\n\t\t\t\tmorphTargetsPosition[ j ].push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0; j < morphNormalsLength; j ++ ) {\n\n\t\t\t\tvar morphNormal = morphNormals[ j ].vertexNormals[ i ];\n\n\t\t\t\tmorphTargetsNormal[ j ].push( morphNormal.a, morphNormal.b, morphNormal.c );\n\n\t\t\t}\n\n\t\t\t// skins\n\n\t\t\tif ( hasSkinIndices ) {\n\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\n\n\t\t\t}\n\n\t\t\tif ( hasSkinWeights ) {\n\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeGroups( geometry );\n\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { DirectGeometry };\n","function arrayMin( array ) {\n\n\tif ( array.length === 0 ) return Infinity;\n\n\tvar min = array[ 0 ];\n\n\tfor ( var i = 1, l = array.length; i < l; ++ i ) {\n\n\t\tif ( array[ i ] < min ) min = array[ i ];\n\n\t}\n\n\treturn min;\n\n}\n\nfunction arrayMax( array ) {\n\n\tif ( array.length === 0 ) return - Infinity;\n\n\tvar max = array[ 0 ];\n\n\tfor ( var i = 1, l = array.length; i < l; ++ i ) {\n\n\t\tif ( array[ i ] > max ) max = array[ i ];\n\n\t}\n\n\treturn max;\n\n}\n\nexport { arrayMin, arrayMax };\n","import { EventDispatcher } from './EventDispatcher';\nimport { Face3 } from './Face3';\nimport { Matrix3 } from '../math/Matrix3';\nimport { Sphere } from '../math/Sphere';\nimport { Box3 } from '../math/Box3';\nimport { Vector3 } from '../math/Vector3';\nimport { Matrix4 } from '../math/Matrix4';\nimport { Vector2 } from '../math/Vector2';\nimport { Color } from '../math/Color';\nimport { Object3D } from './Object3D';\nimport { _Math } from '../math/Math';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author bhouston / http://clara.io\n */\n\nvar count = 0;\nfunction GeometryIdCount() { return count++; }\n\nfunction Geometry() {\n\n\tObject.defineProperty( this, 'id', { value: GeometryIdCount() } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Geometry';\n\n\tthis.vertices = [];\n\tthis.colors = [];\n\tthis.faces = [];\n\tthis.faceVertexUvs = [[]];\n\n\tthis.morphTargets = [];\n\tthis.morphNormals = [];\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\tthis.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.elementsNeedUpdate = false;\n\tthis.verticesNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.lineDistancesNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n}\n\nObject.assign( Geometry.prototype, EventDispatcher.prototype, {\n\n\tisGeometry: true,\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tvar normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertex.applyMatrix4( matrix );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\tthis.verticesNeedUpdate = true;\n\t\tthis.normalsNeedUpdate = true;\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function () {\n\n\t\t// rotate geometry around world x-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateX( angle ) {\n\n\t\t\tm1.makeRotationX( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateY: function () {\n\n\t\t// rotate geometry around world y-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateY( angle ) {\n\n\t\t\tm1.makeRotationY( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateZ: function () {\n\n\t\t// rotate geometry around world z-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateZ( angle ) {\n\n\t\t\tm1.makeRotationZ( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function () {\n\n\t\t// translate geometry\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function translate( x, y, z ) {\n\n\t\t\tm1.makeTranslation( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tscale: function () {\n\n\t\t// scale geometry\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function scale( x, y, z ) {\n\n\t\t\tm1.makeScale( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tlookAt: function () {\n\n\t\tvar obj = new Object3D();\n\n\t\treturn function lookAt( vector ) {\n\n\t\t\tobj.lookAt( vector );\n\n\t\t\tobj.updateMatrix();\n\n\t\t\tthis.applyMatrix( obj.matrix );\n\n\t\t};\n\n\t}(),\n\n\tfromBufferGeometry: function ( geometry ) {\n\n\t\tvar scope = this;\n\n\t\tvar indices = geometry.index !== null ? geometry.index.array : undefined;\n\t\tvar attributes = geometry.attributes;\n\n\t\tvar positions = attributes.position.array;\n\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\n\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\n\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\n\t\tvar uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\n\n\t\tif ( uvs2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\n\n\t\tvar tempNormals = [];\n\t\tvar tempUVs = [];\n\t\tvar tempUVs2 = [];\n\n\t\tfor ( var i = 0, j = 0; i < positions.length; i += 3, j += 2 ) {\n\n\t\t\tscope.vertices.push( new Vector3( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] ) );\n\n\t\t\tif ( normals !== undefined ) {\n\n\t\t\t\ttempNormals.push( new Vector3( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( colors !== undefined ) {\n\n\t\t\t\tscope.colors.push( new Color( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\ttempUVs.push( new Vector2( uvs[ j ], uvs[ j + 1 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( uvs2 !== undefined ) {\n\n\t\t\t\ttempUVs2.push( new Vector2( uvs2[ j ], uvs2[ j + 1 ] ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction addFace( a, b, c, materialIndex ) {\n\n\t\t\tvar vertexNormals = normals !== undefined ? [ tempNormals[ a ].clone(), tempNormals[ b ].clone(), tempNormals[ c ].clone() ] : [];\n\t\t\tvar vertexColors = colors !== undefined ? [ scope.colors[ a ].clone(), scope.colors[ b ].clone(), scope.colors[ c ].clone() ] : [];\n\n\t\t\tvar face = new Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\n\n\t\t\tscope.faces.push( face );\n\n\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ tempUVs[ a ].clone(), tempUVs[ b ].clone(), tempUVs[ c ].clone() ] );\n\n\t\t\t}\n\n\t\t\tif ( uvs2 !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [ tempUVs2[ a ].clone(), tempUVs2[ b ].clone(), tempUVs2[ c ].clone() ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar groups = geometry.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tfor ( var i = 0; i < groups.length; i ++ ) {\n\n\t\t\t\tvar group = groups[ i ];\n\n\t\t\t\tvar start = group.start;\n\t\t\t\tvar count = group.count;\n\n\t\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\t\tif ( indices !== undefined ) {\n\n\t\t\t\t\t\taddFace( indices[ j ], indices[ j + 1 ], indices[ j + 2 ], group.materialIndex );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\taddFace( j, j + 1, j + 2, group.materialIndex );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( indices !== undefined ) {\n\n\t\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( var i = 0; i < positions.length / 3; i += 3 ) {\n\n\t\t\t\t\taddFace( i, i + 1, i + 2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeFaceNormals();\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tvar offset = this.boundingBox.getCenter().negate();\n\n\t\tthis.translate( offset.x, offset.y, offset.z );\n\n\t\treturn offset;\n\n\t},\n\n\tnormalize: function () {\n\n\t\tthis.computeBoundingSphere();\n\n\t\tvar center = this.boundingSphere.center;\n\t\tvar radius = this.boundingSphere.radius;\n\n\t\tvar s = radius === 0 ? 1 : 1.0 / radius;\n\n\t\tvar matrix = new Matrix4();\n\t\tmatrix.set(\n\t\t\ts, 0, 0, - s * center.x,\n\t\t\t0, s, 0, - s * center.y,\n\t\t\t0, 0, s, - s * center.z,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\tthis.applyMatrix( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tvar face = this.faces[ f ];\n\n\t\t\tvar vA = this.vertices[ face.a ];\n\t\t\tvar vB = this.vertices[ face.b ];\n\t\t\tvar vC = this.vertices[ face.c ];\n\n\t\t\tcb.subVectors( vC, vB );\n\t\t\tab.subVectors( vA, vB );\n\t\t\tcb.cross( ab );\n\n\t\t\tcb.normalize();\n\n\t\t\tface.normal.copy( cb );\n\n\t\t}\n\n\t},\n\n\tcomputeVertexNormals: function ( areaWeighted ) {\n\n\t\tif ( areaWeighted === undefined ) areaWeighted = true;\n\n\t\tvar v, vl, f, fl, face, vertices;\n\n\t\tvertices = new Array( this.vertices.length );\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ] = new Vector3();\n\n\t\t}\n\n\t\tif ( areaWeighted ) {\n\n\t\t\t// vertex normals weighted by triangle areas\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\n\n\t\t\tvar vA, vB, vC;\n\t\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvA = this.vertices[ face.a ];\n\t\t\t\tvB = this.vertices[ face.b ];\n\t\t\t\tvC = this.vertices[ face.c ];\n\n\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\tcb.cross( ab );\n\n\t\t\t\tvertices[ face.a ].add( cb );\n\t\t\t\tvertices[ face.b ].add( cb );\n\t\t\t\tvertices[ face.c ].add( cb );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.computeFaceNormals();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvertices[ face.a ].add( face.normal );\n\t\t\t\tvertices[ face.b ].add( face.normal );\n\t\t\t\tvertices[ face.c ].add( face.normal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ].normalize();\n\n\t\t}\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeFlatVertexNormals: function () {\n\n\t\tvar f, fl, face;\n\n\t\tthis.computeFaceNormals();\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 1 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 2 ].copy( face.normal );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 1 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 2 ] = face.normal.clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeMorphNormals: function () {\n\n\t\tvar i, il, f, fl, face;\n\n\t\t// save original normals\n\t\t// - create temp variables on first access\n\t\t//   otherwise just copy (for faster repeated calls)\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tif ( ! face.__originalFaceNormal ) {\n\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\n\n\t\t\t} else {\n\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\n\n\t\t\t}\n\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\n\n\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// use temp geometry to compute face and vertex normals for each morph\n\n\t\tvar tmpGeo = new Geometry();\n\t\ttmpGeo.faces = this.faces;\n\n\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\n\n\t\t\t// create on first access\n\n\t\t\tif ( ! this.morphNormals[ i ] ) {\n\n\t\t\t\tthis.morphNormals[ i ] = {};\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\n\n\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\n\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\n\n\t\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tfaceNormal = new Vector3();\n\t\t\t\t\tvertexNormals = { a: new Vector3(), b: new Vector3(), c: new Vector3() };\n\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar morphNormals = this.morphNormals[ i ];\n\n\t\t\t// set vertices to morph target\n\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\n\n\t\t\t// compute morph normals\n\n\t\t\ttmpGeo.computeFaceNormals();\n\t\t\ttmpGeo.computeVertexNormals();\n\n\t\t\t// store morph normals\n\n\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\n\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\n\n\t\t\t\tfaceNormal.copy( face.normal );\n\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore original normals\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tface.normal = face.__originalFaceNormal;\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\n\n\t\t}\n\n\t},\n\n\tcomputeLineDistances: function () {\n\n\t\tvar d = 0;\n\t\tvar vertices = this.vertices;\n\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tif ( i > 0 ) {\n\n\t\t\t\td += vertices[ i ].distanceTo( vertices[ i - 1 ] );\n\n\t\t\t}\n\n\t\t\tthis.lineDistances[ i ] = d;\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tthis.boundingBox.setFromPoints( this.vertices );\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\n\n\t},\n\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\n\n\t\tif ( ( geometry && geometry.isGeometry ) === false ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar normalMatrix,\n\t\t\tvertexOffset = this.vertices.length,\n\t\t\tvertices1 = this.vertices,\n\t\t\tvertices2 = geometry.vertices,\n\t\t\tfaces1 = this.faces,\n\t\t\tfaces2 = geometry.faces,\n\t\t\tuvs1 = this.faceVertexUvs[ 0 ],\n\t\t\tuvs2 = geometry.faceVertexUvs[ 0 ],\n\t\t\tcolors1 = this.colors,\n\t\t\tcolors2 = geometry.colors;\n\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\n\n\t\tif ( matrix !== undefined ) {\n\n\t\t\tnormalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t}\n\n\t\t// vertices\n\n\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = vertices2[ i ];\n\n\t\t\tvar vertexCopy = vertex.clone();\n\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\n\n\t\t\tvertices1.push( vertexCopy );\n\n\t\t}\n\n\t\t// colors\n\n\t\tfor ( var i = 0, il = colors2.length; i < il; i ++ ) {\n\n\t\t\tcolors1.push( colors2[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\n\n\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\n\t\t\t\tfaceVertexNormals = face.vertexNormals,\n\t\t\t\tfaceVertexColors = face.vertexColors;\n\n\t\t\tfaceCopy = new Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\n\t\t\tfaceCopy.normal.copy( face.normal );\n\n\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\n\n\t\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t}\n\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\n\n\t\t\t}\n\n\t\t\tfaceCopy.color.copy( face.color );\n\n\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\n\n\t\t\t\tcolor = faceVertexColors[ j ];\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\n\n\t\t\t}\n\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\n\n\t\t\tfaces1.push( faceCopy );\n\n\t\t}\n\n\t\t// uvs\n\n\t\tfor ( i = 0, il = uvs2.length; i < il; i ++ ) {\n\n\t\t\tvar uv = uvs2[ i ], uvCopy = [];\n\n\t\t\tif ( uv === undefined ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = uv.length; j < jl; j ++ ) {\n\n\t\t\t\tuvCopy.push( uv[ j ].clone() );\n\n\t\t\t}\n\n\t\t\tuvs1.push( uvCopy );\n\n\t\t}\n\n\t},\n\n\tmergeMesh: function ( mesh ) {\n\n\t\tif ( ( mesh && mesh.isMesh ) === false ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\n\t\t\treturn;\n\n\t\t}\n\n\t\tmesh.matrixAutoUpdate && mesh.updateMatrix();\n\n\t\tthis.merge( mesh.geometry, mesh.matrix );\n\n\t},\n\n\t/*\n\t * Checks for duplicate vertices with hashmap.\n\t * Duplicated vertices are removed\n\t * and faces' vertices are updated.\n\t */\n\n\tmergeVertices: function () {\n\n\t\tvar verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\n\t\tvar unique = [], changes = [];\n\n\t\tvar v, key;\n\t\tvar precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\n\t\tvar precision = Math.pow( 10, precisionPoints );\n\t\tvar i, il, face;\n\t\tvar indices, j, jl;\n\n\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tv = this.vertices[ i ];\n\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\n\n\t\t\tif ( verticesMap[ key ] === undefined ) {\n\n\t\t\t\tverticesMap[ key ] = i;\n\t\t\t\tunique.push( this.vertices[ i ] );\n\t\t\t\tchanges[ i ] = unique.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// if faces are completely degenerate after merging vertices, we\n\t\t// have to remove them from the geometry.\n\t\tvar faceIndicesToRemove = [];\n\n\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tface = this.faces[ i ];\n\n\t\t\tface.a = changes[ face.a ];\n\t\t\tface.b = changes[ face.b ];\n\t\t\tface.c = changes[ face.c ];\n\n\t\t\tindices = [ face.a, face.b, face.c ];\n\n\t\t\t// if any duplicate vertices are found in a Face3\n\t\t\t// we have to remove the face as nothing can be saved\n\t\t\tfor ( var n = 0; n < 3; n ++ ) {\n\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\n\n\t\t\t\t\tfaceIndicesToRemove.push( i );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\n\n\t\t\tvar idx = faceIndicesToRemove[ i ];\n\n\t\t\tthis.faces.splice( idx, 1 );\n\n\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Use unique set of vertices\n\n\t\tvar diff = this.vertices.length - unique.length;\n\t\tthis.vertices = unique;\n\t\treturn diff;\n\n\t},\n\n\tsortFacesByMaterialIndex: function () {\n\n\t\tvar faces = this.faces;\n\t\tvar length = faces.length;\n\n\t\t// tag faces\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tfaces[ i ]._id = i;\n\n\t\t}\n\n\t\t// sort faces\n\n\t\tfunction materialIndexSort( a, b ) {\n\n\t\t\treturn a.materialIndex - b.materialIndex;\n\n\t\t}\n\n\t\tfaces.sort( materialIndexSort );\n\n\t\t// sort uvs\n\n\t\tvar uvs1 = this.faceVertexUvs[ 0 ];\n\t\tvar uvs2 = this.faceVertexUvs[ 1 ];\n\n\t\tvar newUvs1, newUvs2;\n\n\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\n\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar id = faces[ i ]._id;\n\n\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\n\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\n\n\t\t}\n\n\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\n\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Geometry',\n\t\t\t\tgenerator: 'Geometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Geometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tvar vertices = [];\n\n\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tvar faces = [];\n\t\tvar normals = [];\n\t\tvar normalsHash = {};\n\t\tvar colors = [];\n\t\tvar colorsHash = {};\n\t\tvar uvs = [];\n\t\tvar uvsHash = {};\n\n\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\n\t\t\tvar hasMaterial = true;\n\t\t\tvar hasFaceUv = false; // deprecated\n\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\n\t\t\tvar hasFaceNormal = face.normal.length() > 0;\n\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\n\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\n\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\n\n\t\t\tvar faceType = 0;\n\n\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\n\n\t\t\tfaces.push( faceType );\n\t\t\tfaces.push( face.a, face.b, face.c );\n\t\t\tfaces.push( face.materialIndex );\n\n\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setBit( value, position, enabled ) {\n\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\n\n\t\t}\n\n\t\tfunction getNormalIndex( normal ) {\n\n\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\n\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn normalsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\treturn normalsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getColorIndex( color ) {\n\n\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\n\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn colorsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tcolorsHash[ hash ] = colors.length;\n\t\t\tcolors.push( color.getHex() );\n\n\t\t\treturn colorsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getUvIndex( uv ) {\n\n\t\t\tvar hash = uv.x.toString() + uv.y.toString();\n\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn uvsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\treturn uvsHash[ hash ];\n\n\t\t}\n\n\t\tdata.data = {};\n\n\t\tdata.data.vertices = vertices;\n\t\tdata.data.normals = normals;\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\n\t\tdata.data.faces = faces;\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t var parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t var values = [];\n\n\t\t for ( var key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t var geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new Geometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tvar i, il, j, jl, k, kl;\n\n\t\t// reset\n\n\t\tthis.vertices = [];\n\t\tthis.colors = [];\n\t\tthis.faces = [];\n\t\tthis.faceVertexUvs = [[]];\n\t\tthis.morphTargets = [];\n\t\tthis.morphNormals = [];\n\t\tthis.skinWeights = [];\n\t\tthis.skinIndices = [];\n\t\tthis.lineDistances = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// vertices\n\n\t\tvar vertices = source.vertices;\n\n\t\tfor ( i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\n\n\t\t}\n\n\t\t// colors\n\n\t\tvar colors = source.colors;\n\n\t\tfor ( i = 0, il = colors.length; i < il; i ++ ) {\n\n\t\t\tthis.colors.push( colors[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tvar faces = source.faces;\n\n\t\tfor ( i = 0, il = faces.length; i < il; i ++ ) {\n\n\t\t\tthis.faces.push( faces[ i ].clone() );\n\n\t\t}\n\n\t\t// face vertex uvs\n\n\t\tfor ( i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tvar faceVertexUvs = source.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\n\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tvar uvs = faceVertexUvs[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( k = 0, kl = uvs.length; k < kl; k ++ ) {\n\n\t\t\t\t\tvar uv = uvs[ k ];\n\n\t\t\t\t\tuvsCopy.push( uv.clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tvar morphTargets = source.morphTargets;\n\n\t\tfor ( i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tvar morphTarget = {};\n\t\t\tmorphTarget.name = morphTargets[ i ].name;\n\n\t\t\t// vertices\n\n\t\t\tif ( morphTargets[ i ].vertices !== undefined ) {\n\n\t\t\t\tmorphTarget.vertices = [];\n\n\t\t\t\tfor ( j = 0, jl = morphTargets[ i ].vertices.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.vertices.push( morphTargets[ i ].vertices[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// normals\n\n\t\t\tif ( morphTargets[ i ].normals !== undefined ) {\n\n\t\t\t\tmorphTarget.normals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphTargets[ i ].normals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.normals.push( morphTargets[ i ].normals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.push( morphTarget );\n\n\t\t}\n\n\t\t// morph normals\n\n\t\tvar morphNormals = source.morphNormals;\n\n\t\tfor ( i = 0, il = morphNormals.length; i < il; i ++ ) {\n\n\t\t\tvar morphNormal = {};\n\n\t\t\t// vertex normals\n\n\t\t\tif ( morphNormals[ i ].vertexNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.vertexNormals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphNormals[ i ].vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar srcVertexNormal = morphNormals[ i ].vertexNormals[ j ];\n\t\t\t\t\tvar destVertexNormal = {};\n\n\t\t\t\t\tdestVertexNormal.a = srcVertexNormal.a.clone();\n\t\t\t\t\tdestVertexNormal.b = srcVertexNormal.b.clone();\n\t\t\t\t\tdestVertexNormal.c = srcVertexNormal.c.clone();\n\n\t\t\t\t\tmorphNormal.vertexNormals.push( destVertexNormal );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// face normals\n\n\t\t\tif ( morphNormals[ i ].faceNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.faceNormals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphNormals[ i ].faceNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphNormal.faceNormals.push( morphNormals[ i ].faceNormals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphNormals.push( morphNormal );\n\n\t\t}\n\n\t\t// skin weights\n\n\t\tvar skinWeights = source.skinWeights;\n\n\t\tfor ( i = 0, il = skinWeights.length; i < il; i ++ ) {\n\n\t\t\tthis.skinWeights.push( skinWeights[ i ].clone() );\n\n\t\t}\n\n\t\t// skin indices\n\n\t\tvar skinIndices = source.skinIndices;\n\n\t\tfor ( i = 0, il = skinIndices.length; i < il; i ++ ) {\n\n\t\t\tthis.skinIndices.push( skinIndices[ i ].clone() );\n\n\t\t}\n\n\t\t// line distances\n\n\t\tvar lineDistances = source.lineDistances;\n\n\t\tfor ( i = 0, il = lineDistances.length; i < il; i ++ ) {\n\n\t\t\tthis.lineDistances.push( lineDistances[ i ] );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tvar boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tvar boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// update flags\n\n\t\tthis.elementsNeedUpdate = source.elementsNeedUpdate;\n\t\tthis.verticesNeedUpdate = source.verticesNeedUpdate;\n\t\tthis.uvsNeedUpdate = source.uvsNeedUpdate;\n\t\tthis.normalsNeedUpdate = source.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = source.colorsNeedUpdate;\n\t\tthis.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\n\t\tthis.groupsNeedUpdate = source.groupsNeedUpdate;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { GeometryIdCount, Geometry };\n","import { Vector3 } from '../math/Vector3';\nimport { Box3 } from '../math/Box3';\nimport { EventDispatcher } from './EventDispatcher';\nimport { BufferAttribute, Float32BufferAttribute, Uint16BufferAttribute, Uint32BufferAttribute } from './BufferAttribute';\nimport { Sphere } from '../math/Sphere';\nimport { DirectGeometry } from './DirectGeometry';\nimport { Object3D } from './Object3D';\nimport { Matrix4 } from '../math/Matrix4';\nimport { Matrix3 } from '../math/Matrix3';\nimport { _Math } from '../math/Math';\nimport { arrayMax } from '../utils';\nimport { GeometryIdCount } from './Geometry';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction BufferGeometry() {\n\n\tObject.defineProperty( this, 'id', { value: GeometryIdCount() } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'BufferGeometry';\n\n\tthis.index = null;\n\tthis.attributes = {};\n\n\tthis.morphAttributes = {};\n\n\tthis.groups = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\tthis.drawRange = { start: 0, count: Infinity };\n\n}\n\nBufferGeometry.MaxIndex = 65535;\n\nObject.assign( BufferGeometry.prototype, EventDispatcher.prototype, {\n\n\tisBufferGeometry: true,\n\n\tgetIndex: function () {\n\n\t\treturn this.index;\n\n\t},\n\n\tsetIndex: function ( index ) {\n\n\t\tif ( Array.isArray( index ) ) {\n\n\t\t\tthis.index = new ( arrayMax( index ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\n\n\t\t} else {\n\n\t\t\tthis.index = index;\n\n\t\t}\n\n\t},\n\n\taddAttribute: function ( name, attribute ) {\n\n\t\tif ( ( attribute && attribute.isBufferAttribute ) === false && ( attribute && attribute.isInterleavedBufferAttribute ) === false ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\n\n\t\t\tthis.addAttribute( name, new BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( name === 'index' ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\n\t\t\tthis.setIndex( attribute );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.attributes[ name ] = attribute;\n\n\t\treturn this;\n\n\t},\n\n\tgetAttribute: function ( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t},\n\n\tremoveAttribute: function ( name ) {\n\n\t\tdelete this.attributes[ name ];\n\n\t\treturn this;\n\n\t},\n\n\taddGroup: function ( start, count, materialIndex ) {\n\n\t\tthis.groups.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\n\n\t\t} );\n\n\t},\n\n\tclearGroups: function () {\n\n\t\tthis.groups = [];\n\n\t},\n\n\tsetDrawRange: function ( start, count ) {\n\n\t\tthis.drawRange.start = start;\n\t\tthis.drawRange.count = count;\n\n\t},\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tvar position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tmatrix.applyToBufferAttribute( position );\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tvar normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tvar normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormalMatrix.applyToBufferAttribute( normal );\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function () {\n\n\t\t// rotate geometry around world x-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateX( angle ) {\n\n\t\t\tm1.makeRotationX( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateY: function () {\n\n\t\t// rotate geometry around world y-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateY( angle ) {\n\n\t\t\tm1.makeRotationY( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateZ: function () {\n\n\t\t// rotate geometry around world z-axis\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function rotateZ( angle ) {\n\n\t\t\tm1.makeRotationZ( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function () {\n\n\t\t// translate geometry\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function translate( x, y, z ) {\n\n\t\t\tm1.makeTranslation( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tscale: function () {\n\n\t\t// scale geometry\n\n\t\tvar m1 = new Matrix4();\n\n\t\treturn function scale( x, y, z ) {\n\n\t\t\tm1.makeScale( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tlookAt: function () {\n\n\t\tvar obj = new Object3D();\n\n\t\treturn function lookAt( vector ) {\n\n\t\t\tobj.lookAt( vector );\n\n\t\t\tobj.updateMatrix();\n\n\t\t\tthis.applyMatrix( obj.matrix );\n\n\t\t};\n\n\t}(),\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tvar offset = this.boundingBox.getCenter().negate();\n\n\t\tthis.translate( offset.x, offset.y, offset.z );\n\n\t\treturn offset;\n\n\t},\n\n\tsetFromObject: function ( object ) {\n\n\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( object.isPoints || object.isLine ) {\n\n\t\t\tvar positions = new Float32BufferAttribute( geometry.vertices.length * 3, 3 );\n\t\t\tvar colors = new Float32BufferAttribute( geometry.colors.length * 3, 3 );\n\n\t\t\tthis.addAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\n\t\t\tthis.addAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\n\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\n\n\t\t\t\tvar lineDistances = new Float32BufferAttribute( geometry.lineDistances.length, 1 );\n\n\t\t\t\tthis.addAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t\t}\n\n\t\t} else if ( object.isMesh ) {\n\n\t\t\tif ( geometry && geometry.isGeometry ) {\n\n\t\t\t\tthis.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tupdateFromObject: function ( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tvar direct = geometry.__directGeometry;\n\n\t\t\tif ( geometry.elementsNeedUpdate === true ) {\n\n\t\t\t\tdirect = undefined;\n\t\t\t\tgeometry.elementsNeedUpdate = false;\n\n\t\t\t}\n\n\t\t\tif ( direct === undefined ) {\n\n\t\t\t\treturn this.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\tgeometry.normalsNeedUpdate = false;\n\t\t\tgeometry.colorsNeedUpdate = false;\n\t\t\tgeometry.uvsNeedUpdate = false;\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t\tgeometry = direct;\n\n\t\t}\n\n\t\tvar attribute;\n\n\t\tif ( geometry.verticesNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.position;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.normalsNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.normal;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.normals );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.normalsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.colorsNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.color;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyColorsArray( geometry.colors );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.colorsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.uvsNeedUpdate ) {\n\n\t\t\tattribute = this.attributes.uv;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector2sArray( geometry.uvs );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.uvsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.lineDistancesNeedUpdate ) {\n\n\t\t\tattribute = this.attributes.lineDistance;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyArray( geometry.lineDistances );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.groupsNeedUpdate ) {\n\n\t\t\tgeometry.computeGroups( object.geometry );\n\t\t\tthis.groups = geometry.groups;\n\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tgeometry.__directGeometry = new DirectGeometry().fromGeometry( geometry );\n\n\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\n\n\t},\n\n\tfromDirectGeometry: function ( geometry ) {\n\n\t\tvar positions = new Float32Array( geometry.vertices.length * 3 );\n\t\tthis.addAttribute( 'position', new BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\n\n\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\tvar normals = new Float32Array( geometry.normals.length * 3 );\n\t\t\tthis.addAttribute( 'normal', new BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\n\n\t\t}\n\n\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\tvar colors = new Float32Array( geometry.colors.length * 3 );\n\t\t\tthis.addAttribute( 'color', new BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs.length > 0 ) {\n\n\t\t\tvar uvs = new Float32Array( geometry.uvs.length * 2 );\n\t\t\tthis.addAttribute( 'uv', new BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs2.length > 0 ) {\n\n\t\t\tvar uvs2 = new Float32Array( geometry.uvs2.length * 2 );\n\t\t\tthis.addAttribute( 'uv2', new BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\n\n\t\t}\n\n\t\tif ( geometry.indices.length > 0 ) {\n\n\t\t\tvar TypeArray = arrayMax( geometry.indices ) > 65535 ? Uint32Array : Uint16Array;\n\t\t\tvar indices = new TypeArray( geometry.indices.length * 3 );\n\t\t\tthis.setIndex( new BufferAttribute( indices, 1 ).copyIndicesArray( geometry.indices ) );\n\n\t\t}\n\n\t\t// groups\n\n\t\tthis.groups = geometry.groups;\n\n\t\t// morphs\n\n\t\tfor ( var name in geometry.morphTargets ) {\n\n\t\t\tvar array = [];\n\t\t\tvar morphTargets = geometry.morphTargets[ name ];\n\n\t\t\tfor ( var i = 0, l = morphTargets.length; i < l; i ++ ) {\n\n\t\t\t\tvar morphTarget = morphTargets[ i ];\n\n\t\t\t\tvar attribute = new Float32BufferAttribute( morphTarget.length * 3, 3 );\n\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\t// skinning\n\n\t\tif ( geometry.skinIndices.length > 0 ) {\n\n\t\t\tvar skinIndices = new Float32BufferAttribute( geometry.skinIndices.length * 4, 4 );\n\t\t\tthis.addAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\n\n\t\t}\n\n\t\tif ( geometry.skinWeights.length > 0 ) {\n\n\t\t\tvar skinWeights = new Float32BufferAttribute( geometry.skinWeights.length * 4, 4 );\n\t\t\tthis.addAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tvar position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\n\n\t\t} else {\n\n\t\t\tthis.boundingBox.makeEmpty();\n\n\t\t}\n\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tvar box = new Box3();\n\t\tvar vector = new Vector3();\n\n\t\treturn function computeBoundingSphere() {\n\n\t\t\tif ( this.boundingSphere === null ) {\n\n\t\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t\t}\n\n\t\t\tvar position = this.attributes.position;\n\n\t\t\tif ( position ) {\n\n\t\t\t\tvar center = this.boundingSphere.center;\n\n\t\t\t\tbox.setFromBufferAttribute( position );\n\t\t\t\tbox.getCenter( center );\n\n\t\t\t\t// hoping to find a boundingSphere with a radius smaller than the\n\t\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\t\t\t\tvar maxRadiusSq = 0;\n\n\t\t\t\tfor ( var i = 0, il = position.count; i < il; i ++ ) {\n\n\t\t\t\t\tvector.x = position.getX( i );\n\t\t\t\t\tvector.y = position.getY( i );\n\t\t\t\t\tvector.z = position.getZ( i );\n\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( vector ) );\n\n\t\t\t\t}\n\n\t\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}(),\n\n\tcomputeFaceNormals: function () {\n\n\t\t// backwards compatibility\n\n\t},\n\n\tcomputeVertexNormals: function () {\n\n\t\tvar index = this.index;\n\t\tvar attributes = this.attributes;\n\t\tvar groups = this.groups;\n\n\t\tif ( attributes.position ) {\n\n\t\t\tvar positions = attributes.position.array;\n\n\t\t\tif ( attributes.normal === undefined ) {\n\n\t\t\t\tthis.addAttribute( 'normal', new BufferAttribute( new Float32Array( positions.length ), 3 ) );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tvar array = attributes.normal.array;\n\n\t\t\t\tfor ( var i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t\t\tarray[ i ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar normals = attributes.normal.array;\n\n\t\t\tvar vA, vB, vC;\n\t\t\tvar pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n\t\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( index ) {\n\n\t\t\t\tvar indices = index.array;\n\n\t\t\t\tif ( groups.length === 0 ) {\n\n\t\t\t\t\tthis.addGroup( 0, indices.length );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var j = 0, jl = groups.length; j < jl; ++ j ) {\n\n\t\t\t\t\tvar group = groups[ j ];\n\n\t\t\t\t\tvar start = group.start;\n\t\t\t\t\tvar count = group.count;\n\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\t\t\tvA = indices[ i + 0 ] * 3;\n\t\t\t\t\t\tvB = indices[ i + 1 ] * 3;\n\t\t\t\t\t\tvC = indices[ i + 2 ] * 3;\n\n\t\t\t\t\t\tpA.fromArray( positions, vA );\n\t\t\t\t\t\tpB.fromArray( positions, vB );\n\t\t\t\t\t\tpC.fromArray( positions, vC );\n\n\t\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\t\tnormals[ vA ] += cb.x;\n\t\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\n\n\t\t\t\t\t\tnormals[ vB ] += cb.x;\n\t\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\n\n\t\t\t\t\t\tnormals[ vC ] += cb.x;\n\t\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\n\n\t\t\t\t\tpA.fromArray( positions, i );\n\t\t\t\t\tpB.fromArray( positions, i + 3 );\n\t\t\t\t\tpC.fromArray( positions, i + 6 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormals[ i ] = cb.x;\n\t\t\t\t\tnormals[ i + 1 ] = cb.y;\n\t\t\t\t\tnormals[ i + 2 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 3 ] = cb.x;\n\t\t\t\t\tnormals[ i + 4 ] = cb.y;\n\t\t\t\t\tnormals[ i + 5 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 6 ] = cb.x;\n\t\t\t\t\tnormals[ i + 7 ] = cb.y;\n\t\t\t\t\tnormals[ i + 8 ] = cb.z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tattributes.normal.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tmerge: function ( geometry, offset ) {\n\n\t\tif ( ( geometry && geometry.isBufferGeometry ) === false ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\n\n\t\t\tvar attribute1 = attributes[ key ];\n\t\t\tvar attributeArray1 = attribute1.array;\n\n\t\t\tvar attribute2 = geometry.attributes[ key ];\n\t\t\tvar attributeArray2 = attribute2.array;\n\n\t\t\tvar attributeSize = attribute2.itemSize;\n\n\t\t\tfor ( var i = 0, j = attributeSize * offset; i < attributeArray2.length; i ++, j ++ ) {\n\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tnormalizeNormals: function () {\n\n\t\tvar normals = this.attributes.normal;\n\n\t\tvar x, y, z, n;\n\n\t\tfor ( var i = 0, il = normals.count; i < il; i ++ ) {\n\n\t\t\tx = normals.getX( i );\n\t\t\ty = normals.getY( i );\n\t\t\tz = normals.getZ( i );\n\n\t\t\tn = 1.0 / Math.sqrt( x * x + y * y + z * z );\n\n\t\t\tnormals.setXYZ( i, x * n, y * n, z * n );\n\n\t\t}\n\n\t},\n\n\ttoNonIndexed: function () {\n\n\t\tif ( this.index === null ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar geometry2 = new BufferGeometry();\n\n\t\tvar indices = this.index.array;\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var name in attributes ) {\n\n\t\t\tvar attribute = attributes[ name ];\n\n\t\t\tvar array = attribute.array;\n\t\t\tvar itemSize = attribute.itemSize;\n\n\t\t\tvar array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\tvar index = 0, index2 = 0;\n\n\t\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\tfor ( var j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry2.addAttribute( name, new BufferAttribute( array2, itemSize ) );\n\n\t\t}\n\n\t\treturn geometry2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard BufferGeometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tdata.data = { attributes: {} };\n\n\t\tvar index = this.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tvar array = Array.prototype.slice.call( index.array );\n\n\t\t\tdata.data.index = {\n\t\t\t\ttype: index.array.constructor.name,\n\t\t\t\tarray: array\n\t\t\t};\n\n\t\t}\n\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tvar attribute = attributes[ key ];\n\n\t\t\tvar array = Array.prototype.slice.call( attribute.array );\n\n\t\t\tdata.data.attributes[ key ] = {\n\t\t\t\titemSize: attribute.itemSize,\n\t\t\t\ttype: attribute.array.constructor.name,\n\t\t\t\tarray: array,\n\t\t\t\tnormalized: attribute.normalized\n\t\t\t};\n\n\t\t}\n\n\t\tvar groups = this.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\n\n\t\t}\n\n\t\tvar boundingSphere = this.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tdata.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t};\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t var parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t var values = [];\n\n\t\t for ( var key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t var geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new BufferGeometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tvar name, i, l;\n\n\t\t// reset\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\t\tthis.morphAttributes = {};\n\t\tthis.groups = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// index\n\n\t\tvar index = source.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tthis.setIndex( index.clone() );\n\n\t\t}\n\n\t\t// attributes\n\n\t\tvar attributes = source.attributes;\n\n\t\tfor ( name in attributes ) {\n\n\t\t\tvar attribute = attributes[ name ];\n\t\t\tthis.addAttribute( name, attribute.clone() );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tvar morphAttributes = source.morphAttributes;\n\n\t\tfor ( name in morphAttributes ) {\n\n\t\t\tvar array = [];\n\t\t\tvar morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( i = 0, l = morphAttribute.length; i < l; i ++ ) {\n\n\t\t\t\tarray.push( morphAttribute[ i ].clone() );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\t// groups\n\n\t\tvar groups = source.groups;\n\n\t\tfor ( i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tvar group = groups[ i ];\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tvar boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tvar boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// draw range\n\n\t\tthis.drawRange.start = source.drawRange.start;\n\t\tthis.drawRange.count = source.drawRange.count;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { BufferGeometry };\n","import { Vector3 } from '../math/Vector3';\nimport { Vector2 } from '../math/Vector2';\nimport { Sphere } from '../math/Sphere';\nimport { Ray } from '../math/Ray';\nimport { Matrix4 } from '../math/Matrix4';\nimport { Object3D } from '../core/Object3D';\nimport { Triangle } from '../math/Triangle';\nimport { Face3 } from '../core/Face3';\nimport { DoubleSide, BackSide, TrianglesDrawMode } from '../constants';\nimport { MeshBasicMaterial } from '../materials/MeshBasicMaterial';\nimport { BufferGeometry } from '../core/BufferGeometry';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author jonobr1 / http://jonobr1.com/\n */\n\nfunction Mesh( geometry, material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Mesh';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new MeshBasicMaterial( { color: Math.random() * 0xffffff } );\n\n\tthis.drawMode = TrianglesDrawMode;\n\n\tthis.updateMorphTargets();\n\n}\n\nMesh.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Mesh,\n\n\tisMesh: true,\n\n\tsetDrawMode: function ( value ) {\n\n\t\tthis.drawMode = value;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.drawMode = source.drawMode;\n\n\t\treturn this;\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tvar morphTargets = this.geometry.morphTargets;\n\n\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\tthis.morphTargetInfluences = [];\n\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\tfor ( var m = 0, ml = morphTargets.length; m < ml; m ++ ) {\n\n\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\tthis.morphTargetDictionary[ morphTargets[ m ].name ] = m;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\traycast: ( function () {\n\n\t\tvar inverseMatrix = new Matrix4();\n\t\tvar ray = new Ray();\n\t\tvar sphere = new Sphere();\n\n\t\tvar vA = new Vector3();\n\t\tvar vB = new Vector3();\n\t\tvar vC = new Vector3();\n\n\t\tvar tempA = new Vector3();\n\t\tvar tempB = new Vector3();\n\t\tvar tempC = new Vector3();\n\n\t\tvar uvA = new Vector2();\n\t\tvar uvB = new Vector2();\n\t\tvar uvC = new Vector2();\n\n\t\tvar barycoord = new Vector3();\n\n\t\tvar intersectionPoint = new Vector3();\n\t\tvar intersectionPointWorld = new Vector3();\n\n\t\tfunction uvIntersection( point, p1, p2, p3, uv1, uv2, uv3 ) {\n\n\t\t\tTriangle.barycoordFromPoint( point, p1, p2, p3, barycoord );\n\n\t\t\tuv1.multiplyScalar( barycoord.x );\n\t\t\tuv2.multiplyScalar( barycoord.y );\n\t\t\tuv3.multiplyScalar( barycoord.z );\n\n\t\t\tuv1.add( uv2 ).add( uv3 );\n\n\t\t\treturn uv1.clone();\n\n\t\t}\n\n\t\tfunction checkIntersection( object, raycaster, ray, pA, pB, pC, point ) {\n\n\t\t\tvar intersect;\n\t\t\tvar material = object.material;\n\n\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t\t\t} else {\n\n\t\t\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\n\n\t\t\t}\n\n\t\t\tif ( intersect === null ) return null;\n\n\t\t\tintersectionPointWorld.copy( point );\n\t\t\tintersectionPointWorld.applyMatrix4( object.matrixWorld );\n\n\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\n\n\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\n\n\t\t\treturn {\n\t\t\t\tdistance: distance,\n\t\t\t\tpoint: intersectionPointWorld.clone(),\n\t\t\t\tobject: object\n\t\t\t};\n\n\t\t}\n\n\t\tfunction checkBufferGeometryIntersection( object, raycaster, ray, position, uv, a, b, c ) {\n\n\t\t\tvA.fromBufferAttribute( position, a );\n\t\t\tvB.fromBufferAttribute( position, b );\n\t\t\tvC.fromBufferAttribute( position, c );\n\n\t\t\tvar intersection = checkIntersection( object, raycaster, ray, vA, vB, vC, intersectionPoint );\n\n\t\t\tif ( intersection ) {\n\n\t\t\t\tif ( uv ) {\n\n\t\t\t\t\tuvA.fromBufferAttribute( uv, a );\n\t\t\t\t\tuvB.fromBufferAttribute( uv, b );\n\t\t\t\t\tuvC.fromBufferAttribute( uv, c );\n\n\t\t\t\t\tintersection.uv = uvIntersection( intersectionPoint, vA, vB, vC, uvA, uvB, uvC );\n\n\t\t\t\t}\n\n\t\t\t\tintersection.face = new Face3( a, b, c, Triangle.normal( vA, vB, vC ) );\n\t\t\t\tintersection.faceIndex = a;\n\n\t\t\t}\n\n\t\t\treturn intersection;\n\n\t\t}\n\n\t\treturn function raycast( raycaster, intersects ) {\n\n\t\t\tvar geometry = this.geometry;\n\t\t\tvar material = this.material;\n\t\t\tvar matrixWorld = this.matrixWorld;\n\n\t\t\tif ( material === undefined ) return;\n\n\t\t\t// Checking boundingSphere distance to ray\n\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t\tsphere.copy( geometry.boundingSphere );\n\t\t\tsphere.applyMatrix4( matrixWorld );\n\n\t\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\n\n\t\t\t//\n\n\t\t\tinverseMatrix.getInverse( matrixWorld );\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\t\t// Check boundingBox before continuing\n\n\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\tif ( ray.intersectsBox( geometry.boundingBox ) === false ) return;\n\n\t\t\t}\n\n\t\t\tvar intersection;\n\n\t\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t\tvar a, b, c;\n\t\t\t\tvar index = geometry.index;\n\t\t\t\tvar position = geometry.attributes.position;\n\t\t\t\tvar uv = geometry.attributes.uv;\n\t\t\t\tvar i, l;\n\n\t\t\t\tif ( index !== null ) {\n\n\t\t\t\t\t// indexed buffer geometry\n\n\t\t\t\t\tfor ( i = 0, l = index.count; i < l; i += 3 ) {\n\n\t\t\t\t\t\ta = index.getX( i );\n\t\t\t\t\t\tb = index.getX( i + 1 );\n\t\t\t\t\t\tc = index.getX( i + 2 );\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, raycaster, ray, position, uv, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indices buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// non-indexed buffer geometry\n\n\t\t\t\t\tfor ( i = 0, l = position.count; i < l; i += 3 ) {\n\n\t\t\t\t\t\ta = i;\n\t\t\t\t\t\tb = i + 1;\n\t\t\t\t\t\tc = i + 2;\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, raycaster, ray, position, uv, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.index = a; // triangle number in positions buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\t\tvar fvA, fvB, fvC;\n\t\t\t\tvar isMultiMaterial = Array.isArray( material );\n\n\t\t\t\tvar vertices = geometry.vertices;\n\t\t\t\tvar faces = geometry.faces;\n\t\t\t\tvar uvs;\n\n\t\t\t\tvar faceVertexUvs = geometry.faceVertexUvs[ 0 ];\n\t\t\t\tif ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\n\n\t\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tvar face = faces[ f ];\n\t\t\t\t\tvar faceMaterial = isMultiMaterial ? material[ face.materialIndex ] : material;\n\n\t\t\t\t\tif ( faceMaterial === undefined ) continue;\n\n\t\t\t\t\tfvA = vertices[ face.a ];\n\t\t\t\t\tfvB = vertices[ face.b ];\n\t\t\t\t\tfvC = vertices[ face.c ];\n\n\t\t\t\t\tif ( faceMaterial.morphTargets === true ) {\n\n\t\t\t\t\t\tvar morphTargets = geometry.morphTargets;\n\t\t\t\t\t\tvar morphInfluences = this.morphTargetInfluences;\n\n\t\t\t\t\t\tvA.set( 0, 0, 0 );\n\t\t\t\t\t\tvB.set( 0, 0, 0 );\n\t\t\t\t\t\tvC.set( 0, 0, 0 );\n\n\t\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\n\n\t\t\t\t\t\t\tvar influence = morphInfluences[ t ];\n\n\t\t\t\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t\t\t\tvar targets = morphTargets[ t ].vertices;\n\n\t\t\t\t\t\t\tvA.addScaledVector( tempA.subVectors( targets[ face.a ], fvA ), influence );\n\t\t\t\t\t\t\tvB.addScaledVector( tempB.subVectors( targets[ face.b ], fvB ), influence );\n\t\t\t\t\t\t\tvC.addScaledVector( tempC.subVectors( targets[ face.c ], fvC ), influence );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvA.add( fvA );\n\t\t\t\t\t\tvB.add( fvB );\n\t\t\t\t\t\tvC.add( fvC );\n\n\t\t\t\t\t\tfvA = vA;\n\t\t\t\t\t\tfvB = vB;\n\t\t\t\t\t\tfvC = vC;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tintersection = checkIntersection( this, raycaster, ray, fvA, fvB, fvC, intersectionPoint );\n\n\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\tif ( uvs && uvs[ f ] ) {\n\n\t\t\t\t\t\t\tvar uvs_f = uvs[ f ];\n\t\t\t\t\t\t\tuvA.copy( uvs_f[ 0 ] );\n\t\t\t\t\t\t\tuvB.copy( uvs_f[ 1 ] );\n\t\t\t\t\t\t\tuvC.copy( uvs_f[ 2 ] );\n\n\t\t\t\t\t\t\tintersection.uv = uvIntersection( intersectionPoint, fvA, fvB, fvC, uvA, uvB, uvC );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tintersection.face = face;\n\t\t\t\t\t\tintersection.faceIndex = f;\n\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}() ),\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\n\nexport { Mesh };\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Clock( autoStart ) {\n\n\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\n\n\tthis.startTime = 0;\n\tthis.oldTime = 0;\n\tthis.elapsedTime = 0;\n\n\tthis.running = false;\n\n}\n\nObject.assign( Clock.prototype, {\n\n\tstart: function () {\n\n\t\tthis.startTime = ( typeof performance === 'undefined' ? Date : performance ).now(); // see #10732\n\n\t\tthis.oldTime = this.startTime;\n\t\tthis.elapsedTime = 0;\n\t\tthis.running = true;\n\n\t},\n\n\tstop: function () {\n\n\t\tthis.getElapsedTime();\n\t\tthis.running = false;\n\n\t},\n\n\tgetElapsedTime: function () {\n\n\t\tthis.getDelta();\n\t\treturn this.elapsedTime;\n\n\t},\n\n\tgetDelta: function () {\n\n\t\tvar diff = 0;\n\n\t\tif ( this.autoStart && ! this.running ) {\n\n\t\t\tthis.start();\n\t\t\treturn 0;\n\n\t\t}\n\n\t\tif ( this.running ) {\n\n\t\t\tvar newTime = ( typeof performance === 'undefined' ? Date : performance ).now();\n\n\t\t\tdiff = ( newTime - this.oldTime ) / 1000;\n\t\t\tthis.oldTime = newTime;\n\n\t\t\tthis.elapsedTime += diff;\n\n\t\t}\n\n\t\treturn diff;\n\n\t}\n\n} );\n\n\nexport { Clock };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nimport { Matrix4 } from '../math/Matrix4';\nimport { Quaternion } from '../math/Quaternion';\nimport { Object3D } from '../core/Object3D';\nimport { Vector3 } from '../math/Vector3';\n\nfunction Camera() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Camera';\n\n\tthis.matrixWorldInverse = new Matrix4();\n\tthis.projectionMatrix = new Matrix4();\n\n}\n\nCamera.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Camera,\n\n\tisCamera: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\n\n\t\treturn this;\n\n\t},\n\n\tgetWorldDirection: function () {\n\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function getWorldDirection( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new Vector3();\n\n\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\treturn result.set( 0, 0, - 1 ).applyQuaternion( quaternion );\n\n\t\t};\n\n\t}(),\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n} );\n\nexport { Camera };\n","import { Camera } from './Camera';\nimport { Object3D } from '../core/Object3D';\nimport { _Math } from '../math/Math';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author greggman / http://games.greggman.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author tschw\n */\n\nfunction PerspectiveCamera( fov, aspect, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'PerspectiveCamera';\n\n\tthis.fov = fov !== undefined ? fov : 50;\n\tthis.zoom = 1;\n\n\tthis.near = near !== undefined ? near : 0.1;\n\tthis.far = far !== undefined ? far : 2000;\n\tthis.focus = 10;\n\n\tthis.aspect = aspect !== undefined ? aspect : 1;\n\tthis.view = null;\n\n\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\n\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\n\n\tthis.updateProjectionMatrix();\n\n}\n\nPerspectiveCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: PerspectiveCamera,\n\n\tisPerspectiveCamera: true,\n\n\tcopy: function ( source ) {\n\n\t\tCamera.prototype.copy.call( this, source );\n\n\t\tthis.fov = source.fov;\n\t\tthis.zoom = source.zoom;\n\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\t\tthis.focus = source.focus;\n\n\t\tthis.aspect = source.aspect;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\tthis.filmGauge = source.filmGauge;\n\t\tthis.filmOffset = source.filmOffset;\n\n\t\treturn this;\n\n\t},\n\n\t/**\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\n\t *\n\t * The default film gauge is 35, so that the focal length can be specified for\n\t * a 35mm (full frame) camera.\n\t *\n\t * Values for focal length and film gauge must have the same unit.\n\t */\n\tsetFocalLength: function ( focalLength ) {\n\n\t\t// see http://www.bobatkins.com/photography/technical/field_of_view.html\n\t\tvar vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n\n\t\tthis.fov = _Math.RAD2DEG * 2 * Math.atan( vExtentSlope );\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\t/**\n\t * Calculates the focal length from the current .fov and .filmGauge.\n\t */\n\tgetFocalLength: function () {\n\n\t\tvar vExtentSlope = Math.tan( _Math.DEG2RAD * 0.5 * this.fov );\n\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\n\n\t},\n\n\tgetEffectiveFOV: function () {\n\n\t\treturn _Math.RAD2DEG * 2 * Math.atan(\n\t\t\t\tMath.tan( _Math.DEG2RAD * 0.5 * this.fov ) / this.zoom );\n\n\t},\n\n\tgetFilmWidth: function () {\n\n\t\t// film not completely covered in portrait format (aspect < 1)\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\n\n\t},\n\n\tgetFilmHeight: function () {\n\n\t\t// film not completely covered in landscape format (aspect > 1)\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\n\n\t},\n\n\t/**\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\n\t * multi-monitor/multi-machine setups.\n\t *\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n\t * the monitors are in grid like this\n\t *\n\t *   +---+---+---+\n\t *   | A | B | C |\n\t *   +---+---+---+\n\t *   | D | E | F |\n\t *   +---+---+---+\n\t *\n\t * then for each monitor you would call it like this\n\t *\n\t *   var w = 1920;\n\t *   var h = 1080;\n\t *   var fullWidth = w * 3;\n\t *   var fullHeight = h * 2;\n\t *\n\t *   --A--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n\t *   --B--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n\t *   --C--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n\t *   --D--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n\t *   --E--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n\t *   --F--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n\t *\n\t *   Note there is no reason monitors have to be the same size or in a grid.\n\t */\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.aspect = fullWidth / fullHeight;\n\n\t\tthis.view = {\n\t\t\tfullWidth: fullWidth,\n\t\t\tfullHeight: fullHeight,\n\t\t\toffsetX: x,\n\t\t\toffsetY: y,\n\t\t\twidth: width,\n\t\t\theight: height\n\t\t};\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tthis.view = null;\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tvar near = this.near,\n\t\t\ttop = near * Math.tan(\n\t\t\t\t\t_Math.DEG2RAD * 0.5 * this.fov ) / this.zoom,\n\t\t\theight = 2 * top,\n\t\t\twidth = this.aspect * height,\n\t\t\tleft = - 0.5 * width,\n\t\t\tview = this.view;\n\n\t\tif ( view !== null ) {\n\n\t\t\tvar fullWidth = view.fullWidth,\n\t\t\t\tfullHeight = view.fullHeight;\n\n\t\t\tleft += view.offsetX * width / fullWidth;\n\t\t\ttop -= view.offsetY * height / fullHeight;\n\t\t\twidth *= view.width / fullWidth;\n\t\t\theight *= view.height / fullHeight;\n\n\t\t}\n\n\t\tvar skew = this.filmOffset;\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\n\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.fov = this.fov;\n\t\tdata.object.zoom = this.zoom;\n\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\t\tdata.object.focus = this.focus;\n\n\t\tdata.object.aspect = this.aspect;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\tdata.object.filmGauge = this.filmGauge;\n\t\tdata.object.filmOffset = this.filmOffset;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { PerspectiveCamera };\n","import { EventDispatcher } from '../core/EventDispatcher';\nimport { UVMapping } from '../constants';\nimport { MirroredRepeatWrapping, ClampToEdgeWrapping, RepeatWrapping, LinearEncoding, UnsignedByteType, RGBAFormat, LinearMipMapLinearFilter, LinearFilter } from '../constants';\nimport { _Math } from '../math/Math';\nimport { Vector2 } from '../math/Vector2';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nvar textureId = 0;\n\nfunction Texture( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\tObject.defineProperty( this, 'id', { value: textureId ++ } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\n\tthis.image = image !== undefined ? image : Texture.DEFAULT_IMAGE;\n\tthis.mipmaps = [];\n\n\tthis.mapping = mapping !== undefined ? mapping : Texture.DEFAULT_MAPPING;\n\n\tthis.wrapS = wrapS !== undefined ? wrapS : ClampToEdgeWrapping;\n\tthis.wrapT = wrapT !== undefined ? wrapT : ClampToEdgeWrapping;\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearMipMapLinearFilter;\n\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\n\n\tthis.format = format !== undefined ? format : RGBAFormat;\n\tthis.type = type !== undefined ? type : UnsignedByteType;\n\n\tthis.offset = new Vector2( 0, 0 );\n\tthis.repeat = new Vector2( 1, 1 );\n\n\tthis.generateMipmaps = true;\n\tthis.premultiplyAlpha = false;\n\tthis.flipY = true;\n\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n\t//\n\t// Also changing the encoding after already used by a Material will not automatically make the Material\n\t// update.  You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\tthis.encoding = encoding !== undefined ? encoding : LinearEncoding;\n\n\tthis.version = 0;\n\tthis.onUpdate = null;\n\n}\n\nTexture.DEFAULT_IMAGE = undefined;\nTexture.DEFAULT_MAPPING = UVMapping;\n\nObject.defineProperty( Texture.prototype, \"needsUpdate\", {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( Texture.prototype, EventDispatcher.prototype, {\n\n\tconstructor: Texture,\n\n\tisTexture: true,\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.image = source.image;\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\tthis.mapping = source.mapping;\n\n\t\tthis.wrapS = source.wrapS;\n\t\tthis.wrapT = source.wrapT;\n\n\t\tthis.magFilter = source.magFilter;\n\t\tthis.minFilter = source.minFilter;\n\n\t\tthis.anisotropy = source.anisotropy;\n\n\t\tthis.format = source.format;\n\t\tthis.type = source.type;\n\n\t\tthis.offset.copy( source.offset );\n\t\tthis.repeat.copy( source.repeat );\n\n\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\tthis.flipY = source.flipY;\n\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\tthis.encoding = source.encoding;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tif ( meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t}\n\n\t\tfunction getDataURL( image ) {\n\n\t\t\tvar canvas;\n\n\t\t\tif ( image.toDataURL !== undefined ) {\n\n\t\t\t\tcanvas = image;\n\n\t\t\t} else {\n\n\t\t\t\tcanvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\t\t\tcanvas.width = image.width;\n\t\t\t\tcanvas.height = image.height;\n\n\t\t\t\tcanvas.getContext( '2d' ).drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t}\n\n\t\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t\t} else {\n\n\t\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar output = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Texture',\n\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t},\n\n\t\t\tuuid: this.uuid,\n\t\t\tname: this.name,\n\n\t\t\tmapping: this.mapping,\n\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\tminFilter: this.minFilter,\n\t\t\tmagFilter: this.magFilter,\n\t\t\tanisotropy: this.anisotropy,\n\n\t\t\tflipY: this.flipY\n\t\t};\n\n\t\tif ( this.image !== undefined ) {\n\n\t\t\t// TODO: Move to THREE.Image\n\n\t\t\tvar image = this.image;\n\n\t\t\tif ( image.uuid === undefined ) {\n\n\t\t\t\timage.uuid = _Math.generateUUID(); // UGH\n\n\t\t\t}\n\n\t\t\tif ( meta.images[ image.uuid ] === undefined ) {\n\n\t\t\t\tmeta.images[ image.uuid ] = {\n\t\t\t\t\tuuid: image.uuid,\n\t\t\t\t\turl: getDataURL( image )\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\toutput.image = image.uuid;\n\n\t\t}\n\n\t\tmeta.textures[ this.uuid ] = output;\n\n\t\treturn output;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t},\n\n\ttransformUv: function ( uv ) {\n\n\t\tif ( this.mapping !== UVMapping ) return;\n\n\t\tuv.multiply( this.repeat );\n\t\tuv.add( this.offset );\n\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.flipY ) {\n\n\t\t\tuv.y = 1 - uv.y;\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { Texture };\n","import { EventDispatcher } from '../core/EventDispatcher';\nimport { Texture } from '../textures/Texture';\nimport { LinearFilter } from '../constants';\nimport { Vector4 } from '../math/Vector4';\nimport { _Math } from '../math/Math';\n\n/**\n * @author szimek / https://github.com/szimek/\n * @author alteredq / http://alteredqualia.com/\n * @author Marius Kintel / https://github.com/kintel\n */\n\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\nfunction WebGLRenderTarget( width, height, options ) {\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.width = width;\n\tthis.height = height;\n\n\tthis.scissor = new Vector4( 0, 0, width, height );\n\tthis.scissorTest = false;\n\n\tthis.viewport = new Vector4( 0, 0, width, height );\n\n\toptions = options || {};\n\n\tif ( options.minFilter === undefined ) options.minFilter = LinearFilter;\n\n\tthis.texture = new Texture( undefined, undefined, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\n\tthis.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n\n}\n\nObject.assign( WebGLRenderTarget.prototype, EventDispatcher.prototype, {\n\n\tisWebGLRenderTarget: true,\n\n\tsetSize: function ( width, height ) {\n\n\t\tif ( this.width !== width || this.height !== height ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.texture = source.texture.clone();\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\t\tthis.depthTexture = source.depthTexture;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { WebGLRenderTarget };\n","import { Object3D } from '../core/Object3D';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Scene () {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Scene';\n\n\tthis.background = null;\n\tthis.fog = null;\n\tthis.overrideMaterial = null;\n\n\tthis.autoUpdate = true; // checked by the renderer\n\n}\n\nScene.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Scene,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tif ( source.background !== null ) this.background = source.background.clone();\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tif ( this.background !== null ) data.object.background = this.background.toJSON( meta );\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\n\nexport { Scene };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LoadingManager( onLoad, onProgress, onError ) {\n\n\tvar scope = this;\n\n\tvar isLoading = false, itemsLoaded = 0, itemsTotal = 0;\n\n\tthis.onStart = undefined;\n\tthis.onLoad = onLoad;\n\tthis.onProgress = onProgress;\n\tthis.onError = onError;\n\n\tthis.itemStart = function ( url ) {\n\n\t\titemsTotal ++;\n\n\t\tif ( isLoading === false ) {\n\n\t\t\tif ( scope.onStart !== undefined ) {\n\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tisLoading = true;\n\n\t};\n\n\tthis.itemEnd = function ( url ) {\n\n\t\titemsLoaded ++;\n\n\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\n\n\t\t}\n\n\t\tif ( itemsLoaded === itemsTotal ) {\n\n\t\t\tisLoading = false;\n\n\t\t\tif ( scope.onLoad !== undefined ) {\n\n\t\t\t\tscope.onLoad();\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.itemError = function ( url ) {\n\n\t\tif ( scope.onError !== undefined ) {\n\n\t\t\tscope.onError( url );\n\n\t\t}\n\n\t};\n\n}\n\nvar DefaultLoadingManager = new LoadingManager();\n\n\nexport { DefaultLoadingManager, LoadingManager };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Cache } from './Cache';\nimport { DefaultLoadingManager } from './LoadingManager';\n\n\nfunction ImageLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( ImageLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\tvar scope = this;\n\n\t\tvar cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tvar image = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\n\n\t\timage.addEventListener( 'load', function () {\n\n\t\t\tCache.add( url, this );\n\n\t\t\tif ( onLoad ) onLoad( this );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}, false );\n\n\t\t/*\n\t\timage.addEventListener( 'progress', function ( event ) {\n\n\t\t\tif ( onProgress ) onProgress( event );\n\n\t\t}, false );\n\t\t*/\n\n\t\timage.addEventListener( 'error', function ( event ) {\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t\tscope.manager.itemEnd( url );\n\t\t\tscope.manager.itemError( url );\n\n\t\t}, false );\n\n\t\tif ( url.substr( 0, 5 ) !== 'data:' ) {\n\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\timage.src = url;\n\n\t\treturn image;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { ImageLoader };\n","import { Texture } from './Texture';\nimport { CubeReflectionMapping } from '../constants';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction CubeTexture( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\timages = images !== undefined ? images : [];\n\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\n\n\tTexture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.flipY = false;\n\n}\n\nCubeTexture.prototype = Object.create( Texture.prototype );\nCubeTexture.prototype.constructor = CubeTexture;\n\nCubeTexture.prototype.isCubeTexture = true;\n\nObject.defineProperty( CubeTexture.prototype, 'images', {\n\n\tget: function () {\n\n\t\treturn this.image;\n\n\t},\n\n\tset: function ( value ) {\n\n\t\tthis.image = value;\n\n\t}\n\n} );\n\n\nexport { CubeTexture };\n","import { ImageLoader } from './ImageLoader';\nimport { CubeTexture } from '../textures/CubeTexture';\nimport { DefaultLoadingManager } from './LoadingManager';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction CubeTextureLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( CubeTextureLoader.prototype, {\n\n\tload: function ( urls, onLoad, onProgress, onError ) {\n\n\t\tvar texture = new CubeTexture();\n\n\t\tvar loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tvar loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( urls[ i ], function ( image ) {\n\n\t\t\t\ttexture.images[ i ] = image;\n\n\t\t\t\tloaded ++;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, undefined, onError );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < urls.length; ++ i ) {\n\n\t\t\tloadTexture( i );\n\n\t\t}\n\n\t\treturn texture;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { CubeTextureLoader };\n","import { Material } from './Material';\nimport { MultiplyOperation } from '../constants';\nimport { Vector2 } from '../math/Vector2';\nimport { Color } from '../math/Color';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  specular: <hex>,\n *  shininess: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshPhongMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshPhongMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\tthis.specular = new Color( 0x111111 );\n\tthis.shininess = 30;\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshPhongMaterial.prototype = Object.create( Material.prototype );\nMeshPhongMaterial.prototype.constructor = MeshPhongMaterial;\n\nMeshPhongMaterial.prototype.isMeshPhongMaterial = true;\n\nMeshPhongMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\tthis.specular.copy( source.specular );\n\tthis.shininess = source.shininess;\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshPhongMaterial };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry';\nimport { BufferGeometry } from '../core/BufferGeometry';\nimport { Float32BufferAttribute } from '../core/BufferAttribute';\n\n// PlaneGeometry\n\nfunction PlaneGeometry( width, height, widthSegments, heightSegments ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'PlaneGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\tthis.fromBufferGeometry( new PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\n\tthis.mergeVertices();\n\n}\n\nPlaneGeometry.prototype = Object.create( Geometry.prototype );\nPlaneGeometry.prototype.constructor = PlaneGeometry;\n\n// PlaneBufferGeometry\n\nfunction PlaneBufferGeometry( width, height, widthSegments, heightSegments ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'PlaneBufferGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\tvar width_half = width / 2;\n\tvar height_half = height / 2;\n\n\tvar gridX = Math.floor( widthSegments ) || 1;\n\tvar gridY = Math.floor( heightSegments ) || 1;\n\n\tvar gridX1 = gridX + 1;\n\tvar gridY1 = gridY + 1;\n\n\tvar segment_width = width / gridX;\n\tvar segment_height = height / gridY;\n\n\tvar ix, iy;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// generate vertices, normals and uvs\n\n\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\tvar y = iy * segment_height - height_half;\n\n\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\tvar x = ix * segment_width - width_half;\n\n\t\t\tvertices.push( x, - y, 0 );\n\n\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\tuvs.push( ix / gridX );\n\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t}\n\n\t}\n\n\t// indices\n\n\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\tvar a = ix + gridX1 * iy;\n\t\t\tvar b = ix + gridX1 * ( iy + 1 );\n\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nPlaneBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nPlaneBufferGeometry.prototype.constructor = PlaneBufferGeometry;\n\n\nexport { PlaneGeometry, PlaneBufferGeometry };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry';\nimport { BufferGeometry } from '../core/BufferGeometry';\nimport { Float32BufferAttribute } from '../core/BufferAttribute';\nimport { Vector3 } from '../math/Vector3';\n\n// BoxGeometry\n\nfunction BoxGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'BoxGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\tdepth: depth,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tdepthSegments: depthSegments\n\t};\n\n\tthis.fromBufferGeometry( new BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) );\n\tthis.mergeVertices();\n\n}\n\nBoxGeometry.prototype = Object.create( Geometry.prototype );\nBoxGeometry.prototype.constructor = BoxGeometry;\n\n// BoxBufferGeometry\n\nfunction BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'BoxBufferGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\tdepth: depth,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tdepthSegments: depthSegments\n\t};\n\n\tvar scope = this;\n\n\t// segments\n\n\twidthSegments = Math.floor( widthSegments ) || 1;\n\theightSegments = Math.floor( heightSegments ) || 1;\n\tdepthSegments = Math.floor( depthSegments ) || 1;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar numberOfVertices = 0;\n\tvar groupStart = 0;\n\n\t// build each side of the box geometry\n\n\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height,   width,  depthSegments, heightSegments, 0 ); // px\n\tbuildPlane( 'z', 'y', 'x',   1, - 1, depth, height, - width,  depthSegments, heightSegments, 1 ); // nx\n\tbuildPlane( 'x', 'z', 'y',   1,   1, width, depth,    height, widthSegments, depthSegments,  2 ); // py\n\tbuildPlane( 'x', 'z', 'y',   1, - 1, width, depth,  - height, widthSegments, depthSegments,  3 ); // ny\n\tbuildPlane( 'x', 'y', 'z',   1, - 1, width, height,   depth,  widthSegments, heightSegments, 4 ); // pz\n\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth,  widthSegments, heightSegments, 5 ); // nz\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\n\n\t\tvar segmentWidth = width / gridX;\n\t\tvar segmentHeight = height / gridY;\n\n\t\tvar widthHalf = width / 2;\n\t\tvar heightHalf = height / 2;\n\t\tvar depthHalf = depth / 2;\n\n\t\tvar gridX1 = gridX + 1;\n\t\tvar gridY1 = gridY + 1;\n\n\t\tvar vertexCounter = 0;\n\t\tvar groupCount = 0;\n\n\t\tvar ix, iy;\n\n\t\tvar vector = new Vector3();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\tvar y = iy * segmentHeight - heightHalf;\n\n\t\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\tvar x = ix * segmentWidth - widthHalf;\n\n\t\t\t\t// set values to correct vector component\n\n\t\t\t\tvector[ u ] = x * udir;\n\t\t\t\tvector[ v ] = y * vdir;\n\t\t\t\tvector[ w ] = depthHalf;\n\n\t\t\t\t// now apply vector to vertex buffer\n\n\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t// set values to correct vector component\n\n\t\t\t\tvector[ u ] = 0;\n\t\t\t\tvector[ v ] = 0;\n\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\n\n\t\t\t\t// now apply vector to normal buffer\n\n\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t// uvs\n\n\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t\t// counters\n\n\t\t\t\tvertexCounter += 1;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// indices\n\n\t\t// 1. you need three indices to draw a single face\n\t\t// 2. a single segment consists of two faces\n\t\t// 3. so we need to generate six (2*3) indices per segment\n\n\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\tvar a = numberOfVertices + ix + gridX1 * iy;\n\t\t\t\tvar b = numberOfVertices + ix + gridX1 * ( iy + 1 );\n\t\t\t\tvar c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\tvar d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t// increase counter\n\n\t\t\t\tgroupCount += 6;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\tscope.addGroup( groupStart, groupCount, materialIndex );\n\n\t\t// calculate new start value for groups\n\n\t\tgroupStart += groupCount;\n\n\t\t// update total number of vertices\n\n\t\tnumberOfVertices += vertexCounter;\n\n\t}\n\n}\n\nBoxBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nBoxBufferGeometry.prototype.constructor = BoxBufferGeometry;\n\n\nexport { BoxGeometry, BoxBufferGeometry };\n","import { Object3D } from '../core/Object3D';\nimport { Color } from '../math/Color';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Light( color, intensity ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Light';\n\n\tthis.color = new Color( color );\n\tthis.intensity = intensity !== undefined ? intensity : 1;\n\n\tthis.receiveShadow = undefined;\n\n}\n\nLight.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Light,\n\n\tisLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.intensity = source.intensity;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.color = this.color.getHex();\n\t\tdata.object.intensity = this.intensity;\n\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\n\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\n\n\t\tif ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { Light };\n","import { Matrix4 } from '../math/Matrix4';\nimport { Vector2 } from '../math/Vector2';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LightShadow( camera ) {\n\n\tthis.camera = camera;\n\n\tthis.bias = 0;\n\tthis.radius = 1;\n\n\tthis.mapSize = new Vector2( 512, 512 );\n\n\tthis.map = null;\n\tthis.matrix = new Matrix4();\n\n}\n\nObject.assign( LightShadow.prototype, {\n\n\tcopy: function ( source ) {\n\n\t\tthis.camera = source.camera.clone();\n\n\t\tthis.bias = source.bias;\n\t\tthis.radius = source.radius;\n\n\t\tthis.mapSize.copy( source.mapSize );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar object = {};\n\n\t\tif ( this.bias !== 0 ) object.bias = this.bias;\n\t\tif ( this.radius !== 1 ) object.radius = this.radius;\n\t\tif ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\n\n\t\tobject.camera = this.camera.toJSON( false ).object;\n\t\tdelete object.camera.matrix;\n\n\t\treturn object;\n\n\t}\n\n} );\n\n\nexport { LightShadow };\n","import { LightShadow } from './LightShadow';\nimport { _Math } from '../math/Math';\nimport { PerspectiveCamera } from '../cameras/PerspectiveCamera';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction SpotLightShadow() {\n\n\tLightShadow.call( this, new PerspectiveCamera( 50, 1, 0.5, 500 ) );\n\n}\n\nSpotLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: SpotLightShadow,\n\n\tisSpotLightShadow: true,\n\n\tupdate: function ( light ) {\n\n\t\tvar camera = this.camera;\n\n\t\tvar fov = _Math.RAD2DEG * 2 * light.angle;\n\t\tvar aspect = this.mapSize.width / this.mapSize.height;\n\t\tvar far = light.distance || camera.far;\n\n\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\n\n\t\t\tcamera.fov = fov;\n\t\t\tcamera.aspect = aspect;\n\t\t\tcamera.far = far;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { SpotLightShadow };\n","import { Light } from './Light';\nimport { SpotLightShadow } from './SpotLightShadow';\nimport { Object3D } from '../core/Object3D';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction SpotLight( color, intensity, distance, angle, penumbra, decay ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'SpotLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.target = new Object3D();\n\n\tObject.defineProperty( this, 'power', {\n\t\tget: function () {\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (17) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\n\t\t\treturn this.intensity * Math.PI;\n\t\t},\n\t\tset: function ( power ) {\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (17) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\n\t\t\tthis.intensity = power / Math.PI;\n\t\t}\n\t} );\n\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\n\tthis.penumbra = ( penumbra !== undefined ) ? penumbra : 0;\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\n\n\tthis.shadow = new SpotLightShadow();\n\n}\n\nSpotLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: SpotLight,\n\n\tisSpotLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.angle = source.angle;\n\t\tthis.penumbra = source.penumbra;\n\t\tthis.decay = source.decay;\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { SpotLight };\n","import { Light } from './Light';\nimport { PerspectiveCamera } from '../cameras/PerspectiveCamera';\nimport { LightShadow } from './LightShadow';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction PointLight( color, intensity, distance, decay ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'PointLight';\n\n\tObject.defineProperty( this, 'power', {\n\t\tget: function () {\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (15) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\n\t\t\treturn this.intensity * 4 * Math.PI;\n\n\t\t},\n\t\tset: function ( power ) {\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (15) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\n\t\t\tthis.intensity = power / ( 4 * Math.PI );\n\t\t}\n\t} );\n\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\n\n\tthis.shadow = new LightShadow( new PerspectiveCamera( 90, 1, 0.5, 500 ) );\n\n}\n\nPointLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: PointLight,\n\n\tisPointLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.decay = source.decay;\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { PointLight };\n","import { Camera } from './Camera';\nimport { Object3D } from '../core/Object3D';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author arose / http://github.com/arose\n */\n\nfunction OrthographicCamera( left, right, top, bottom, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'OrthographicCamera';\n\n\tthis.zoom = 1;\n\tthis.view = null;\n\n\tthis.left = left;\n\tthis.right = right;\n\tthis.top = top;\n\tthis.bottom = bottom;\n\n\tthis.near = ( near !== undefined ) ? near : 0.1;\n\tthis.far = ( far !== undefined ) ? far : 2000;\n\n\tthis.updateProjectionMatrix();\n\n}\n\nOrthographicCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: OrthographicCamera,\n\n\tisOrthographicCamera: true,\n\n\tcopy: function ( source ) {\n\n\t\tCamera.prototype.copy.call( this, source );\n\n\t\tthis.left = source.left;\n\t\tthis.right = source.right;\n\t\tthis.top = source.top;\n\t\tthis.bottom = source.bottom;\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\n\t\tthis.zoom = source.zoom;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\treturn this;\n\n\t},\n\n\tsetViewOffset: function( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.view = {\n\t\t\tfullWidth: fullWidth,\n\t\t\tfullHeight: fullHeight,\n\t\t\toffsetX: x,\n\t\t\toffsetY: y,\n\t\t\twidth: width,\n\t\t\theight: height\n\t\t};\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function() {\n\n\t\tthis.view = null;\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\t\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\t\tvar cx = ( this.right + this.left ) / 2;\n\t\tvar cy = ( this.top + this.bottom ) / 2;\n\n\t\tvar left = cx - dx;\n\t\tvar right = cx + dx;\n\t\tvar top = cy + dy;\n\t\tvar bottom = cy - dy;\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tvar zoomW = this.zoom / ( this.view.width / this.view.fullWidth );\n\t\t\tvar zoomH = this.zoom / ( this.view.height / this.view.fullHeight );\n\t\t\tvar scaleW = ( this.right - this.left ) / this.view.width;\n\t\t\tvar scaleH = ( this.top - this.bottom ) / this.view.height;\n\n\t\t\tleft += scaleW * ( this.view.offsetX / zoomW );\n\t\t\tright = left + scaleW * ( this.view.width / zoomW );\n\t\t\ttop -= scaleH * ( this.view.offsetY / zoomH );\n\t\t\tbottom = top - scaleH * ( this.view.height / zoomH );\n\n\t\t}\n\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.zoom = this.zoom;\n\t\tdata.object.left = this.left;\n\t\tdata.object.right = this.right;\n\t\tdata.object.top = this.top;\n\t\tdata.object.bottom = this.bottom;\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { OrthographicCamera };\n","import { LightShadow } from './LightShadow';\nimport { OrthographicCamera } from '../cameras/OrthographicCamera';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction DirectionalLightShadow( ) {\n\n\tLightShadow.call( this, new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\n\n}\n\nDirectionalLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: DirectionalLightShadow\n\n} );\n\n\nexport { DirectionalLightShadow };\n","import { Light } from './Light';\nimport { DirectionalLightShadow } from './DirectionalLightShadow';\nimport { Object3D } from '../core/Object3D';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction DirectionalLight( color, intensity ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'DirectionalLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.target = new Object3D();\n\n\tthis.shadow = new DirectionalLightShadow();\n\n}\n\nDirectionalLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: DirectionalLight,\n\n\tisDirectionalLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { DirectionalLight };\n","import { Light } from './Light';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction AmbientLight( color, intensity ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'AmbientLight';\n\n\tthis.castShadow = undefined;\n\n}\n\nAmbientLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: AmbientLight,\n\n\tisAmbientLight: true\n\n} );\n\n\nexport { AmbientLight };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Cache } from './Cache';\nimport { DefaultLoadingManager } from './LoadingManager';\n\nfunction FileLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( FileLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\tvar scope = this;\n\n\t\tvar cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\t// Check for data: URI\n\t\tvar dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/;\n\t\tvar dataUriRegexResult = url.match( dataUriRegex );\n\n\t\t// Safari can not handle Data URIs through XMLHttpRequest so process manually\n\t\tif ( dataUriRegexResult ) {\n\n\t\t\tvar mimeType = dataUriRegexResult[ 1 ];\n\t\t\tvar isBase64 = !! dataUriRegexResult[ 2 ];\n\t\t\tvar data = dataUriRegexResult[ 3 ];\n\n\t\t\tdata = window.decodeURIComponent( data );\n\n\t\t\tif ( isBase64 ) data = window.atob( data );\n\n\t\t\ttry {\n\n\t\t\t\tvar response;\n\t\t\t\tvar responseType = ( this.responseType || '' ).toLowerCase();\n\n\t\t\t\tswitch ( responseType ) {\n\n\t\t\t\t\tcase 'arraybuffer':\n\t\t\t\t\tcase 'blob':\n\n\t\t\t\t\t \tresponse = new ArrayBuffer( data.length );\n\n\t\t\t\t\t\tvar view = new Uint8Array( response );\n\n\t\t\t\t\t\tfor ( var i = 0; i < data.length; i ++ ) {\n\n\t\t\t\t\t\t\tview[ i ] = data.charCodeAt( i );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( responseType === 'blob' ) {\n\n\t\t\t\t\t\t\tresponse = new Blob( [ response ], { type: mimeType } );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'document':\n\n\t\t\t\t\t\tvar parser = new DOMParser();\n\t\t\t\t\t\tresponse = parser.parseFromString( data, mimeType );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'json':\n\n\t\t\t\t\t\tresponse = JSON.parse( data );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault: // 'text' or other\n\n\t\t\t\t\t\tresponse = data;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\t// Wait for next browser tick\n\t\t\t\twindow.setTimeout( function () {\n\n\t\t\t\t\tif ( onLoad ) onLoad( response );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\t// Wait for next browser tick\n\t\t\t\twindow.setTimeout( function () {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\t\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar request = new XMLHttpRequest();\n\t\t\trequest.open( 'GET', url, true );\n\n\t\t\trequest.addEventListener( 'load', function ( event ) {\n\n\t\t\t\tvar response = event.target.response;\n\n\t\t\t\tCache.add( url, response );\n\n\t\t\t\tif ( this.status === 200 ) {\n\n\t\t\t\t\tif ( onLoad ) onLoad( response );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t} else if ( this.status === 0 ) {\n\n\t\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\n\t\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\n\n\t\t\t\t\tconsole.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\n\n\t\t\t\t\tif ( onLoad ) onLoad( response );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( onError ) onError( event );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\t\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t\t}\n\n\t\t\t}, false );\n\n\t\t\tif ( onProgress !== undefined ) {\n\n\t\t\t\trequest.addEventListener( 'progress', function ( event ) {\n\n\t\t\t\t\tonProgress( event );\n\n\t\t\t\t}, false );\n\n\t\t\t}\n\n\t\t\trequest.addEventListener( 'error', function ( event ) {\n\n\t\t\t\tif ( onError ) onError( event );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}, false );\n\n\t\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\n\t\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\n\n\t\t\tif ( request.overrideMimeType ) request.overrideMimeType( this.mimeType !== undefined ? this.mimeType : 'text/plain' );\n\n\t\t\tfor ( var header in this.requestHeader ) {\n\n\t\t\t\trequest.setRequestHeader( header, this.requestHeader[ header ] );\n\n\t\t\t}\n\n\t\t\trequest.send( null );\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\treturn request;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t},\n\n\tsetResponseType: function ( value ) {\n\n\t\tthis.responseType = value;\n\t\treturn this;\n\n\t},\n\n\tsetWithCredentials: function ( value ) {\n\n\t\tthis.withCredentials = value;\n\t\treturn this;\n\n\t},\n\n\tsetMimeType: function ( value ) {\n\n\t\tthis.mimeType = value;\n\t\treturn this;\n\n\t},\n\n\tsetRequestHeader: function ( value ) {\n\n\t\tthis.requestHeader = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { FileLoader };\n","import { Material } from './Material';\nimport { MultiplyOperation } from '../constants';\nimport { Color } from '../math/Color';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshLambertMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshLambertMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshLambertMaterial.prototype = Object.create( Material.prototype );\nMeshLambertMaterial.prototype.constructor = MeshLambertMaterial;\n\nMeshLambertMaterial.prototype.isMeshLambertMaterial = true;\n\nMeshLambertMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshLambertMaterial };\n","import { Material } from './Material';\nimport { Color } from '../math/Color';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *  linecap: \"round\",\n *  linejoin: \"round\"\n * }\n */\n\nfunction LineBasicMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'LineBasicMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.linewidth = 1;\n\tthis.linecap = 'round';\n\tthis.linejoin = 'round';\n\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nLineBasicMaterial.prototype = Object.create( Material.prototype );\nLineBasicMaterial.prototype.constructor = LineBasicMaterial;\n\nLineBasicMaterial.prototype.isLineBasicMaterial = true;\n\nLineBasicMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.linewidth = source.linewidth;\n\tthis.linecap = source.linecap;\n\tthis.linejoin = source.linejoin;\n\n\treturn this;\n\n};\n\n\nexport { LineBasicMaterial };\n","import { Sphere } from '../math/Sphere';\nimport { Ray } from '../math/Ray';\nimport { Matrix4 } from '../math/Matrix4';\nimport { Object3D } from '../core/Object3D';\nimport { Vector3 } from '../math/Vector3';\nimport { LineBasicMaterial } from '../materials/LineBasicMaterial';\nimport { BufferGeometry } from '../core/BufferGeometry';\nimport { LineSegments } from './LineSegments';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Line( geometry, material, mode ) {\n\n\tif ( mode === 1 ) {\n\n\t\tconsole.warn( 'THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.' );\n\t\treturn new LineSegments( geometry, material );\n\n\t}\n\n\tObject3D.call( this );\n\n\tthis.type = 'Line';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new LineBasicMaterial( { color: Math.random() * 0xffffff } );\n\n}\n\nLine.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Line,\n\n\tisLine: true,\n\n\traycast: ( function () {\n\n\t\tvar inverseMatrix = new Matrix4();\n\t\tvar ray = new Ray();\n\t\tvar sphere = new Sphere();\n\n\t\treturn function raycast( raycaster, intersects ) {\n\n\t\t\tvar precision = raycaster.linePrecision;\n\t\t\tvar precisionSq = precision * precision;\n\n\t\t\tvar geometry = this.geometry;\n\t\t\tvar matrixWorld = this.matrixWorld;\n\n\t\t\t// Checking boundingSphere distance to ray\n\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t\tsphere.copy( geometry.boundingSphere );\n\t\t\tsphere.applyMatrix4( matrixWorld );\n\n\t\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\n\n\t\t\t//\n\n\t\t\tinverseMatrix.getInverse( matrixWorld );\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\t\tvar vStart = new Vector3();\n\t\t\tvar vEnd = new Vector3();\n\t\t\tvar interSegment = new Vector3();\n\t\t\tvar interRay = new Vector3();\n\t\t\tvar step = (this && this.isLineSegments) ? 2 : 1;\n\n\t\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t\tvar index = geometry.index;\n\t\t\t\tvar attributes = geometry.attributes;\n\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\tif ( index !== null ) {\n\n\t\t\t\t\tvar indices = index.array;\n\n\t\t\t\t\tfor ( var i = 0, l = indices.length - 1; i < l; i += step ) {\n\n\t\t\t\t\t\tvar a = indices[ i ];\n\t\t\t\t\t\tvar b = indices[ i + 1 ];\n\n\t\t\t\t\t\tvStart.fromArray( positions, a * 3 );\n\t\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\n\n\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\t\tface: null,\n\t\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( var i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\n\n\t\t\t\t\t\tvStart.fromArray( positions, 3 * i );\n\t\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\n\n\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\t\tface: null,\n\t\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\t\tvar vertices = geometry.vertices;\n\t\t\t\tvar nbVertices = vertices.length;\n\n\t\t\t\tfor ( var i = 0; i < nbVertices - 1; i += step ) {\n\n\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\n\n\t\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}() ),\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\n\nexport { Line };\n","import { Line } from './Line';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LineSegments( geometry, material ) {\n\n\tLine.call( this, geometry, material );\n\n\tthis.type = 'LineSegments';\n\n}\n\nLineSegments.prototype = Object.assign( Object.create( Line.prototype ), {\n\n\tconstructor: LineSegments,\n\n\tisLineSegments: true\n\n} );\n\n\nexport { LineSegments };\n","import { Object3D } from '../core/Object3D';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Group() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Group';\n\n}\n\nGroup.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Group\n\n} );\n\n\nexport { Group };\n","import * as THREE from './../../node_modules/three/src/constants';\r\nimport { FileLoader } from './../../node_modules/three/src/loaders/FileLoader';\r\nimport { DefaultLoadingManager } from './../../node_modules/three/src/loaders/LoadingManager';\r\nimport {MeshPhongMaterial} from './../../node_modules/three/src/materials/MeshPhongMaterial';\r\nimport {MeshLambertMaterial} from './../../node_modules/three/src/materials/MeshLambertMaterial';\r\nimport {MeshBasicMaterial} from './../../node_modules/three/src/materials/MeshBasicMaterial';\r\nimport {LineBasicMaterial} from './../../node_modules/three/src/materials/LineBasicMaterial';\r\nimport {Texture} from './../../node_modules/three/src/textures/Texture';\r\nimport {PerspectiveCamera} from './../../node_modules/three/src/cameras/PerspectiveCamera';\r\nimport {OrthographicCamera} from './../../node_modules/three/src/cameras/OrthographicCamera';\r\nimport { Color } from './../../node_modules/three/src/math/Color';\r\nimport { SpotLight } from './../../node_modules/three/src/lights/SpotLight';\r\nimport { PointLight } from './../../node_modules/three/src/lights/PointLight';\r\nimport { DirectionalLight } from './../../node_modules/three/src/lights/DirectionalLight';\r\nimport { AmbientLight } from './../../node_modules/three/src/lights/AmbientLight';\r\nimport { BufferGeometry } from './../../node_modules/three/src/core/BufferGeometry';\r\nimport { LineSegments } from './../../node_modules/three/src/objects/LineSegments';\r\nimport { Line } from './../../node_modules/three/src/objects/Line';\r\nimport { Mesh } from './../../node_modules/three/src/objects/Mesh';\r\nimport { Float32BufferAttribute } from './../../node_modules/three/src/core/BufferAttribute';\r\nimport { Matrix4 } from './../../node_modules/three/src/math/Matrix4';\r\nimport { Vector3 } from './../../node_modules/three/src/math/Vector3';\r\nimport { _Math } from './../../node_modules/three/src/math/Math';\r\nimport { Group } from './../../node_modules/three/src/objects/Group';\r\nimport {Scene} from './../../node_modules/three/src/scenes/Scene';\r\n\r\nfunction ColladaLoader( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n};\r\n\r\nColladaLoader.prototype = {\r\n\r\n\tconstructor: ColladaLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new FileLoader( scope.manager );\r\n\t\t\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( text,url) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\toptions: {\r\n\r\n\t\tset convertUpAxis( value ) {\r\n\r\n\t\t\tconsole.log( 'ColladaLoder.options.convertUpAxis: TODO' );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tparse: function ( text, url ) {\r\n\r\n\t\tvar base = \"\";\r\n\t\tvar slIndex = url.lastIndexOf(\"/\");\r\n\t\tif(slIndex > 1) base = url.substr(0,slIndex);\r\n\t\tfunction getElementsByTagName( xml, name ) {\r\n\r\n\t\t\t// Non recursive xml.getElementsByTagName() ...\r\n\r\n\t\t\tvar array = [];\r\n\t\t\tvar childNodes = xml.childNodes;\r\n\r\n\t\t\tfor ( var i = 0, l = childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeName === name ) {\r\n\r\n\t\t\t\t\tarray.push( child );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseFloats( text ) {\r\n\r\n\t\t\tif ( text.length === 0 ) return [];\r\n\r\n\t\t\tvar parts = text.trim().split( /\\s+/ );\r\n\t\t\tvar array = new Array( parts.length );\r\n\r\n\t\t\tfor ( var i = 0, l = parts.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ] = parseFloat( parts[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseInts( text ) {\r\n\r\n\t\t\tif ( text.length === 0 ) return [];\r\n\r\n\t\t\tvar parts = text.trim().split( /\\s+/ );\r\n\t\t\tvar array = new Array( parts.length );\r\n\r\n\t\t\tfor ( var i = 0, l = parts.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ] = parseInt( parts[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseId( text ) {\r\n\r\n\t\t\treturn text.substring( 1 );\r\n\r\n\t\t}\r\n\r\n\t\t// asset\r\n\r\n\t\tfunction parseAsset( xml ) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tunit: parseAssetUnit( getElementsByTagName( xml, 'unit' )[ 0 ] ),\r\n\t\t\t\tupAxis: parseAssetUpAxis( getElementsByTagName( xml, 'up_axis' )[ 0 ] )\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseAssetUnit( xml ) {\r\n\r\n\t\t\treturn xml !== undefined ? parseFloat( xml.getAttribute( 'meter' ) ) : 1;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseAssetUpAxis( xml ) {\r\n\r\n\t\t\treturn xml !== undefined ? xml.textContent : 'Y_UP';\r\n\r\n\t\t}\r\n\r\n\t\t// library\r\n\r\n\t\tfunction parseLibrary( xml, libraryName, nodeName, parser ) {\r\n\r\n\t\t\tvar library = getElementsByTagName( xml, libraryName )[ 0 ];\r\n\r\n\t\t\tif ( library !== undefined ) {\r\n\r\n\t\t\t\tvar elements = getElementsByTagName( library, nodeName );\r\n\r\n\t\t\t\tfor ( var i = 0; i < elements.length; i ++ ) {\r\n\r\n\t\t\t\t\tparser( elements[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildLibrary( data, builder ) {\r\n\r\n\t\t\tfor ( var name in data ) {\r\n\r\n\t\t\t\tvar object = data[ name ];\r\n\t\t\t\tobject.build = builder( data[ name ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// get\r\n\r\n\t\tfunction getBuild( data, builder ) {\r\n\r\n\t\t\tif ( data.build !== undefined ) return data.build;\r\n\r\n\t\t\tdata.build = builder( data );\r\n\r\n\t\t\treturn data.build;\r\n\r\n\t\t}\r\n\r\n\t\t// image\r\n\r\n\t\tfunction parseImage( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tinit_from: getElementsByTagName( xml, 'init_from' )[ 0 ].textContent\r\n\t\t\t};\r\n\r\n\t\t\tlibrary.images[ xml.getAttribute( 'id' ) ] = data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildImage( data ) {\r\n\r\n\t\t\tif ( data.build !== undefined ) return data.build;\r\n\t\t\t//init_from\r\n\t\t\tvar img = new Image();\r\n\t\t\timg.src = base +\"/\"+ data.init_from;\r\n\t\t\t//return new Image();\r\n\t\t\treturn img;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getImage( id ) {\r\n\r\n\t\t\treturn getBuild( library.images[ id ], buildImage );\r\n\r\n\t\t}\r\n\r\n\t\t// effect\r\n\r\n\t\tfunction parseEffect( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'profile_COMMON':\r\n\t\t\t\t\t\tdata.profile = parseEffectProfileCOMMON( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlibrary.effects[ xml.getAttribute( 'id' ) ] = data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseEffectProfileCOMMON( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tsurfaces: {},\r\n\t\t\t\tsamplers: {}\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'newparam':\r\n\t\t\t\t\t\tparseEffectNewparam( child, data );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'technique':\r\n\t\t\t\t\t\tdata.technique = parseEffectTechnique( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseEffectNewparam( xml, data ) {\r\n\r\n\t\t\tvar sid = xml.getAttribute( 'sid' );\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'surface':\r\n\t\t\t\t\t\tdata.surfaces[ sid ] = parseEffectSurface( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'sampler2D':\r\n\t\t\t\t\t\tdata.samplers[ sid ] = parseEffectSampler( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseEffectSurface( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'init_from':\r\n\t\t\t\t\t\tdata.init_from = child.textContent;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseEffectSampler( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'source':\r\n\t\t\t\t\t\tdata.source = child.textContent;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseEffectTechnique( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'constant':\r\n\t\t\t\t\tcase 'lambert':\r\n\t\t\t\t\tcase 'blinn':\r\n\t\t\t\t\tcase 'phong':\r\n\t\t\t\t\t\tdata.type = child.nodeName;\r\n\t\t\t\t\t\tdata.parameters = parseEffectParameters( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseEffectParameters( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'emission':\r\n\t\t\t\t\tcase 'diffuse':\r\n\t\t\t\t\tcase 'specular':\r\n\t\t\t\t\tcase 'shininess':\r\n\t\t\t\t\tcase 'transparent':\r\n\t\t\t\t\tcase 'transparency':\r\n\t\t\t\t\t\tdata[ child.nodeName ] = parseEffectParameter( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseEffectParameter( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'color':\r\n\t\t\t\t\t\tdata[ child.nodeName ] = parseFloats( child.textContent );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'float':\r\n\t\t\t\t\t\tdata[ child.nodeName ] = parseFloat( child.textContent );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'texture':\r\n\t\t\t\t\t\tdata[ child.nodeName ] = { id: child.getAttribute( 'texture' ), extra: parseEffectParameterTexture( child ) };\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseEffectParameterTexture( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'extra':\r\n\t\t\t\t\t\tdata = parseEffectParameterTextureExtra( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseEffectParameterTextureExtra( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'technique':\r\n\t\t\t\t\t\tdata[ child.nodeName ] = parseEffectParameterTextureExtraTechnique( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseEffectParameterTextureExtraTechnique( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'repeatU':\r\n\t\t\t\t\tcase 'repeatV':\r\n\t\t\t\t\tcase 'offsetU':\r\n\t\t\t\t\tcase 'offsetV':\r\n\t\t\t\t\t\tdata[ child.nodeName ] = parseFloat( child.textContent );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'wrapU':\r\n\t\t\t\t\tcase 'wrapV':\r\n\t\t\t\t\t\tdata[ child.nodeName ] = parseInt( child.textContent );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildEffect( data ) {\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getEffect( id ) {\r\n\r\n\t\t\treturn getBuild( library.effects[ id ], buildEffect );\r\n\r\n\t\t}\r\n\r\n\t\t// material\r\n\r\n\t\tfunction parseMaterial( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tname: xml.getAttribute( 'name' )\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'instance_effect':\r\n\t\t\t\t\t\tdata.url = parseId( child.getAttribute( 'url' ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlibrary.materials[ xml.getAttribute( 'id' ) ] = data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildMaterial( data ) {\r\n\r\n\t\t\tvar effect = getEffect( data.url );\r\n\t\t\tvar technique = effect.profile.technique;\r\n\r\n\t\t\tvar material;\r\n\r\n\t\t\tswitch ( technique.type ) {\r\n\r\n\t\t\t\tcase 'phong':\r\n\t\t\t\tcase 'blinn':\r\n\t\t\t\t\tmaterial = new MeshPhongMaterial();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'lambert':\r\n\t\t\t\t\tmaterial = new MeshLambertMaterial();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t/*case 'constant':\r\n\t\t\t\t\tmaterial = new LineBasicMaterial();\r\n\t\t\t\t\tbreak;*/\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tmaterial = new MeshBasicMaterial();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterial.name = data.name;\r\n\r\n\t\t\tfunction getTexture( textureObject ) {\r\n\r\n\t\t\t\tvar sampler = effect.profile.samplers[ textureObject.id ];\r\n\r\n\t\t\t\tif ( sampler !== undefined ) {\r\n\r\n\t\t\t\t\tvar surface = effect.profile.surfaces[ sampler.source ];\r\n\r\n\t\t\t\t\tvar texture = new Texture( getImage( surface.init_from ) );\r\n\r\n\t\t\t\t\tvar extra = textureObject.extra;\r\n\r\n\t\t\t\t\tif ( extra !== undefined && extra.technique !== undefined ) {\r\n\r\n\t\t\t\t\t\tvar technique = extra.technique;\r\n\r\n\t\t\t\t\t\ttexture.wrapS = technique.wrapU ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\r\n\t\t\t\t\t\ttexture.wrapT = technique.wrapV ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\r\n\r\n\t\t\t\t\t\ttexture.offset.set( technique.offsetU, technique.offsetV );\r\n\t\t\t\t\t\ttexture.repeat.set( technique.repeatU, technique.repeatV );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\ttexture.wrapS = THREE.RepeatWrapping;\r\n\t\t\t\t\t\ttexture.wrapT = THREE.RepeatWrapping;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\treturn texture;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.error( 'ColladaLoder: Undefined sampler', textureObject.id );\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar parameters = technique.parameters;\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tvar parameter = parameters[ key ];\r\n\r\n\t\t\t\tswitch ( key ) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tcase 'diffuse':\r\n\t\t\t\t\t\tif ( parameter.color ) material.color.fromArray( parameter.color );\r\n\t\t\t\t\t\tif ( parameter.texture ) material.map = getTexture( parameter.texture );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'specular':\r\n\t\t\t\t\t\tif ( parameter.color && material.specular )\r\n\t\t\t\t\t\t\tmaterial.specular.fromArray( parameter.color );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'shininess':\r\n\t\t\t\t\t\tif ( parameter.float && material.shininess )\r\n\t\t\t\t\t\t\tmaterial.shininess = parameter.float;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'emission':\r\n\t\t\t\t\t\tif ( parameter.color && material.emissive )\r\n\t\t\t\t\t\t\tmaterial.emissive.fromArray( parameter.color );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'transparent':\r\n\t\t\t\t\t\tif(parameter.color)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmaterial.color.fromArray( parameter.color );\r\n\t\t\t\t\t\t\tif(parameter.color.length === 4)\r\n\t\t\t\t\t\t\t\tmaterial.opacity = parameter.color[4];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// if ( parameter.texture ) material.alphaMap = getTexture( parameter.texture );\r\n\t\t\t\t\t\tmaterial.transparent = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'transparency':\r\n\t\t\t\t\t\tif ( parameter.float !== undefined ) material.opacity = parameter.float;\r\n\t\t\t\t\t\tmaterial.transparent = true;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn material;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getMaterial( id ) {\r\n\r\n\t\t\treturn getBuild( library.materials[ id ], buildMaterial );\r\n\r\n\t\t}\r\n\r\n\t\t// camera\r\n\r\n\t\tfunction parseCamera( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tname: xml.getAttribute( 'name' )\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'optics':\r\n\t\t\t\t\t\tdata.optics = parseCameraOptics( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlibrary.cameras[ xml.getAttribute( 'id' ) ] = data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseCameraOptics( xml ) {\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'technique_common':\r\n\t\t\t\t\t\treturn parseCameraTechnique( child );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn {};\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseCameraTechnique( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'perspective':\r\n\t\t\t\t\tcase 'orthographic':\r\n\r\n\t\t\t\t\t\tdata.technique = child.nodeName;\r\n\t\t\t\t\t\tdata.parameters = parseCameraParameters( child );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseCameraParameters( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'xfov':\r\n\t\t\t\t\tcase 'yfov':\r\n\t\t\t\t\tcase 'xmag':\r\n\t\t\t\t\tcase 'ymag':\r\n\t\t\t\t\tcase 'znear':\r\n\t\t\t\t\tcase 'zfar':\r\n\t\t\t\t\tcase 'aspect_ratio':\r\n\t\t\t\t\t\tdata[ child.nodeName ] = parseFloat( child.textContent );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildCamera( data ) {\r\n\r\n\t\t\tvar camera;\r\n\r\n\t\t\tswitch ( data.optics.technique ) {\r\n\r\n\t\t\t\tcase 'perspective':\r\n\t\t\t\t\tcamera = new PerspectiveCamera(\r\n\t\t\t\t\t\tdata.optics.parameters.yfov,\r\n\t\t\t\t\t\tdata.optics.parameters.aspect_ratio,\r\n\t\t\t\t\t\tdata.optics.parameters.znear,\r\n\t\t\t\t\t\tdata.optics.parameters.zfar\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'orthographic':\r\n\t\t\t\t\tcamera = new OrthographicCamera( /* TODO */ );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tcamera = new PerspectiveCamera();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcamera.name = data.name;\r\n\r\n\t\t\treturn camera;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getCamera( id ) {\r\n\r\n\t\t\treturn getBuild( library.cameras[ id ], buildCamera );\r\n\r\n\t\t}\r\n\r\n\t\t// light\r\n\r\n\t\tfunction parseLight( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'technique_common':\r\n\t\t\t\t\t\tdata = parseLightTechnique( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlibrary.lights[ xml.getAttribute( 'id' ) ] = data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseLightTechnique( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'directional':\r\n\t\t\t\t\tcase 'point':\r\n\t\t\t\t\tcase 'spot':\r\n\t\t\t\t\tcase 'ambient':\r\n\r\n\t\t\t\t\t\tdata.technique = child.nodeName;\r\n\t\t\t\t\t\tdata.parameters = parseLightParameters( child );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseLightParameters( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'color':\r\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\r\n\t\t\t\t\t\tdata.color = new Color().fromArray( array );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'falloff_angle':\r\n\t\t\t\t\t\tdata.falloffAngle = parseFloat( child.textContent );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'quadratic_attenuation':\r\n\t\t\t\t\t\tvar f = parseFloat( child.textContent );\r\n\t\t\t\t\t\tdata.distance = f ? Math.sqrt( 1 / f ) : 0;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildLight( data ) {\r\n\r\n\t\t\tvar light;\r\n\r\n\t\t\tswitch ( data.technique ) {\r\n\r\n\t\t\t\tcase 'directional':\r\n\t\t\t\t\tlight = new DirectionalLight();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'point':\r\n\t\t\t\t\tlight = new PointLight();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'spot':\r\n\t\t\t\t\tlight = new SpotLight();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'ambient':\r\n\t\t\t\t\tlight = new AmbientLight();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.parameters.color ) light.color.copy( data.parameters.color );\r\n\t\t\tif ( data.parameters.distance ) light.distance = data.parameters.distance;\r\n\r\n\t\t\treturn light;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getLight( id ) {\r\n\r\n\t\t\treturn getBuild( library.lights[ id ], buildLight );\r\n\r\n\t\t}\r\n\r\n\t\t// geometry\r\n\r\n\t\tfunction parseGeometry( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tname: xml.getAttribute( 'name' ),\r\n\t\t\t\tsources: {},\r\n\t\t\t\tvertices: {},\r\n\t\t\t\tprimitives: []\r\n\t\t\t};\r\n\r\n\t\t\tvar mesh = getElementsByTagName( xml, 'mesh' )[ 0 ];\r\n\r\n\t\t\tfor ( var i = 0; i < mesh.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = mesh.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tvar id = child.getAttribute( 'id' );\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'source':\r\n\t\t\t\t\t\tdata.sources[ id ] = parseGeometrySource( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'vertices':\r\n\t\t\t\t\t\t// data.sources[ id ] = data.sources[ parseId( getElementsByTagName( child, 'input' )[ 0 ].getAttribute( 'source' ) ) ];\r\n\t\t\t\t\t\tdata.vertices = parseGeometryVertices( child );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'polygons':\r\n\t\t\t\t\t\tconsole.warn( 'ColladaLoader: Unsupported primitive type: ', child.nodeName );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'lines':\r\n\t\t\t\t\tcase 'linestrips':\r\n\t\t\t\t\tcase 'polylist':\r\n\t\t\t\t\tcase 'triangles':\r\n\t\t\t\t\t\tdata.primitives.push( parseGeometryPrimitive( child ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tconsole.log( child );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlibrary.geometries[ xml.getAttribute( 'id' ) ] = data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseGeometrySource( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tarray: [],\r\n\t\t\t\tstride: 3\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'float_array':\r\n\t\t\t\t\t\tdata.array = parseFloats( child.textContent );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'technique_common':\r\n\t\t\t\t\t\tvar accessor = getElementsByTagName( child, 'accessor' )[ 0 ];\r\n\r\n\t\t\t\t\t\tif ( accessor !== undefined ) {\r\n\r\n\t\t\t\t\t\t\tdata.stride = parseInt( accessor.getAttribute( 'stride' ) );\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tconsole.log( child );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseGeometryVertices( xml ) {\r\n\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tdata[ child.getAttribute( 'semantic' ) ] = parseId( child.getAttribute( 'source' ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseGeometryPrimitive( xml ) {\r\n\r\n\t\t\tvar primitive = {\r\n\t\t\t\ttype: xml.nodeName,\r\n\t\t\t\tmaterial: xml.getAttribute( 'material' ),\r\n\t\t\t\tinputs: {},\r\n\t\t\t\tstride: 0\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'input':\r\n\t\t\t\t\t\tvar id = parseId( child.getAttribute( 'source' ) );\r\n\t\t\t\t\t\tvar semantic = child.getAttribute( 'semantic' );\r\n\t\t\t\t\t\tvar offset = parseInt( child.getAttribute( 'offset' ) );\r\n\t\t\t\t\t\tprimitive.inputs[ semantic ] = { id: id, offset: offset };\r\n\t\t\t\t\t\tprimitive.stride = Math.max( primitive.stride, offset + 1 );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'vcount':\r\n\t\t\t\t\t\tprimitive.vcount = parseInts( child.textContent );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'p':\r\n\t\t\t\t\t\tprimitive.p = parseInts( child.textContent );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn primitive;\r\n\r\n\t\t}\r\n\r\n\t\tvar DEFAULT_LINEMATERIAL = new LineBasicMaterial();\r\n\t\tvar DEFAULT_MESHMATERIAL = new MeshPhongMaterial();\r\n\r\n\t\tfunction buildGeometry( data ) {\r\n\r\n\t\t\tvar group = {};\r\n\r\n\t\t\tvar sources = data.sources;\r\n\t\t\tvar vertices = data.vertices;\r\n\t\t\tvar primitives = data.primitives;\r\n\r\n\t\t\tif ( primitives.length === 0 ) return group;\r\n\r\n\t\t\tfor ( var p = 0; p < primitives.length; p ++ ) {\r\n\r\n\t\t\t\tvar primitive = primitives[ p ];\r\n\t\t\t\tvar inputs = primitive.inputs;\r\n\r\n\t\t\t\tvar geometry = new BufferGeometry();\r\n\r\n\t\t\t\tif ( data.name ) geometry.name = data.name;\r\n\r\n\t\t\t\tfor ( var name in inputs ) {\r\n\r\n\t\t\t\t\tvar input = inputs[ name ];\r\n\r\n\t\t\t\t\tswitch ( name )\t{\r\n\r\n\t\t\t\t\t\tcase 'VERTEX':\r\n\t\t\t\t\t\t\tfor ( var key in vertices ) {\r\n\r\n\t\t\t\t\t\t\t\tgeometry.addAttribute( key.toLowerCase(), buildGeometryAttribute( primitive, sources[ vertices[ key ] ], input.offset ) );\r\n\t\t\t\t\t\t\t\tgeometry.computeBoundingBox();\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'NORMAL':\r\n\t\t\t\t\t\t\tgeometry.addAttribute( 'normal', buildGeometryAttribute( primitive, sources[ input.id ], input.offset ) );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'COLOR':\r\n\t\t\t\t\t\t\tgeometry.addAttribute( 'color', buildGeometryAttribute( primitive, sources[ input.id ], input.offset ) );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'TEXCOORD':\r\n\t\t\t\t\t\t\tgeometry.addAttribute( 'uv', buildGeometryAttribute( primitive, sources[ input.id ], input.offset ) );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar object;\r\n\r\n\t\t\t\tswitch ( primitive.type ) {\r\n\r\n\t\t\t\t\tcase 'lines':\r\n\t\t\t\t\t\tobject = new LineSegments( geometry, DEFAULT_LINEMATERIAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'linestrips':\r\n\t\t\t\t\t\tobject = new Line( geometry, DEFAULT_LINEMATERIAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'triangles':\r\n\t\t\t\t\tcase 'polylist':\r\n\t\t\t\t\t\tobject = new Mesh( geometry, DEFAULT_MESHMATERIAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgroup[ primitive.material ] = object;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn group;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildGeometryAttribute( primitive, source, offset ) {\r\n\r\n\t\t\tvar indices = primitive.p;\r\n\t\t\tvar stride = primitive.stride;\r\n\t\t\tvar vcount = primitive.vcount;\r\n\r\n\t\t\tfunction pushVector( i ) {\r\n\r\n\t\t\t\tvar index = indices[ i + offset ] * sourceStride;\r\n\t\t\t\tvar length = index + sourceStride;\r\n\r\n\t\t\t\tfor ( ; index < length; index ++ ) {\r\n\r\n\t\t\t\t\tarray.push( sourceArray[ index ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar maxcount = 0;\r\n\r\n\t\t\tvar sourceArray = source.array;\r\n\t\t\tvar sourceStride = source.stride;\r\n\r\n\t\t\tvar array = [];\r\n\r\n\t\t\tif ( primitive.vcount !== undefined ) {\r\n\r\n\t\t\t\tvar index = 0;\r\n\r\n\t\t\t\tfor ( var i = 0, l = vcount.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tvar count = vcount[ i ];\r\n\r\n\t\t\t\t\tif ( count === 4 ) {\r\n\r\n\t\t\t\t\t\tvar a = index + stride * 0;\r\n\t\t\t\t\t\tvar b = index + stride * 1;\r\n\t\t\t\t\t\tvar c = index + stride * 2;\r\n\t\t\t\t\t\tvar d = index + stride * 3;\r\n\r\n\t\t\t\t\t\tpushVector( a ); pushVector( b ); pushVector( d );\r\n\t\t\t\t\t\tpushVector( b ); pushVector( c ); pushVector( d );\r\n\r\n\t\t\t\t\t} else if ( count === 3 ) {\r\n\r\n\t\t\t\t\t\tvar a = index + stride * 0;\r\n\t\t\t\t\t\tvar b = index + stride * 1;\r\n\t\t\t\t\t\tvar c = index + stride * 2;\r\n\r\n\t\t\t\t\t\tpushVector( a ); pushVector( b ); pushVector( c );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tmaxcount = Math.max( maxcount, count );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tindex += stride * count;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( maxcount > 0 ) {\r\n\r\n\t\t\t\t\tconsole.log( 'ColladaLoader: Geometry has faces with more than 4 vertices.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i += stride ) {\r\n\r\n\t\t\t\t\tpushVector( i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new Float32BufferAttribute( array, sourceStride );\r\n\r\n\t\t}\r\n\r\n\t\tfunction getGeometry( id ) {\r\n\r\n\t\t\treturn getBuild( library.geometries[ id ], buildGeometry );\r\n\r\n\t\t}\r\n\r\n\t\t// nodes\r\n\r\n\t\tvar matrix = new Matrix4();\r\n\t\tvar vector = new Vector3();\r\n\r\n\t\tfunction parseNode( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tname: xml.getAttribute( 'name' ),\r\n\t\t\t\tmatrix: new Matrix4(),\r\n\t\t\t\tnodes: [],\r\n\t\t\t\tinstanceCameras: [],\r\n\t\t\t\tinstanceLights: [],\r\n\t\t\t\tinstanceGeometries: [],\r\n\t\t\t\tinstanceNodes: []\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeType !== 1 ) continue;\r\n\r\n\t\t\t\tswitch ( child.nodeName ) {\r\n\r\n\t\t\t\t\tcase 'node':\r\n\r\n\t\t\t\t\t\tif ( child.hasAttribute( 'id' ) ) {\r\n\r\n\t\t\t\t\t\t\tdata.nodes.push( child.getAttribute( 'id' ) );\r\n\t\t\t\t\t\t\tparseNode( child );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'instance_camera':\r\n\t\t\t\t\t\tdata.instanceCameras.push( parseId( child.getAttribute( 'url' ) ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'instance_light':\r\n\t\t\t\t\t\tdata.instanceLights.push( parseId( child.getAttribute( 'url' ) ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'instance_geometry':\r\n\t\t\t\t\t\tdata.instanceGeometries.push( parseNodeInstanceGeometry( child ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'instance_node':\r\n\t\t\t\t\t\tdata.instanceNodes.push( parseId( child.getAttribute( 'url' ) ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'matrix':\r\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\r\n\t\t\t\t\t\tdata.matrix.multiply( matrix.fromArray( array ).transpose() ); // .transpose() when Z_UP?\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'translate':\r\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\r\n\t\t\t\t\t\tvector.fromArray( array );\r\n\t\t\t\t\t\tdata.matrix.multiply( matrix.makeTranslation( vector.x, vector.y, vector.z ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'rotate':\r\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\r\n\t\t\t\t\t\tvar angle = Math.degToRad( array[ 3 ] );\r\n\t\t\t\t\t\tdata.matrix.multiply( matrix.makeRotationAxis( vector.fromArray( array ), angle ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'scale':\r\n\t\t\t\t\t\tvar array = parseFloats( child.textContent );\r\n\t\t\t\t\t\tdata.matrix.scale( vector.fromArray( array ) );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'extra':\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tconsole.log( child );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( xml.hasAttribute( 'id' ) ) {\r\n\r\n\t\t\t\tlibrary.nodes[ xml.getAttribute( 'id' ) ] = data;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseNodeInstanceGeometry( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tid: parseId( xml.getAttribute( 'url' ) ),\r\n\t\t\t\tmaterials: {}\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0; i < xml.childNodes.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = xml.childNodes[ i ];\r\n\r\n\t\t\t\tif ( child.nodeName === 'bind_material' ) {\r\n\r\n\t\t\t\t\tvar instances = child.getElementsByTagName( 'instance_material' );\r\n\r\n\t\t\t\t\tfor ( var j = 0; j < instances.length; j ++ ) {\r\n\r\n\t\t\t\t\t\tvar instance = instances[ j ];\r\n\t\t\t\t\t\tvar symbol = instance.getAttribute( 'symbol' );\r\n\t\t\t\t\t\tvar target = instance.getAttribute( 'target' );\r\n\r\n\t\t\t\t\t\tdata.materials[ symbol ] = parseId( target );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildNode( data ) {\r\n\r\n\t\t\tvar objects = [];\r\n\r\n\t\t\tvar matrix = data.matrix;\r\n\t\t\tvar nodes = data.nodes;\r\n\t\t\tvar instanceCameras = data.instanceCameras;\r\n\t\t\tvar instanceLights = data.instanceLights;\r\n\t\t\tvar instanceGeometries = data.instanceGeometries;\r\n\t\t\tvar instanceNodes = data.instanceNodes;\r\n\r\n\t\t\tfor ( var i = 0, l = nodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tobjects.push( getNode( nodes[ i ] ).clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0, l = instanceCameras.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tobjects.push( getCamera( instanceCameras[ i ] ).clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0, l = instanceLights.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tobjects.push( getLight( instanceLights[ i ] ).clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0, l = instanceGeometries.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar instance = instanceGeometries[ i ];\r\n\t\t\t\tvar geometries = getGeometry( instance.id );\r\n\r\n\t\t\t\tfor ( var key in geometries ) {\r\n\r\n\t\t\t\t\tvar object = geometries[ key ].clone();\r\n\r\n\t\t\t\t\tif ( instance.materials[ key ] !== undefined ) {\r\n\r\n\t\t\t\t\t\tobject.material = getMaterial( instance.materials[ key ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tobjects.push( object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0, l = instanceNodes.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tobjects.push( getNode( instanceNodes[ i ] ).clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar object;\r\n\r\n\t\t\tif ( nodes.length === 0 && objects.length === 1 ) {\r\n\r\n\t\t\t\tobject = objects[ 0 ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tobject = new Group();\r\n\r\n\t\t\t\tfor ( var i = 0; i < objects.length; i ++ ) {\r\n\r\n\t\t\t\t\tobject.add( objects[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.name = data.name;\r\n\t\t\tobject.matrix.copy( matrix );\r\n\t\t\tobject.matrix.decompose( object.position, object.quaternion, object.scale );\r\n\r\n\t\t\treturn object;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getNode( id ) {\r\n\r\n\t\t\treturn getBuild( library.nodes[ id ], buildNode );\r\n\r\n\t\t}\r\n\r\n\t\t// visual scenes\r\n\r\n\t\tfunction parseVisualScene( xml ) {\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tname: xml.getAttribute( 'name' ),\r\n\t\t\t\tchildren: []\r\n\t\t\t};\r\n\r\n\t\t\tvar elements = getElementsByTagName( xml, 'node' );\r\n\r\n\t\t\tfor ( var i = 0; i < elements.length; i ++ ) {\r\n\r\n\t\t\t\tdata.children.push( parseNode( elements[ i ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlibrary.visualScenes[ xml.getAttribute( 'id' ) ] = data;\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildVisualScene( data ) {\r\n\r\n\t\t\tvar group = new Group();\r\n\t\t\tgroup.name = data.name;\r\n\r\n\t\t\tvar children = data.children;\r\n\r\n\t\t\tfor ( var i = 0; i < children.length; i ++ ) {\r\n\r\n\t\t\t\tgroup.add( buildNode( children[ i ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn group;\r\n\r\n\t\t}\r\n\r\n\t\tfunction getVisualScene( id ) {\r\n\r\n\t\t\treturn getBuild( library.visualScenes[ id ], buildVisualScene );\r\n\r\n\t\t}\r\n\r\n\t\t// scenes\r\n\r\n\t\tfunction parseScene( xml ) {\r\n\r\n\t\t\tvar instance = getElementsByTagName( xml, 'instance_visual_scene' )[ 0 ];\r\n\t\t\treturn getVisualScene( parseId( instance.getAttribute( 'url' ) ) );\r\n\r\n\t\t}\r\n\r\n\t\tconsole.time( 'ColladaLoader' );\r\n\r\n\t\tif ( text.length === 0 ) {\r\n\r\n\t\t\treturn { scene: new Scene() };\r\n\r\n\t\t}\r\n\r\n\t\tconsole.time( 'ColladaLoader: DOMParser' );\r\n\r\n\t\tvar xml = new DOMParser().parseFromString( text, 'application/xml' );\r\n\r\n\t\tconsole.timeEnd( 'ColladaLoader: DOMParser' );\r\n\r\n\t\tvar collada = getElementsByTagName( xml, 'COLLADA' )[ 0 ];\r\n\r\n\t\t// metadata\r\n\r\n\t\tvar version = collada.getAttribute( 'version' );\r\n\t\tconsole.log( 'ColladaLoader: File version', version );\r\n\r\n\t\tvar asset = parseAsset( getElementsByTagName( collada, 'asset' )[ 0 ] );\r\n\r\n\t\tfunction applyMaterials(geometries, materials)\r\n\t\t{\r\n\t\t\tfor ( var name in geometries ) {\r\n\r\n\t\t\t\tvar object = geometries[ name ];\r\n\t\t\t\t\r\n\r\n\t\t\t}\r\n\t\t};\r\n\t\t//\r\n\r\n\t\tvar library = {\r\n\t\t\timages: {},\r\n\t\t\teffects: {},\r\n\t\t\tmaterials: {},\r\n\t\t\tcameras: {},\r\n\t\t\tlights: {},\r\n\t\t\tgeometries: {},\r\n\t\t\tnodes: {},\r\n\t\t\tvisualScenes: {}\r\n\t\t};\r\n\r\n\t\tconsole.time( 'ColladaLoader: Parse' );\r\n\r\n\t\tparseLibrary( collada, 'library_images', 'image', parseImage );\r\n\t\tparseLibrary( collada, 'library_effects', 'effect', parseEffect );\r\n\t\tparseLibrary( collada, 'library_materials', 'material', parseMaterial );\r\n\t\tparseLibrary( collada, 'library_cameras', 'camera', parseCamera );\r\n\t\tparseLibrary( collada, 'library_lights', 'light', parseLight );\r\n\t\tparseLibrary( collada, 'library_geometries', 'geometry', parseGeometry );\r\n\t\tparseLibrary( collada, 'library_nodes', 'node', parseNode );\r\n\t\tparseLibrary( collada, 'library_visual_scenes', 'visual_scene', parseVisualScene );\r\n\r\n\t\tconsole.timeEnd( 'ColladaLoader: Parse' );\r\n\r\n\t\tconsole.time( 'ColladaLoader: Build' );\r\n\r\n\t\tbuildLibrary( library.images, buildImage );\r\n\t\tbuildLibrary( library.effects, buildEffect );\r\n\t\tbuildLibrary( library.materials, buildMaterial );\r\n\t\tbuildLibrary( library.cameras, buildCamera );\r\n\t\tbuildLibrary( library.lights, buildLight );\r\n\t\t\r\n\t\tbuildLibrary( library.geometries, buildGeometry );\r\n\t\t\r\n\r\n\t\t// buildLibrary( library.nodes, buildNode );\r\n\t\tbuildLibrary( library.visualScenes, buildVisualScene );\r\n\r\n\t\tconsole.timeEnd( 'ColladaLoader: Build' );\r\n\r\n\t\t// console.log( library );\r\n\r\n\t\tvar scene = parseScene( getElementsByTagName( collada, 'scene' )[ 0 ] );\r\n\r\n\t\tif ( asset.upAxis === 'Z_UP' ) {\r\n\r\n\t\t\tscene.rotation.x = - Math.PI / 2;\r\n\r\n\t\t}\r\n\r\n\t\tscene.scale.multiplyScalar( asset.unit );\r\n\r\n\t\tconsole.timeEnd( 'ColladaLoader' );\r\n\r\n\t\t// console.log( scene );\r\n\r\n\t\treturn {\r\n\t\t\tanimations: [],\r\n\t\t\tkinematics: { joints: [] },\r\n\t\t\tlibrary: library,\r\n\t\t\tscene: scene\r\n\t\t};\r\n\r\n\t}\r\n\r\n};\r\nexport { ColladaLoader };","import { Camera } from '../cameras/Camera';\nimport { Vector3 } from '../math/Vector3';\nimport { LineSegments } from '../objects/LineSegments';\nimport { Color } from '../math/Color';\nimport { FaceColors } from '../constants';\nimport { LineBasicMaterial } from '../materials/LineBasicMaterial';\nimport { BufferGeometry } from '../core/BufferGeometry';\nimport { Float32BufferAttribute } from '../core/BufferAttribute';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author Mugen87 / https://github.com/Mugen87\n *\n *\t- shows frustum, line of sight and up of the camera\n *\t- suitable for fast updates\n * \t- based on frustum visualization in lightgl.js shadowmap example\n *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\n */\n\nfunction CameraHelper( camera ) {\n\n\tvar geometry = new BufferGeometry();\n\tvar material = new LineBasicMaterial( { color: 0xffffff, vertexColors: FaceColors } );\n\n\tvar vertices = [];\n\tvar colors = [];\n\n\tvar pointMap = {};\n\n\t// colors\n\n\tvar colorFrustum = new Color( 0xffaa00 );\n\tvar colorCone = new Color( 0xff0000 );\n\tvar colorUp = new Color( 0x00aaff );\n\tvar colorTarget = new Color( 0xffffff );\n\tvar colorCross = new Color( 0x333333 );\n\n\t// near\n\n\taddLine( \"n1\", \"n2\", colorFrustum );\n\taddLine( \"n2\", \"n4\", colorFrustum );\n\taddLine( \"n4\", \"n3\", colorFrustum );\n\taddLine( \"n3\", \"n1\", colorFrustum );\n\n\t// far\n\n\taddLine( \"f1\", \"f2\", colorFrustum );\n\taddLine( \"f2\", \"f4\", colorFrustum );\n\taddLine( \"f4\", \"f3\", colorFrustum );\n\taddLine( \"f3\", \"f1\", colorFrustum );\n\n\t// sides\n\n\taddLine( \"n1\", \"f1\", colorFrustum );\n\taddLine( \"n2\", \"f2\", colorFrustum );\n\taddLine( \"n3\", \"f3\", colorFrustum );\n\taddLine( \"n4\", \"f4\", colorFrustum );\n\n\t// cone\n\n\taddLine( \"p\", \"n1\", colorCone );\n\taddLine( \"p\", \"n2\", colorCone );\n\taddLine( \"p\", \"n3\", colorCone );\n\taddLine( \"p\", \"n4\", colorCone );\n\n\t// up\n\n\taddLine( \"u1\", \"u2\", colorUp );\n\taddLine( \"u2\", \"u3\", colorUp );\n\taddLine( \"u3\", \"u1\", colorUp );\n\n\t// target\n\n\taddLine( \"c\", \"t\", colorTarget );\n\taddLine( \"p\", \"c\", colorCross );\n\n\t// cross\n\n\taddLine( \"cn1\", \"cn2\", colorCross );\n\taddLine( \"cn3\", \"cn4\", colorCross );\n\n\taddLine( \"cf1\", \"cf2\", colorCross );\n\taddLine( \"cf3\", \"cf4\", colorCross );\n\n\tfunction addLine( a, b, color ) {\n\n\t\taddPoint( a, color );\n\t\taddPoint( b, color );\n\n\t}\n\n\tfunction addPoint( id, color ) {\n\n\t\tvertices.push( 0, 0, 0 );\n\t\tcolors.push( color.r, color.g, color.b );\n\n\t\tif ( pointMap[ id ] === undefined ) {\n\n\t\t\tpointMap[ id ] = [];\n\n\t\t}\n\n\t\tpointMap[ id ].push( ( vertices.length / 3 ) - 1 );\n\n\t}\n\n\tgeometry.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tgeometry.addAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\tLineSegments.call( this, geometry, material );\n\n\tthis.camera = camera;\n\tif ( this.camera.updateProjectionMatrix ) this.camera.updateProjectionMatrix();\n\n\tthis.matrix = camera.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tthis.pointMap = pointMap;\n\n\tthis.update();\n\n}\n\nCameraHelper.prototype = Object.create( LineSegments.prototype );\nCameraHelper.prototype.constructor = CameraHelper;\n\nCameraHelper.prototype.update = function () {\n\n\tvar geometry, pointMap;\n\n\tvar vector = new Vector3();\n\tvar camera = new Camera();\n\n\tfunction setPoint( point, x, y, z ) {\n\n\t\tvector.set( x, y, z ).unproject( camera );\n\n\t\tvar points = pointMap[ point ];\n\n\t\tif ( points !== undefined ) {\n\n\t\t\tvar position = geometry.getAttribute( 'position' );\n\n\t\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\t\tposition.setXYZ( points[ i ], vector.x, vector.y, vector.z );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn function update() {\n\n\t\tgeometry = this.geometry;\n\t\tpointMap = this.pointMap;\n\n\t\tvar w = 1, h = 1;\n\n\t\t// we need just camera projection matrix\n\t\t// world matrix must be identity\n\n\t\tcamera.projectionMatrix.copy( this.camera.projectionMatrix );\n\n\t\t// center / target\n\n\t\tsetPoint( \"c\", 0, 0, - 1 );\n\t\tsetPoint( \"t\", 0, 0,  1 );\n\n\t\t// near\n\n\t\tsetPoint( \"n1\", - w, - h, - 1 );\n\t\tsetPoint( \"n2\",   w, - h, - 1 );\n\t\tsetPoint( \"n3\", - w,   h, - 1 );\n\t\tsetPoint( \"n4\",   w,   h, - 1 );\n\n\t\t// far\n\n\t\tsetPoint( \"f1\", - w, - h, 1 );\n\t\tsetPoint( \"f2\",   w, - h, 1 );\n\t\tsetPoint( \"f3\", - w,   h, 1 );\n\t\tsetPoint( \"f4\",   w,   h, 1 );\n\n\t\t// up\n\n\t\tsetPoint( \"u1\",   w * 0.7, h * 1.1, - 1 );\n\t\tsetPoint( \"u2\", - w * 0.7, h * 1.1, - 1 );\n\t\tsetPoint( \"u3\",         0, h * 2,   - 1 );\n\n\t\t// cross\n\n\t\tsetPoint( \"cf1\", - w,   0, 1 );\n\t\tsetPoint( \"cf2\",   w,   0, 1 );\n\t\tsetPoint( \"cf3\",   0, - h, 1 );\n\t\tsetPoint( \"cf4\",   0,   h, 1 );\n\n\t\tsetPoint( \"cn1\", - w,   0, - 1 );\n\t\tsetPoint( \"cn2\",   w,   0, - 1 );\n\t\tsetPoint( \"cn3\",   0, - h, - 1 );\n\t\tsetPoint( \"cn4\",   0,   h, - 1 );\n\n\t\tgeometry.getAttribute( 'position' ).needsUpdate = true;\n\n\t};\n\n}();\n\n\nexport { CameraHelper };\n","import { Texture } from './Texture';\nimport { NearestFilter } from '../constants';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction DataTexture( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { data: data, width: width, height: height };\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\tthis.unpackAlignment = 1;\n\n}\n\nDataTexture.prototype = Object.create( Texture.prototype );\nDataTexture.prototype.constructor = DataTexture;\n\nDataTexture.prototype.isDataTexture = true;\n\n\nexport { DataTexture };\n","/**\n * @author tschw\n *\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program, renderer )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [renderer] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'renderer' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (renderer factorizations):\n *\n * .upload( gl, seq, values, renderer )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n *\n * Methods of the top-level container (renderer factorizations):\n *\n * .setValue( gl, name, value )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .set( gl, obj, prop )\n *\n * \t\tsets uniform from object and property with same name than uniform\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n */\n\nimport { CubeTexture } from '../../textures/CubeTexture';\nimport { Texture } from '../../textures/Texture';\n\nvar emptyTexture = new Texture();\nvar emptyCubeTexture = new CubeTexture();\n\n// --- Base for inner nodes (including the root) ---\n\nfunction UniformContainer() {\n\n\tthis.seq = [];\n\tthis.map = {};\n\n}\n\n// --- Utilities ---\n\n// Array Caches (provide typed arrays for temporary by size)\n\nvar arrayCacheF32 = [];\nvar arrayCacheI32 = [];\n\n// Float32Array caches used for uploading Matrix uniforms\n\nvar mat4array = new Float32Array( 16 );\nvar mat3array = new Float32Array( 9 );\n\n// Flattening for arrays of vectors and matrices\n\nfunction flatten( array, nBlocks, blockSize ) {\n\n\tvar firstElem = array[ 0 ];\n\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\n\t// unoptimized: ! isNaN( firstElem )\n\t// see http://jacksondunstan.com/articles/983\n\n\tvar n = nBlocks * blockSize,\n\t\tr = arrayCacheF32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Float32Array( n );\n\t\tarrayCacheF32[ n ] = r;\n\n\t}\n\n\tif ( nBlocks !== 0 ) {\n\n\t\tfirstElem.toArray( r, 0 );\n\n\t\tfor ( var i = 1, offset = 0; i !== nBlocks; ++ i ) {\n\n\t\t\toffset += blockSize;\n\t\t\tarray[ i ].toArray( r, offset );\n\n\t\t}\n\n\t}\n\n\treturn r;\n\n}\n\n// Texture unit allocation\n\nfunction allocTexUnits( renderer, n ) {\n\n\tvar r = arrayCacheI32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Int32Array( n );\n\t\tarrayCacheI32[ n ] = r;\n\n\t}\n\n\tfor ( var i = 0; i !== n; ++ i )\n\t\tr[ i ] = renderer.allocTextureUnit();\n\n\treturn r;\n\n}\n\n// --- Setters ---\n\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n\n// Single scalar\n\nfunction setValue1f( gl, v ) { gl.uniform1f( this.addr, v ) }\nfunction setValue1i( gl, v ) { gl.uniform1i( this.addr, v ) }\n\n// Single float vector (from flat array or THREE.VectorN)\n\nfunction setValue2fv( gl, v ) {\n\n\tif ( v.x === undefined ) gl.uniform2fv( this.addr, v );\n\telse gl.uniform2f( this.addr, v.x, v.y );\n\n}\n\nfunction setValue3fv( gl, v ) {\n\n\tif ( v.x !== undefined )\n\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\n\telse if ( v.r !== undefined )\n\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\n\telse\n\t\tgl.uniform3fv( this.addr, v );\n\n}\n\nfunction setValue4fv( gl, v ) {\n\n\tif ( v.x === undefined ) gl.uniform4fv( this.addr, v );\n\telse gl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\n\n}\n\n// Single matrix (from flat array or MatrixN)\n\nfunction setValue2fm( gl, v ) {\n\n\tgl.uniformMatrix2fv( this.addr, false, v.elements || v );\n\n}\n\nfunction setValue3fm( gl, v ) {\n\n\tif ( v.elements === undefined ) {\n\n\t\tgl.uniformMatrix3fv( this.addr, false, v );\n\n\t} else {\n\n\t\tmat3array.set( v.elements );\n\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\n\n\t}\n\n}\n\nfunction setValue4fm( gl, v ) {\n\n\tif ( v.elements === undefined ) {\n\n\t\tgl.uniformMatrix4fv( this.addr, false, v );\n\n\t} else {\n\n\t\tmat4array.set( v.elements );\n\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\n\n\t}\n\n}\n\n// Single texture (2D / Cube)\n\nfunction setValueT1( gl, v, renderer ) {\n\n\tvar unit = renderer.allocTextureUnit();\n\tgl.uniform1i( this.addr, unit );\n\trenderer.setTexture2D( v || emptyTexture, unit );\n\n}\n\nfunction setValueT6( gl, v, renderer ) {\n\n\tvar unit = renderer.allocTextureUnit();\n\tgl.uniform1i( this.addr, unit );\n\trenderer.setTextureCube( v || emptyCubeTexture, unit );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\n\nfunction setValue2iv( gl, v ) { gl.uniform2iv( this.addr, v ) }\nfunction setValue3iv( gl, v ) { gl.uniform3iv( this.addr, v ) }\nfunction setValue4iv( gl, v ) { gl.uniform4iv( this.addr, v ) }\n\n// Helper to pick the right setter for the singular case\n\nfunction getSingularSetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValue1f; // FLOAT\n\t\tcase 0x8b50: return setValue2fv; // _VEC2\n\t\tcase 0x8b51: return setValue3fv; // _VEC3\n\t\tcase 0x8b52: return setValue4fv; // _VEC4\n\n\t\tcase 0x8b5a: return setValue2fm; // _MAT2\n\t\tcase 0x8b5b: return setValue3fm; // _MAT3\n\t\tcase 0x8b5c: return setValue4fm; // _MAT4\n\n\t\tcase 0x8b5e: return setValueT1; // SAMPLER_2D\n\t\tcase 0x8b60: return setValueT6; // SAMPLER_CUBE\n\n\t\tcase 0x1404: case 0x8b56: return setValue1i; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\n\n\t}\n\n}\n\n// Array of scalars\n\nfunction setValue1fv( gl, v ) { gl.uniform1fv( this.addr, v ) }\nfunction setValue1iv( gl, v ) { gl.uniform1iv( this.addr, v ) }\n\n// Array of vectors (flat or from THREE classes)\n\nfunction setValueV2a( gl, v ) {\n\n\tgl.uniform2fv( this.addr, flatten( v, this.size, 2 ) );\n\n}\n\nfunction setValueV3a( gl, v ) {\n\n\tgl.uniform3fv( this.addr, flatten( v, this.size, 3 ) );\n\n}\n\nfunction setValueV4a( gl, v ) {\n\n\tgl.uniform4fv( this.addr, flatten( v, this.size, 4 ) );\n\n}\n\n// Array of matrices (flat or from THREE clases)\n\nfunction setValueM2a( gl, v ) {\n\n\tgl.uniformMatrix2fv( this.addr, false, flatten( v, this.size, 4 ) );\n\n}\n\nfunction setValueM3a( gl, v ) {\n\n\tgl.uniformMatrix3fv( this.addr, false, flatten( v, this.size, 9 ) );\n\n}\n\nfunction setValueM4a( gl, v ) {\n\n\tgl.uniformMatrix4fv( this.addr, false, flatten( v, this.size, 16 ) );\n\n}\n\n// Array of textures (2D / Cube)\n\nfunction setValueT1a( gl, v, renderer ) {\n\n\tvar n = v.length,\n\t\tunits = allocTexUnits( renderer, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\trenderer.setTexture2D( v[ i ] || emptyTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT6a( gl, v, renderer ) {\n\n\tvar n = v.length,\n\t\tunits = allocTexUnits( renderer, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\trenderer.setTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\n\n\t}\n\n}\n\n// Helper to pick the right setter for a pure (bottom-level) array\n\nfunction getPureArraySetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValue1fv; // FLOAT\n\t\tcase 0x8b50: return setValueV2a; // _VEC2\n\t\tcase 0x8b51: return setValueV3a; // _VEC3\n\t\tcase 0x8b52: return setValueV4a; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2a; // _MAT2\n\t\tcase 0x8b5b: return setValueM3a; // _MAT3\n\t\tcase 0x8b5c: return setValueM4a; // _MAT4\n\n\t\tcase 0x8b5e: return setValueT1a; // SAMPLER_2D\n\t\tcase 0x8b60: return setValueT6a; // SAMPLER_CUBE\n\n\t\tcase 0x1404: case 0x8b56: return setValue1iv; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\n\n\t}\n\n}\n\n// --- Uniform Classes ---\n\nfunction SingleUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.setValue = getSingularSetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nfunction PureArrayUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.size = activeInfo.size;\n\tthis.setValue = getPureArraySetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nfunction StructuredUniform( id ) {\n\n\tthis.id = id;\n\n\tUniformContainer.call( this ); // mix-in\n\n}\n\nStructuredUniform.prototype.setValue = function ( gl, value ) {\n\n\t// Note: Don't need an extra 'renderer' parameter, since samplers\n\t// are not allowed in structured uniforms.\n\n\tvar seq = this.seq;\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ];\n\t\tu.setValue( gl, value[ u.id ] );\n\n\t}\n\n};\n\n// --- Top-level ---\n\n// Parser - builds up the property tree from the path strings\n\nvar RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g;\n\n// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\n\nfunction addUniform( container, uniformObject ) {\n\n\tcontainer.seq.push( uniformObject );\n\tcontainer.map[ uniformObject.id ] = uniformObject;\n\n}\n\nfunction parseUniform( activeInfo, addr, container ) {\n\n\tvar path = activeInfo.name,\n\t\tpathLength = path.length;\n\n\t// reset RegExp object, because of the early exit of a previous run\n\tRePathPart.lastIndex = 0;\n\n\tfor ( ; ; ) {\n\n\t\tvar match = RePathPart.exec( path ),\n\t\t\tmatchEnd = RePathPart.lastIndex,\n\n\t\t\tid = match[ 1 ],\n\t\t\tidIsIndex = match[ 2 ] === ']',\n\t\t\tsubscript = match[ 3 ];\n\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\n\n\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\n\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n\t\t\taddUniform( container, subscript === undefined ?\n\t\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\n\t\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\n\n\t\t\tbreak;\n\n\t\t} else {\n\n\t\t\t// step into inner node / create it in case it doesn't exist\n\n\t\t\tvar map = container.map, next = map[ id ];\n\n\t\t\tif ( next === undefined ) {\n\n\t\t\t\tnext = new StructuredUniform( id );\n\t\t\t\taddUniform( container, next );\n\n\t\t\t}\n\n\t\t\tcontainer = next;\n\n\t\t}\n\n\t}\n\n}\n\n// Root Container\n\nfunction WebGLUniforms( gl, program, renderer ) {\n\n\tUniformContainer.call( this );\n\n\tthis.renderer = renderer;\n\n\tvar n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\n\n\tfor ( var i = 0; i < n; ++ i ) {\n\n\t\tvar info = gl.getActiveUniform( program, i ),\n\t\t\tpath = info.name,\n\t\t\taddr = gl.getUniformLocation( program, path );\n\n\t\tparseUniform( info, addr, this );\n\n\t}\n\n}\n\nWebGLUniforms.prototype.setValue = function ( gl, name, value ) {\n\n\tvar u = this.map[ name ];\n\n\tif ( u !== undefined ) u.setValue( gl, value, this.renderer );\n\n};\n\nWebGLUniforms.prototype.setOptional = function ( gl, object, name ) {\n\n\tvar v = object[ name ];\n\n\tif ( v !== undefined ) this.setValue( gl, name, v );\n\n};\n\n\n// Static interface\n\nWebGLUniforms.upload = function ( gl, seq, values, renderer ) {\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ],\n\t\t\tv = values[ u.id ];\n\n\t\tif ( v.needsUpdate !== false ) {\n\n\t\t\t// note: always updating when .needsUpdate is undefined\n\t\t\tu.setValue( gl, v.value, renderer );\n\n\t\t}\n\n\t}\n\n};\n\nWebGLUniforms.seqWithValue = function ( seq, values ) {\n\n\tvar r = [];\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ];\n\t\tif ( u.id in values ) r.push( u );\n\n\t}\n\n\treturn r;\n\n};\n\nexport { WebGLUniforms };\n","import { Vector2 } from './Vector2';\n\n/**\n * @author bhouston / http://clara.io\n */\n\nfunction Box2( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new Vector2( + Infinity, + Infinity );\n\tthis.max = ( max !== undefined ) ? max : new Vector2( - Infinity, - Infinity );\n\n}\n\nObject.assign( Box2.prototype, {\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function () {\n\n\t\tvar v1 = new Vector2();\n\n\t\treturn function setFromCenterAndSize( center, size ) {\n\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\n\t\t\tthis.min.copy( center ).sub( halfSize );\n\t\t\tthis.max.copy( center ).add( halfSize );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = + Infinity;\n\t\tthis.max.x = this.max.y = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tisEmpty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\n\n\t},\n\n\tgetCenter: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector2();\n\t\treturn this.isEmpty() ? result.set( 0, 0 ) : result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tgetSize: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector2();\n\t\treturn this.isEmpty() ? result.set( 0, 0 ) : result.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ? false : true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y;\n\n\t},\n\n\tgetParameter: function ( point, optionalTarget ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tvar result = optionalTarget || new Vector2();\n\n\t\treturn result.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\n\t\t);\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\t// using 4 splitting planes to rule out intersections\n\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ? false : true;\n\n\t},\n\n\tclampPoint: function ( point, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new Vector2();\n\t\treturn result.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function () {\n\n\t\tvar v1 = new Vector2();\n\n\t\treturn function distanceToPoint( point ) {\n\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\n\t\t\treturn clampedPoint.sub( point ).length();\n\n\t\t};\n\n\t}(),\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n} );\n\n\nexport { Box2 };\n","import { Box2 } from '../../../math/Box2';\nimport { Vector2 } from '../../../math/Vector2';\nimport { Vector3 } from '../../../math/Vector3';\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction LensFlarePlugin( renderer, flares ) {\n\n\tvar gl = renderer.context;\n\tvar state = renderer.state;\n\n\tvar vertexBuffer, elementBuffer;\n\tvar shader, program, attributes, uniforms;\n\n\tvar tempTexture, occlusionTexture;\n\n\tfunction init() {\n\n\t\tvar vertices = new Float32Array( [\n\t\t\t- 1, - 1,  0, 0,\n\t\t\t 1, - 1,  1, 0,\n\t\t\t 1,  1,  1, 1,\n\t\t\t- 1,  1,  0, 1\n\t\t] );\n\n\t\tvar faces = new Uint16Array( [\n\t\t\t0, 1, 2,\n\t\t\t0, 2, 3\n\t\t] );\n\n\t\t// buffers\n\n\t\tvertexBuffer     = gl.createBuffer();\n\t\telementBuffer    = gl.createBuffer();\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\n\n\t\t// textures\n\n\t\ttempTexture      = gl.createTexture();\n\t\tocclusionTexture = gl.createTexture();\n\n\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGB, 16, 16, 0, gl.RGB, gl.UNSIGNED_BYTE, null );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\n\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, 16, 16, 0, gl.RGBA, gl.UNSIGNED_BYTE, null );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\n\t\tshader = {\n\n\t\t\tvertexShader: [\n\n\t\t\t\t\"uniform lowp int renderType;\",\n\n\t\t\t\t\"uniform vec3 screenPosition;\",\n\t\t\t\t\"uniform vec2 scale;\",\n\t\t\t\t\"uniform float rotation;\",\n\n\t\t\t\t\"uniform sampler2D occlusionMap;\",\n\n\t\t\t\t\"attribute vec2 position;\",\n\t\t\t\t\"attribute vec2 uv;\",\n\n\t\t\t\t\"varying vec2 vUV;\",\n\t\t\t\t\"varying float vVisibility;\",\n\n\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t\"vUV = uv;\",\n\n\t\t\t\t\t\"vec2 pos = position;\",\n\n\t\t\t\t\t\"if ( renderType == 2 ) {\",\n\n\t\t\t\t\t\t\"vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\",\n\n\t\t\t\t\t\t\"vVisibility =        visibility.r / 9.0;\",\n\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.g / 9.0;\",\n\t\t\t\t\t\t\"vVisibility *=       visibility.b / 9.0;\",\n\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.a / 9.0;\",\n\n\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\n\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\n\n\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\n\n\t\t\t\t\"}\"\n\n\t\t\t].join( \"\\n\" ),\n\n\t\t\tfragmentShader: [\n\n\t\t\t\t\"uniform lowp int renderType;\",\n\n\t\t\t\t\"uniform sampler2D map;\",\n\t\t\t\t\"uniform float opacity;\",\n\t\t\t\t\"uniform vec3 color;\",\n\n\t\t\t\t\"varying vec2 vUV;\",\n\t\t\t\t\"varying float vVisibility;\",\n\n\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t// pink square\n\n\t\t\t\t\t\"if ( renderType == 0 ) {\",\n\n\t\t\t\t\t\t\"gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\",\n\n\t\t\t\t\t// restore\n\n\t\t\t\t\t\"} else if ( renderType == 1 ) {\",\n\n\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\n\n\t\t\t\t\t// flare\n\n\t\t\t\t\t\"} else {\",\n\n\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\n\t\t\t\t\t\t\"texture.a *= opacity * vVisibility;\",\n\t\t\t\t\t\t\"gl_FragColor = texture;\",\n\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\n\n\t\t\t\t\t\"}\",\n\n\t\t\t\t\"}\"\n\n\t\t\t].join( \"\\n\" )\n\n\t\t};\n\n\t\tprogram = createProgram( shader );\n\n\t\tattributes = {\n\t\t\tvertex: gl.getAttribLocation ( program, \"position\" ),\n\t\t\tuv:     gl.getAttribLocation ( program, \"uv\" )\n\t\t};\n\n\t\tuniforms = {\n\t\t\trenderType:     gl.getUniformLocation( program, \"renderType\" ),\n\t\t\tmap:            gl.getUniformLocation( program, \"map\" ),\n\t\t\tocclusionMap:   gl.getUniformLocation( program, \"occlusionMap\" ),\n\t\t\topacity:        gl.getUniformLocation( program, \"opacity\" ),\n\t\t\tcolor:          gl.getUniformLocation( program, \"color\" ),\n\t\t\tscale:          gl.getUniformLocation( program, \"scale\" ),\n\t\t\trotation:       gl.getUniformLocation( program, \"rotation\" ),\n\t\t\tscreenPosition: gl.getUniformLocation( program, \"screenPosition\" )\n\t\t};\n\n\t}\n\n\t/*\n\t * Render lens flares\n\t * Method: renders 16x16 0xff00ff-colored points scattered over the light source area,\n\t *         reads these back and calculates occlusion.\n\t */\n\n\tthis.render = function ( scene, camera, viewport ) {\n\n\t\tif ( flares.length === 0 ) return;\n\n\t\tvar tempPosition = new Vector3();\n\n\t\tvar invAspect = viewport.w / viewport.z,\n\t\t\thalfViewportWidth = viewport.z * 0.5,\n\t\t\thalfViewportHeight = viewport.w * 0.5;\n\n\t\tvar size = 16 / viewport.w,\n\t\t\tscale = new Vector2( size * invAspect, size );\n\n\t\tvar screenPosition = new Vector3( 1, 1, 0 ),\n\t\t\tscreenPositionPixels = new Vector2( 1, 1 );\n\n\t\tvar validArea = new Box2();\n\n\t\tvalidArea.min.set( viewport.x, viewport.y );\n\t\tvalidArea.max.set( viewport.x + ( viewport.z - 16 ), viewport.y + ( viewport.w - 16 ) );\n\n\t\tif ( program === undefined ) {\n\n\t\t\tinit();\n\n\t\t}\n\n\t\tgl.useProgram( program );\n\n\t\tstate.initAttributes();\n\t\tstate.enableAttribute( attributes.vertex );\n\t\tstate.enableAttribute( attributes.uv );\n\t\tstate.disableUnusedAttributes();\n\n\t\t// loop through all lens flares to update their occlusion and positions\n\t\t// setup gl and common used attribs/uniforms\n\n\t\tgl.uniform1i( uniforms.occlusionMap, 0 );\n\t\tgl.uniform1i( uniforms.map, 1 );\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.vertexAttribPointer( attributes.vertex, 2, gl.FLOAT, false, 2 * 8, 0 );\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\n\t\tstate.disable( gl.CULL_FACE );\n\t\tstate.buffers.depth.setMask( false );\n\n\t\tfor ( var i = 0, l = flares.length; i < l; i ++ ) {\n\n\t\t\tsize = 16 / viewport.w;\n\t\t\tscale.set( size * invAspect, size );\n\n\t\t\t// calc object screen position\n\n\t\t\tvar flare = flares[ i ];\n\n\t\t\ttempPosition.set( flare.matrixWorld.elements[ 12 ], flare.matrixWorld.elements[ 13 ], flare.matrixWorld.elements[ 14 ] );\n\n\t\t\ttempPosition.applyMatrix4( camera.matrixWorldInverse );\n\t\t\ttempPosition.applyMatrix4( camera.projectionMatrix );\n\n\t\t\t// setup arrays for gl programs\n\n\t\t\tscreenPosition.copy( tempPosition );\n\n\t\t\t// horizontal and vertical coordinate of the lower left corner of the pixels to copy\n\n\t\t\tscreenPositionPixels.x = viewport.x + ( screenPosition.x * halfViewportWidth ) + halfViewportWidth - 8;\n\t\t\tscreenPositionPixels.y = viewport.y + ( screenPosition.y * halfViewportHeight ) + halfViewportHeight - 8;\n\n\t\t\t// screen cull\n\n\t\t\tif ( validArea.containsPoint( screenPositionPixels ) === true ) {\n\n\t\t\t\t// save current RGB to temp texture\n\n\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, null );\n\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGB, screenPositionPixels.x, screenPositionPixels.y, 16, 16, 0 );\n\n\n\t\t\t\t// render pink quad\n\n\t\t\t\tgl.uniform1i( uniforms.renderType, 0 );\n\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\n\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\n\n\t\t\t\tstate.disable( gl.BLEND );\n\t\t\t\tstate.enable( gl.DEPTH_TEST );\n\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\n\t\t\t\t// copy result to occlusionMap\n\n\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGBA, screenPositionPixels.x, screenPositionPixels.y, 16, 16, 0 );\n\n\n\t\t\t\t// restore graphics\n\n\t\t\t\tgl.uniform1i( uniforms.renderType, 1 );\n\t\t\t\tstate.disable( gl.DEPTH_TEST );\n\n\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\n\t\t\t\t// update object positions\n\n\t\t\t\tflare.positionScreen.copy( screenPosition );\n\n\t\t\t\tif ( flare.customUpdateCallback ) {\n\n\t\t\t\t\tflare.customUpdateCallback( flare );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tflare.updateLensFlares();\n\n\t\t\t\t}\n\n\t\t\t\t// render flares\n\n\t\t\t\tgl.uniform1i( uniforms.renderType, 2 );\n\t\t\t\tstate.enable( gl.BLEND );\n\n\t\t\t\tfor ( var j = 0, jl = flare.lensFlares.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar sprite = flare.lensFlares[ j ];\n\n\t\t\t\t\tif ( sprite.opacity > 0.001 && sprite.scale > 0.001 ) {\n\n\t\t\t\t\t\tscreenPosition.x = sprite.x;\n\t\t\t\t\t\tscreenPosition.y = sprite.y;\n\t\t\t\t\t\tscreenPosition.z = sprite.z;\n\n\t\t\t\t\t\tsize = sprite.size * sprite.scale / viewport.w;\n\n\t\t\t\t\t\tscale.x = size * invAspect;\n\t\t\t\t\t\tscale.y = size;\n\n\t\t\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\n\t\t\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\n\t\t\t\t\t\tgl.uniform1f( uniforms.rotation, sprite.rotation );\n\n\t\t\t\t\t\tgl.uniform1f( uniforms.opacity, sprite.opacity );\n\t\t\t\t\t\tgl.uniform3f( uniforms.color, sprite.color.r, sprite.color.g, sprite.color.b );\n\n\t\t\t\t\t\tstate.setBlending( sprite.blending, sprite.blendEquation, sprite.blendSrc, sprite.blendDst );\n\t\t\t\t\t\trenderer.setTexture2D( sprite.texture, 1 );\n\n\t\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore gl\n\n\t\tstate.enable( gl.CULL_FACE );\n\t\tstate.enable( gl.DEPTH_TEST );\n\t\tstate.buffers.depth.setMask( true );\n\n\t\trenderer.resetGLState();\n\n\t};\n\n\tfunction createProgram( shader ) {\n\n\t\tvar program = gl.createProgram();\n\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\n\n\t\tvar prefix = \"precision \" + renderer.getPrecision() + \" float;\\n\";\n\n\t\tgl.shaderSource( fragmentShader, prefix + shader.fragmentShader );\n\t\tgl.shaderSource( vertexShader, prefix + shader.vertexShader );\n\n\t\tgl.compileShader( fragmentShader );\n\t\tgl.compileShader( vertexShader );\n\n\t\tgl.attachShader( program, fragmentShader );\n\t\tgl.attachShader( program, vertexShader );\n\n\t\tgl.linkProgram( program );\n\n\t\treturn program;\n\n\t}\n\n}\n\n\nexport { LensFlarePlugin };\n","import { Texture } from '../../../textures/Texture';\nimport { Vector3 } from '../../../math/Vector3';\nimport { Quaternion } from '../../../math/Quaternion';\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction SpritePlugin( renderer, sprites ) {\n\n\tvar gl = renderer.context;\n\tvar state = renderer.state;\n\n\tvar vertexBuffer, elementBuffer;\n\tvar program, attributes, uniforms;\n\n\tvar texture;\n\n\t// decompose matrixWorld\n\n\tvar spritePosition = new Vector3();\n\tvar spriteRotation = new Quaternion();\n\tvar spriteScale = new Vector3();\n\n\tfunction init() {\n\n\t\tvar vertices = new Float32Array( [\n\t\t\t- 0.5, - 0.5,  0, 0,\n\t\t\t  0.5, - 0.5,  1, 0,\n\t\t\t  0.5,   0.5,  1, 1,\n\t\t\t- 0.5,   0.5,  0, 1\n\t\t] );\n\n\t\tvar faces = new Uint16Array( [\n\t\t\t0, 1, 2,\n\t\t\t0, 2, 3\n\t\t] );\n\n\t\tvertexBuffer  = gl.createBuffer();\n\t\telementBuffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\n\n\t\tprogram = createProgram();\n\n\t\tattributes = {\n\t\t\tposition:\t\t\tgl.getAttribLocation ( program, 'position' ),\n\t\t\tuv:\t\t\t\t\tgl.getAttribLocation ( program, 'uv' )\n\t\t};\n\n\t\tuniforms = {\n\t\t\tuvOffset:\t\t\tgl.getUniformLocation( program, 'uvOffset' ),\n\t\t\tuvScale:\t\t\tgl.getUniformLocation( program, 'uvScale' ),\n\n\t\t\trotation:\t\t\tgl.getUniformLocation( program, 'rotation' ),\n\t\t\tscale:\t\t\t\tgl.getUniformLocation( program, 'scale' ),\n\n\t\t\tcolor:\t\t\t\tgl.getUniformLocation( program, 'color' ),\n\t\t\tmap:\t\t\t\tgl.getUniformLocation( program, 'map' ),\n\t\t\topacity:\t\t\tgl.getUniformLocation( program, 'opacity' ),\n\n\t\t\tmodelViewMatrix: \tgl.getUniformLocation( program, 'modelViewMatrix' ),\n\t\t\tprojectionMatrix:\tgl.getUniformLocation( program, 'projectionMatrix' ),\n\n\t\t\tfogType:\t\t\tgl.getUniformLocation( program, 'fogType' ),\n\t\t\tfogDensity:\t\t\tgl.getUniformLocation( program, 'fogDensity' ),\n\t\t\tfogNear:\t\t\tgl.getUniformLocation( program, 'fogNear' ),\n\t\t\tfogFar:\t\t\t\tgl.getUniformLocation( program, 'fogFar' ),\n\t\t\tfogColor:\t\t\tgl.getUniformLocation( program, 'fogColor' ),\n\n\t\t\talphaTest:\t\t\tgl.getUniformLocation( program, 'alphaTest' )\n\t\t};\n\n\t\tvar canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\tcanvas.width = 8;\n\t\tcanvas.height = 8;\n\n\t\tvar context = canvas.getContext( '2d' );\n\t\tcontext.fillStyle = 'white';\n\t\tcontext.fillRect( 0, 0, 8, 8 );\n\n\t\ttexture = new Texture( canvas );\n\t\ttexture.needsUpdate = true;\n\n\t}\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( sprites.length === 0 ) return;\n\n\t\t// setup gl\n\n\t\tif ( program === undefined ) {\n\n\t\t\tinit();\n\n\t\t}\n\n\t\tgl.useProgram( program );\n\n\t\tstate.initAttributes();\n\t\tstate.enableAttribute( attributes.position );\n\t\tstate.enableAttribute( attributes.uv );\n\t\tstate.disableUnusedAttributes();\n\n\t\tstate.disable( gl.CULL_FACE );\n\t\tstate.enable( gl.BLEND );\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.vertexAttribPointer( attributes.position, 2, gl.FLOAT, false, 2 * 8, 0 );\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\n\t\tgl.uniformMatrix4fv( uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\n\n\t\tstate.activeTexture( gl.TEXTURE0 );\n\t\tgl.uniform1i( uniforms.map, 0 );\n\n\t\tvar oldFogType = 0;\n\t\tvar sceneFogType = 0;\n\t\tvar fog = scene.fog;\n\n\t\tif ( fog ) {\n\n\t\t\tgl.uniform3f( uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b );\n\n\t\t\tif ( fog.isFog ) {\n\n\t\t\t\tgl.uniform1f( uniforms.fogNear, fog.near );\n\t\t\t\tgl.uniform1f( uniforms.fogFar, fog.far );\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, 1 );\n\t\t\t\toldFogType = 1;\n\t\t\t\tsceneFogType = 1;\n\n\t\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\t\tgl.uniform1f( uniforms.fogDensity, fog.density );\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, 2 );\n\t\t\t\toldFogType = 2;\n\t\t\t\tsceneFogType = 2;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl.uniform1i( uniforms.fogType, 0 );\n\t\t\toldFogType = 0;\n\t\t\tsceneFogType = 0;\n\n\t\t}\n\n\n\t\t// update positions and sort\n\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\n\n\t\t\tvar sprite = sprites[ i ];\n\n\t\t\tsprite.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, sprite.matrixWorld );\n\t\t\tsprite.z = - sprite.modelViewMatrix.elements[ 14 ];\n\n\t\t}\n\n\t\tsprites.sort( painterSortStable );\n\n\t\t// render all sprites\n\n\t\tvar scale = [];\n\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\n\n\t\t\tvar sprite = sprites[ i ];\n\t\t\tvar material = sprite.material;\n\n\t\t\tif ( material.visible === false ) continue;\n\n\t\t\tgl.uniform1f( uniforms.alphaTest, material.alphaTest );\n\t\t\tgl.uniformMatrix4fv( uniforms.modelViewMatrix, false, sprite.modelViewMatrix.elements );\n\n\t\t\tsprite.matrixWorld.decompose( spritePosition, spriteRotation, spriteScale );\n\n\t\t\tscale[ 0 ] = spriteScale.x;\n\t\t\tscale[ 1 ] = spriteScale.y;\n\n\t\t\tvar fogType = 0;\n\n\t\t\tif ( scene.fog && material.fog ) {\n\n\t\t\t\tfogType = sceneFogType;\n\n\t\t\t}\n\n\t\t\tif ( oldFogType !== fogType ) {\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, fogType );\n\t\t\t\toldFogType = fogType;\n\n\t\t\t}\n\n\t\t\tif ( material.map !== null ) {\n\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, material.map.offset.x, material.map.offset.y );\n\t\t\t\tgl.uniform2f( uniforms.uvScale, material.map.repeat.x, material.map.repeat.y );\n\n\t\t\t} else {\n\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, 0, 0 );\n\t\t\t\tgl.uniform2f( uniforms.uvScale, 1, 1 );\n\n\t\t\t}\n\n\t\t\tgl.uniform1f( uniforms.opacity, material.opacity );\n\t\t\tgl.uniform3f( uniforms.color, material.color.r, material.color.g, material.color.b );\n\n\t\t\tgl.uniform1f( uniforms.rotation, material.rotation );\n\t\t\tgl.uniform2fv( uniforms.scale, scale );\n\n\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\n\t\t\tstate.buffers.depth.setTest( material.depthTest );\n\t\t\tstate.buffers.depth.setMask( material.depthWrite );\n\n\t\t\tif ( material.map ) {\n\n\t\t\t\trenderer.setTexture2D( material.map, 0 );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setTexture2D( texture, 0 );\n\n\t\t\t}\n\n\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\t\t}\n\n\t\t// restore gl\n\n\t\tstate.enable( gl.CULL_FACE );\n\n\t\trenderer.resetGLState();\n\n\t};\n\n\tfunction createProgram() {\n\n\t\tvar program = gl.createProgram();\n\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\n\n\t\tgl.shaderSource( vertexShader, [\n\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\n\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform float rotation;',\n\t\t\t'uniform vec2 scale;',\n\t\t\t'uniform vec2 uvOffset;',\n\t\t\t'uniform vec2 uvScale;',\n\n\t\t\t'attribute vec2 position;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'varying vec2 vUV;',\n\n\t\t\t'void main() {',\n\n\t\t\t\t'vUV = uvOffset + uv * uvScale;',\n\n\t\t\t\t'vec2 alignedPosition = position * scale;',\n\n\t\t\t\t'vec2 rotatedPosition;',\n\t\t\t\t'rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;',\n\t\t\t\t'rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;',\n\n\t\t\t\t'vec4 finalPosition;',\n\n\t\t\t\t'finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );',\n\t\t\t\t'finalPosition.xy += rotatedPosition;',\n\t\t\t\t'finalPosition = projectionMatrix * finalPosition;',\n\n\t\t\t\t'gl_Position = finalPosition;',\n\n\t\t\t'}'\n\n\t\t].join( '\\n' ) );\n\n\t\tgl.shaderSource( fragmentShader, [\n\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\n\n\t\t\t'uniform vec3 color;',\n\t\t\t'uniform sampler2D map;',\n\t\t\t'uniform float opacity;',\n\n\t\t\t'uniform int fogType;',\n\t\t\t'uniform vec3 fogColor;',\n\t\t\t'uniform float fogDensity;',\n\t\t\t'uniform float fogNear;',\n\t\t\t'uniform float fogFar;',\n\t\t\t'uniform float alphaTest;',\n\n\t\t\t'varying vec2 vUV;',\n\n\t\t\t'void main() {',\n\n\t\t\t\t'vec4 texture = texture2D( map, vUV );',\n\n\t\t\t\t'if ( texture.a < alphaTest ) discard;',\n\n\t\t\t\t'gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );',\n\n\t\t\t\t'if ( fogType > 0 ) {',\n\n\t\t\t\t\t'float depth = gl_FragCoord.z / gl_FragCoord.w;',\n\t\t\t\t\t'float fogFactor = 0.0;',\n\n\t\t\t\t\t'if ( fogType == 1 ) {',\n\n\t\t\t\t\t\t'fogFactor = smoothstep( fogNear, fogFar, depth );',\n\n\t\t\t\t\t'} else {',\n\n\t\t\t\t\t\t'const float LOG2 = 1.442695;',\n\t\t\t\t\t\t'fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );',\n\t\t\t\t\t\t'fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );',\n\n\t\t\t\t\t'}',\n\n\t\t\t\t\t'gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );',\n\n\t\t\t\t'}',\n\n\t\t\t'}'\n\n\t\t].join( '\\n' ) );\n\n\t\tgl.compileShader( vertexShader );\n\t\tgl.compileShader( fragmentShader );\n\n\t\tgl.attachShader( program, vertexShader );\n\t\tgl.attachShader( program, fragmentShader );\n\n\t\tgl.linkProgram( program );\n\n\t\treturn program;\n\n\t}\n\n\tfunction painterSortStable( a, b ) {\n\n\t\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\t\treturn a.renderOrder - b.renderOrder;\n\n\t\t} else if ( a.z !== b.z ) {\n\n\t\t\treturn b.z - a.z;\n\n\t\t} else {\n\n\t\t\treturn b.id - a.id;\n\n\t\t}\n\n\t}\n\n}\n\n\nexport { SpritePlugin };\n","import { Material } from './Material';\nimport { UniformsUtils } from '../renderers/shaders/UniformsUtils';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  defines: { \"label\" : \"value\" },\n *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\n *\n *  fragmentShader: <string>,\n *  vertexShader: <string>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  lights: <bool>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction ShaderMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'ShaderMaterial';\n\n\tthis.defines = {};\n\tthis.uniforms = {};\n\n\tthis.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\n\tthis.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\n\n\tthis.linewidth = 1;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false; // set to use scene fog\n\tthis.lights = false; // set to use scene lights\n\tthis.clipping = false; // set to use user-defined clipping planes\n\n\tthis.skinning = false; // set to use skinning attribute streams\n\tthis.morphTargets = false; // set to use morph targets\n\tthis.morphNormals = false; // set to use morph normals\n\n\tthis.extensions = {\n\t\tderivatives: false, // set to use derivatives\n\t\tfragDepth: false, // set to use fragment depth values\n\t\tdrawBuffers: false, // set to use draw buffers\n\t\tshaderTextureLOD: false // set to use shader texture LOD\n\t};\n\n\t// When rendered geometry doesn't include these attributes but the material does,\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\tthis.defaultAttributeValues = {\n\t\t'color': [ 1, 1, 1 ],\n\t\t'uv': [ 0, 0 ],\n\t\t'uv2': [ 0, 0 ]\n\t};\n\n\tthis.index0AttributeName = undefined;\n\n\tif ( parameters !== undefined ) {\n\n\t\tif ( parameters.attributes !== undefined ) {\n\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n}\n\nShaderMaterial.prototype = Object.create( Material.prototype );\nShaderMaterial.prototype.constructor = ShaderMaterial;\n\nShaderMaterial.prototype.isShaderMaterial = true;\n\nShaderMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.fragmentShader = source.fragmentShader;\n\tthis.vertexShader = source.vertexShader;\n\n\tthis.uniforms = UniformsUtils.clone( source.uniforms );\n\n\tthis.defines = source.defines;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.lights = source.lights;\n\tthis.clipping = source.clipping;\n\n\tthis.skinning = source.skinning;\n\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\tthis.extensions = source.extensions;\n\n\treturn this;\n\n};\n\nShaderMaterial.prototype.toJSON = function ( meta ) {\n\n\tvar data = Material.prototype.toJSON.call( this, meta );\n\n\tdata.uniforms = this.uniforms;\n\tdata.vertexShader = this.vertexShader;\n\tdata.fragmentShader = this.fragmentShader;\n\n\treturn data;\n\n};\n\n\nexport { ShaderMaterial };\n","import { Material } from './Material';\nimport { BasicDepthPacking } from '../constants';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / https://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nfunction MeshDepthMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDepthMaterial';\n\n\tthis.depthPacking = BasicDepthPacking;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDepthMaterial.prototype = Object.create( Material.prototype );\nMeshDepthMaterial.prototype.constructor = MeshDepthMaterial;\n\nMeshDepthMaterial.prototype.isMeshDepthMaterial = true;\n\nMeshDepthMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.depthPacking = source.depthPacking;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\treturn this;\n\n};\n\n\nexport { MeshDepthMaterial };\n","import { Vector3 } from './Vector3';\nimport { Sphere } from './Sphere';\nimport { Plane } from './Plane';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / http://clara.io\n */\n\nfunction Frustum( p0, p1, p2, p3, p4, p5 ) {\n\n\tthis.planes = [\n\n\t\t( p0 !== undefined ) ? p0 : new Plane(),\n\t\t( p1 !== undefined ) ? p1 : new Plane(),\n\t\t( p2 !== undefined ) ? p2 : new Plane(),\n\t\t( p3 !== undefined ) ? p3 : new Plane(),\n\t\t( p4 !== undefined ) ? p4 : new Plane(),\n\t\t( p5 !== undefined ) ? p5 : new Plane()\n\n\t];\n\n}\n\nObject.assign( Frustum.prototype, {\n\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tvar planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( frustum ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix: function ( m ) {\n\n\t\tvar planes = this.planes;\n\t\tvar me = m.elements;\n\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\tintersectsObject: function () {\n\n\t\tvar sphere = new Sphere();\n\n\t\treturn function intersectsObject( object ) {\n\n\t\t\tvar geometry = object.geometry;\n\n\t\t\tif ( geometry.boundingSphere === null )\n\t\t\t\tgeometry.computeBoundingSphere();\n\n\t\t\tsphere.copy( geometry.boundingSphere )\n\t\t\t\t.applyMatrix4( object.matrixWorld );\n\n\t\t\treturn this.intersectsSphere( sphere );\n\n\t\t};\n\n\t}(),\n\n\tintersectsSprite: function () {\n\n\t\tvar sphere = new Sphere();\n\n\t\treturn function intersectsSprite( sprite ) {\n\n\t\t\tsphere.center.set( 0, 0, 0 );\n\t\t\tsphere.radius = 0.7071067811865476;\n\t\t\tsphere.applyMatrix4( sprite.matrixWorld );\n\n\t\t\treturn this.intersectsSphere( sphere );\n\n\t\t};\n\n\t}(),\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar planes = this.planes;\n\t\tvar center = sphere.center;\n\t\tvar negRadius = - sphere.radius;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tvar distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tintersectsBox: function () {\n\n\t\tvar p1 = new Vector3(),\n\t\t\tp2 = new Vector3();\n\n\t\treturn function intersectsBox( box ) {\n\n\t\t\tvar planes = this.planes;\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\tvar plane = planes[ i ];\n\n\t\t\t\tp1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\n\t\t\t\tp2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t\tp1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\n\t\t\t\tp2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t\tp1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\n\t\t\t\tp2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\t\tvar d1 = plane.distanceToPoint( p1 );\n\t\t\t\tvar d2 = plane.distanceToPoint( p2 );\n\n\t\t\t\t// if both outside plane, no intersection\n\n\t\t\t\tif ( d1 < 0 && d2 < 0 ) {\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t};\n\n\t}(),\n\n\tcontainsPoint: function ( point ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n} );\n\n\nexport { Frustum };\n","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { FrontSide, BackSide, DoubleSide, RGBAFormat, NearestFilter, PCFShadowMap, RGBADepthPacking } from '../../constants';\nimport { WebGLRenderTarget } from '../WebGLRenderTarget';\nimport { ShaderMaterial } from '../../materials/ShaderMaterial';\nimport { UniformsUtils } from '../shaders/UniformsUtils';\nimport { ShaderLib } from '../shaders/ShaderLib';\nimport { MeshDepthMaterial } from '../../materials/MeshDepthMaterial';\nimport { Vector4 } from '../../math/Vector4';\nimport { Vector3 } from '../../math/Vector3';\nimport { Vector2 } from '../../math/Vector2';\nimport { Matrix4 } from '../../math/Matrix4';\nimport { Frustum } from '../../math/Frustum';\n\nfunction WebGLShadowMap( _renderer, _lights, _objects, capabilities ) {\n\n\tvar _gl = _renderer.context,\n\t\t_state = _renderer.state,\n\t\t_frustum = new Frustum(),\n\t\t_projScreenMatrix = new Matrix4(),\n\n\t\t_lightShadows = _lights.shadows,\n\n\t\t_shadowMapSize = new Vector2(),\n\t\t_maxShadowMapSize = new Vector2( capabilities.maxTextureSize, capabilities.maxTextureSize ),\n\n\t\t_lookTarget = new Vector3(),\n\t\t_lightPositionWorld = new Vector3(),\n\n\t\t_MorphingFlag = 1,\n\t\t_SkinningFlag = 2,\n\n\t\t_NumberOfMaterialVariants = ( _MorphingFlag | _SkinningFlag ) + 1,\n\n\t\t_depthMaterials = new Array( _NumberOfMaterialVariants ),\n\t\t_distanceMaterials = new Array( _NumberOfMaterialVariants ),\n\n\t\t_materialCache = {};\n\n\tvar cubeDirections = [\n\t\tnew Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\n\t\tnew Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\n\t];\n\n\tvar cubeUps = [\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\n\t];\n\n\tvar cube2DViewPorts = [\n\t\tnew Vector4(), new Vector4(), new Vector4(),\n\t\tnew Vector4(), new Vector4(), new Vector4()\n\t];\n\n\t// init\n\n\tvar depthMaterialTemplate = new MeshDepthMaterial();\n\tdepthMaterialTemplate.depthPacking = RGBADepthPacking;\n\tdepthMaterialTemplate.clipping = true;\n\n\tvar distanceShader = ShaderLib[ \"distanceRGBA\" ];\n\tvar distanceUniforms = UniformsUtils.clone( distanceShader.uniforms );\n\n\tfor ( var i = 0; i !== _NumberOfMaterialVariants; ++ i ) {\n\n\t\tvar useMorphing = ( i & _MorphingFlag ) !== 0;\n\t\tvar useSkinning = ( i & _SkinningFlag ) !== 0;\n\n\t\tvar depthMaterial = depthMaterialTemplate.clone();\n\t\tdepthMaterial.morphTargets = useMorphing;\n\t\tdepthMaterial.skinning = useSkinning;\n\n\t\t_depthMaterials[ i ] = depthMaterial;\n\n\t\tvar distanceMaterial = new ShaderMaterial( {\n\t\t\tdefines: {\n\t\t\t\t'USE_SHADOWMAP': ''\n\t\t\t},\n\t\t\tuniforms: distanceUniforms,\n\t\t\tvertexShader: distanceShader.vertexShader,\n\t\t\tfragmentShader: distanceShader.fragmentShader,\n\t\t\tmorphTargets: useMorphing,\n\t\t\tskinning: useSkinning,\n\t\t\tclipping: true\n\t\t} );\n\n\t\t_distanceMaterials[ i ] = distanceMaterial;\n\n\t}\n\n\t//\n\n\tvar scope = this;\n\n\tthis.enabled = false;\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis.type = PCFShadowMap;\n\n\tthis.renderReverseSided = true;\n\tthis.renderSingleSided = true;\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( scope.enabled === false ) return;\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\n\n\t\tif ( _lightShadows.length === 0 ) return;\n\n\t\t// Set GL state for depth map.\n\t\t_state.disable( _gl.BLEND );\n\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\n\t\t_state.buffers.depth.setTest( true );\n\t\t_state.setScissorTest( false );\n\n\t\t// render depth map\n\n\t\tvar faceCount, isPointLight;\n\n\t\tfor ( var i = 0, il = _lightShadows.length; i < il; i ++ ) {\n\n\t\t\tvar light = _lightShadows[ i ];\n\t\t\tvar shadow = light.shadow;\n\n\t\t\tif ( shadow === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar shadowCamera = shadow.camera;\n\t\t\tvar shadowMatrix = shadow.matrix;\n\n\t\t\t_lightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\t\tshadowCamera.position.copy( _lightPositionWorld );\n\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\n\t\t\t_shadowMapSize.min( _maxShadowMapSize );\n\n\t\t\tif ( light && light.isPointLight ) {\n\n\t\t\t\tfaceCount = 6;\n\t\t\t\tisPointLight = true;\n\n\t\t\t\tvar vpWidth = _shadowMapSize.x;\n\t\t\t\tvar vpHeight = _shadowMapSize.y;\n\n\t\t\t\t// These viewports map a cube-map onto a 2D texture with the\n\t\t\t\t// following orientation:\n\t\t\t\t//\n\t\t\t\t//  xzXZ\n\t\t\t\t//   y Y\n\t\t\t\t//\n\t\t\t\t// X - Positive x direction\n\t\t\t\t// x - Negative x direction\n\t\t\t\t// Y - Positive y direction\n\t\t\t\t// y - Negative y direction\n\t\t\t\t// Z - Positive z direction\n\t\t\t\t// z - Negative z direction\n\n\t\t\t\t// positive X\n\t\t\t\tcube2DViewPorts[ 0 ].set( vpWidth * 2, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// negative X\n\t\t\t\tcube2DViewPorts[ 1 ].set( 0, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// positive Z\n\t\t\t\tcube2DViewPorts[ 2 ].set( vpWidth * 3, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// negative Z\n\t\t\t\tcube2DViewPorts[ 3 ].set( vpWidth, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// positive Y\n\t\t\t\tcube2DViewPorts[ 4 ].set( vpWidth * 3, 0, vpWidth, vpHeight );\n\t\t\t\t// negative Y\n\t\t\t\tcube2DViewPorts[ 5 ].set( vpWidth, 0, vpWidth, vpHeight );\n\n\t\t\t\t_shadowMapSize.x *= 4.0;\n\t\t\t\t_shadowMapSize.y *= 2.0;\n\n\n\t\t\t\t// for point lights we set the shadow matrix to be a translation-only matrix\n\t\t\t\t// equal to inverse of the light's position\n\n\t\t\t\tshadowMatrix.makeTranslation( - _lightPositionWorld.x, - _lightPositionWorld.y, - _lightPositionWorld.z );\n\n\t\t\t} else {\n\n\t\t\t\tfaceCount = 1;\n\t\t\t\tisPointLight = false;\n\n\t\t\t\t_lookTarget.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tshadowCamera.lookAt( _lookTarget );\n\t\t\t\tshadowCamera.updateMatrixWorld();\n\t\t\t\tshadowCamera.matrixWorldInverse.getInverse( shadowCamera.matrixWorld );\n\n\t\t\t\t// compute shadow matrix\n\n\t\t\t\tshadowMatrix.set(\n\t\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t\t);\n\n\t\t\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\n\t\t\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null ) {\n\n\t\t\t\tvar pars = { minFilter: NearestFilter, magFilter: NearestFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\n\n\t\t\t\tshadowCamera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\tif ( shadow.isSpotLightShadow ) {\n\n\t\t\t\tshadow.update( light );\n\n\t\t\t}\n\n\t\t\tvar shadowMap = shadow.map;\n\n\t\t\t_renderer.setRenderTarget( shadowMap );\n\t\t\t_renderer.clear();\n\n\t\t\t// render shadow map for each cube face (if omni-directional) or\n\t\t\t// run a single pass if not\n\n\t\t\tfor ( var face = 0; face < faceCount; face ++ ) {\n\n\t\t\t\tif ( isPointLight ) {\n\n\t\t\t\t\t_lookTarget.copy( shadowCamera.position );\n\t\t\t\t\t_lookTarget.add( cubeDirections[ face ] );\n\t\t\t\t\tshadowCamera.up.copy( cubeUps[ face ] );\n\t\t\t\t\tshadowCamera.lookAt( _lookTarget );\n\t\t\t\t\tshadowCamera.updateMatrixWorld();\n\t\t\t\t\tshadowCamera.matrixWorldInverse.getInverse( shadowCamera.matrixWorld );\n\n\t\t\t\t\tvar vpDimensions = cube2DViewPorts[ face ];\n\t\t\t\t\t_state.viewport( vpDimensions );\n\n\t\t\t\t}\n\n\t\t\t\t// update camera matrices and frustum\n\n\t\t\t\t_projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\n\n\t\t\t\t// set object matrices & frustum culling\n\n\t\t\t\trenderObject( scene, camera, shadowCamera, isPointLight );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Restore GL state.\n\t\tvar clearColor = _renderer.getClearColor();\n\t\tvar clearAlpha = _renderer.getClearAlpha();\n\t\t_renderer.setClearColor( clearColor, clearAlpha );\n\n\t\tscope.needsUpdate = false;\n\n\t};\n\n\tfunction getDepthMaterial( object, material, isPointLight, lightPositionWorld ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tvar result = null;\n\n\t\tvar materialVariants = _depthMaterials;\n\t\tvar customMaterial = object.customDepthMaterial;\n\n\t\tif ( isPointLight ) {\n\n\t\t\tmaterialVariants = _distanceMaterials;\n\t\t\tcustomMaterial = object.customDistanceMaterial;\n\n\t\t}\n\n\t\tif ( ! customMaterial ) {\n\n\t\t\tvar useMorphing = false;\n\n\t\t\tif ( material.morphTargets ) {\n\n\t\t\t\tif ( geometry && geometry.isBufferGeometry ) {\n\n\t\t\t\t\tuseMorphing = geometry.morphAttributes && geometry.morphAttributes.position && geometry.morphAttributes.position.length > 0;\n\n\t\t\t\t} else if ( geometry && geometry.isGeometry ) {\n\n\t\t\t\t\tuseMorphing = geometry.morphTargets && geometry.morphTargets.length > 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( object.isSkinnedMesh && material.skinning === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:', object );\n\n\t\t\t}\n\n\t\t\tvar useSkinning = object.isSkinnedMesh && material.skinning;\n\n\t\t\tvar variantIndex = 0;\n\n\t\t\tif ( useMorphing ) variantIndex |= _MorphingFlag;\n\t\t\tif ( useSkinning ) variantIndex |= _SkinningFlag;\n\n\t\t\tresult = materialVariants[ variantIndex ];\n\n\t\t} else {\n\n\t\t\tresult = customMaterial;\n\n\t\t}\n\n\t\tif ( _renderer.localClippingEnabled &&\n\t\t\t\tmaterial.clipShadows === true &&\n\t\t\t\tmaterial.clippingPlanes.length !== 0 ) {\n\n\t\t\t// in this case we need a unique material instance reflecting the\n\t\t\t// appropriate state\n\n\t\t\tvar keyA = result.uuid, keyB = material.uuid;\n\n\t\t\tvar materialsForVariant = _materialCache[ keyA ];\n\n\t\t\tif ( materialsForVariant === undefined ) {\n\n\t\t\t\tmaterialsForVariant = {};\n\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\n\n\t\t\t}\n\n\t\t\tvar cachedMaterial = materialsForVariant[ keyB ];\n\n\t\t\tif ( cachedMaterial === undefined ) {\n\n\t\t\t\tcachedMaterial = result.clone();\n\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\n\n\t\t\t}\n\n\t\t\tresult = cachedMaterial;\n\n\t\t}\n\n\t\tresult.visible = material.visible;\n\t\tresult.wireframe = material.wireframe;\n\n\t\tvar side = material.side;\n\n\t\tif ( scope.renderSingleSided && side == DoubleSide ) {\n\n\t\t\tside = FrontSide;\n\n\t\t}\n\n\t\tif ( scope.renderReverseSided ) {\n\n\t\t\tif ( side === FrontSide ) side = BackSide;\n\t\t\telse if ( side === BackSide ) side = FrontSide;\n\n\t\t}\n\n\t\tresult.side = side;\n\n\t\tresult.clipShadows = material.clipShadows;\n\t\tresult.clippingPlanes = material.clippingPlanes;\n\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\n\t\tresult.linewidth = material.linewidth;\n\n\t\tif ( isPointLight && result.uniforms.lightPos !== undefined ) {\n\n\t\t\tresult.uniforms.lightPos.value.copy( lightPositionWorld );\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tfunction renderObject( object, camera, shadowCamera, isPointLight ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tvar visible = object.layers.test( camera.layers );\n\n\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\n\n\t\t\tif ( object.castShadow && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\n\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\n\t\t\t\tvar geometry = _objects.update( object );\n\t\t\t\tvar material = object.material;\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tvar groups = geometry.groups;\n\n\t\t\t\t\tfor ( var k = 0, kl = groups.length; k < kl; k ++ ) {\n\n\t\t\t\t\t\tvar group = groups[ k ];\n\t\t\t\t\t\tvar groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, groupMaterial, isPointLight, _lightPositionWorld );\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, material, isPointLight, _lightPositionWorld );\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( children[ i ], camera, shadowCamera, isPointLight );\n\n\t\t}\n\n\t}\n\n}\n\n\nexport { WebGLShadowMap };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLAttributes( gl ) {\n\n\tvar buffers = {};\n\n\tfunction createBuffer( attribute, bufferType ) {\n\n\t\tvar array = attribute.array;\n\t\tvar usage = attribute.dynamic ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\n\n\t\tvar buffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\t\tgl.bufferData( bufferType, array, usage );\n\n\t\tattribute.onUploadCallback();\n\n\t\tvar type = gl.FLOAT;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\ttype = gl.FLOAT;\n\n\t\t} else if ( array instanceof Float64Array ) {\n\n\t\t\tconsole.warn( \"Unsupported data buffer format: Float64Array\" );\n\n\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\ttype = gl.UNSIGNED_SHORT;\n\n\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\ttype = gl.SHORT;\n\n\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\ttype = gl.UNSIGNED_INT;\n\n\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\ttype = gl.INT;\n\n\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\ttype = gl.BYTE;\n\n\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\ttype = gl.UNSIGNED_BYTE;\n\n\t\t}\n\n\t\treturn {\n\t\t\tbuffer: buffer,\n\t\t\ttype: type,\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\n\t\t\tversion: attribute.version\n\t\t};\n\n\t}\n\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\n\n\t\tvar array = attribute.array;\n\t\tvar updateRange = attribute.updateRange;\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\n\t\tif ( attribute.dynamic === false ) {\n\n\t\t\tgl.bufferData( bufferType, array, gl.STATIC_DRAW );\n\n\t\t} else if ( updateRange.count === - 1 ) {\n\n\t\t\t// Not using update ranges\n\n\t\t\tgl.bufferSubData( bufferType, 0, array );\n\n\t\t} else if ( updateRange.count === 0 ) {\n\n\t\t\tconsole.error( 'THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.' );\n\n\t\t} else {\n\n\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\n\n\t\t\tupdateRange.count = 0; // reset range\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction get( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\treturn buffers[ attribute.uuid ];\n\n\t}\n\n\tfunction remove( attribute ) {\n\n\t\tvar data = buffers[ attribute.uuid ];\n\n\t\tif ( data ) {\n\n\t\t\tgl.deleteBuffer( data.buffer );\n\n\t\t\tdelete buffers[ attribute.uuid ];\n\n\t\t}\n\n\t}\n\n\tfunction update( attribute, bufferType ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tvar data = buffers[ attribute.uuid ];\n\n\t\tif ( data === undefined ) {\n\n\t\t\tbuffers[ attribute.uuid ] = createBuffer( attribute, bufferType );\n\n\t\t} else if ( data.version < attribute.version ) {\n\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\n\n\t\t\tdata.version = attribute.version;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update\n\n\t};\n\n}\n\n\nexport { WebGLAttributes };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction painterSortStable( a, b ) {\n\n\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.program && b.program && a.program !== b.program ) {\n\n\t\treturn a.program.id - b.program.id;\n\n\t} else if ( a.material.id !== b.material.id ) {\n\n\t\treturn a.material.id - b.material.id;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn a.z - b.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction reversePainterSortStable( a, b ) {\n\n\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} if ( a.z !== b.z ) {\n\n\t\treturn b.z - a.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction WebGLRenderList() {\n\n\tvar opaque = [];\n\tvar opaqueLastIndex = - 1;\n\n\tvar transparent = [];\n\tvar transparentLastIndex = - 1;\n\n\tfunction init() {\n\n\t\topaqueLastIndex = - 1;\n\t\ttransparentLastIndex = - 1;\n\n\t}\n\n\tfunction push( object, geometry, material, z, group ) {\n\n\t\tvar array, index;\n\n\t\t// allocate the next position in the appropriate array\n\n\t\tif ( material.transparent ) {\n\n\t\t\tarray = transparent;\n\t\t\tindex = ++ transparentLastIndex;\n\n\t\t} else {\n\n\t\t\tarray = opaque;\n\t\t\tindex = ++ opaqueLastIndex;\n\n\t\t}\n\n\t\t// recycle existing render item or grow the array\n\n\t\tvar renderItem = array[ index ];\n\n\t\tif ( renderItem ) {\n\n\t\t\trenderItem.id = object.id;\n\t\t\trenderItem.object = object;\n\t\t\trenderItem.geometry = geometry;\n\t\t\trenderItem.material = material;\n\t\t\trenderItem.program = material.program;\n\t\t\trenderItem.renderOrder = object.renderOrder;\n\t\t\trenderItem.z = z;\n\t\t\trenderItem.group = group;\n\n\t\t} else {\n\n\t\t\trenderItem = {\n\t\t\t\tid: object.id,\n\t\t\t\tobject: object,\n\t\t\t\tgeometry: geometry,\n\t\t\t\tmaterial: material,\n\t\t\t\tprogram: material.program,\n\t\t\t\trenderOrder: object.renderOrder,\n\t\t\t\tz: z,\n\t\t\t\tgroup: group\n\t\t\t};\n\n\t\t\t// assert( index === array.length );\n\t\t\tarray.push( renderItem );\n\n\t\t}\n\n\t}\n\n\tfunction finish() {\n\n\t\topaque.length = opaqueLastIndex + 1;\n\t\ttransparent.length = transparentLastIndex + 1;\n\n\t}\n\n\tfunction sort() {\n\n\t\topaque.sort( painterSortStable );\n\t\ttransparent.sort( reversePainterSortStable );\n\n\t}\n\n\treturn {\n\t\topaque: opaque,\n\t\ttransparent: transparent,\n\n\t\tinit: init,\n\t\tpush: push,\n\t\tfinish: finish,\n\n\t\tsort: sort\n\t};\n\n}\n\nfunction WebGLRenderLists() {\n\n\tvar lists = {};\n\n\tfunction get( scene, camera ) {\n\n\t\tvar hash = scene.id + ',' + camera.id;\n\t\tvar list = lists[ hash ];\n\n\t\tif ( list === undefined ) {\n\n\t\t\t// console.log( 'THREE.WebGLRenderLists:', hash );\n\n\t\t\tlist = new WebGLRenderList();\n\t\t\tlists[ hash ] = list;\n\n\t\t}\n\n\t\treturn list;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tlists = {};\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLRenderLists };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLIndexedBufferRenderer( gl, extensions, infoRender ) {\n\n\tvar mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tvar type, size;\n\n\tfunction setIndex( index ) {\n\n\t\tif ( index.array instanceof Uint32Array && extensions.get( 'OES_element_index_uint' ) ) {\n\n\t\t\ttype = gl.UNSIGNED_INT;\n\t\t\tsize = 4;\n\n\t\t} else if ( index.array instanceof Uint16Array ) {\n\n\t\t\ttype = gl.UNSIGNED_SHORT;\n\t\t\tsize = 2;\n\n\t\t} else {\n\n\t\t\ttype = gl.UNSIGNED_BYTE;\n\t\t\tsize = 1;\n\n\t\t}\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawElements( mode, count, type, start * size );\n\n\t\tinfoRender.calls ++;\n\t\tinfoRender.vertices += count;\n\n\t\tif ( mode === gl.TRIANGLES ) infoRender.faces += count / 3;\n\n\t}\n\n\tfunction renderInstances( geometry, start, count ) {\n\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\tif ( extension === null ) {\n\n\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\textension.drawElementsInstancedANGLE( mode, count, type, start * size, geometry.maxInstancedCount );\n\n\t\tinfoRender.calls ++;\n\t\tinfoRender.vertices += count * geometry.maxInstancedCount;\n\n\t\tif ( mode === gl.TRIANGLES ) infoRender.faces += geometry.maxInstancedCount * count / 3;\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.setIndex = setIndex;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\n\nexport { WebGLIndexedBufferRenderer };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLBufferRenderer( gl, extensions, infoRender ) {\n\n\tvar mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawArrays( mode, start, count );\n\n\t\tinfoRender.calls ++;\n\t\tinfoRender.vertices += count;\n\n\t\tif ( mode === gl.TRIANGLES ) infoRender.faces += count / 3;\n\n\t}\n\n\tfunction renderInstances( geometry, start, count ) {\n\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\tif ( extension === null ) {\n\n\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar position = geometry.attributes.position;\n\n\t\tif ( position.isInterleavedBufferAttribute ) {\n\n\t\t\tcount = position.data.count;\n\n\t\t\textension.drawArraysInstancedANGLE( mode, 0, count, geometry.maxInstancedCount );\n\n\t\t} else {\n\n\t\t\textension.drawArraysInstancedANGLE( mode, start, count, geometry.maxInstancedCount );\n\n\t\t}\n\n\t\tinfoRender.calls ++;\n\t\tinfoRender.vertices += count * geometry.maxInstancedCount;\n\n\t\tif ( mode === gl.TRIANGLES ) infoRender.faces += geometry.maxInstancedCount * count / 3;\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\n\nexport { WebGLBufferRenderer };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Uint16BufferAttribute, Uint32BufferAttribute } from '../../core/BufferAttribute';\nimport { BufferGeometry } from '../../core/BufferGeometry';\nimport { arrayMax } from '../../utils';\n\nfunction WebGLGeometries( gl, attributes, infoMemory ) {\n\n\tvar geometries = {};\n\tvar wireframeAttributes = {};\n\n\tfunction onGeometryDispose( event ) {\n\n\t\tvar geometry = event.target;\n\t\tvar buffergeometry = geometries[ geometry.id ];\n\n\t\tif ( buffergeometry.index !== null ) {\n\n\t\t\tattributes.remove( buffergeometry.index );\n\n\t\t}\n\n\t\tfor ( var name in buffergeometry.attributes ) {\n\n\t\t\tattributes.remove( buffergeometry.attributes[ name ] );\n\n\t\t}\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tdelete geometries[ geometry.id ];\n\n\t\t// TODO Remove duplicate code\n\n\t\tvar attribute = wireframeAttributes[ geometry.id ];\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\tdelete wireframeAttributes[ geometry.id ];\n\n\t\t}\n\n\t\tattribute = wireframeAttributes[ buffergeometry.id ];\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\tdelete wireframeAttributes[ buffergeometry.id ];\n\n\t\t}\n\n\t\t//\n\n\t\tinfoMemory.geometries --;\n\n\t}\n\n\tfunction get( object, geometry ) {\n\n\t\tvar buffergeometry = geometries[ geometry.id ];\n\n\t\tif ( buffergeometry ) return buffergeometry;\n\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tbuffergeometry = geometry;\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tif ( geometry._bufferGeometry === undefined ) {\n\n\t\t\t\tgeometry._bufferGeometry = new BufferGeometry().setFromObject( object );\n\n\t\t\t}\n\n\t\t\tbuffergeometry = geometry._bufferGeometry;\n\n\t\t}\n\n\t\tgeometries[ geometry.id ] = buffergeometry;\n\n\t\tinfoMemory.geometries ++;\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction update( geometry ) {\n\n\t\tvar index = geometry.index;\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattributes.update( index, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\t}\n\n\t\tfor ( var name in geometryAttributes ) {\n\n\t\t\tattributes.update( geometryAttributes[ name ], gl.ARRAY_BUFFER );\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tvar morphAttributes = geometry.morphAttributes;\n\n\t\tfor ( var name in morphAttributes ) {\n\n\t\t\tvar array = morphAttributes[ name ];\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tattributes.update( array[ i ], gl.ARRAY_BUFFER );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction getWireframeAttribute( geometry ) {\n\n\t\tvar attribute = wireframeAttributes[ geometry.id ];\n\n\t\tif ( attribute ) return attribute;\n\n\t\tvar indices = [];\n\n\t\tvar geometryIndex = geometry.index;\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\t// console.time( 'wireframe' );\n\n\t\tif ( geometryIndex !== null ) {\n\n\t\t\tvar array = geometryIndex.array;\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\tvar a = array[ i + 0 ];\n\t\t\t\tvar b = array[ i + 1 ];\n\t\t\t\tvar c = array[ i + 2 ];\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar array = geometryAttributes.position.array;\n\n\t\t\tfor ( var i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\n\n\t\t\t\tvar a = i + 0;\n\t\t\t\tvar b = i + 1;\n\t\t\t\tvar c = i + 2;\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// console.timeEnd( 'wireframe' );\n\n\t\tattribute = new ( arrayMax( indices ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\n\n\t\tattributes.update( attribute, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\twireframeAttributes[ geometry.id ] = attribute;\n\n\t\treturn attribute;\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tupdate: update,\n\n\t\tgetWireframeAttribute: getWireframeAttribute\n\n\t};\n\n}\n\n\nexport { WebGLGeometries };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Color } from '../../math/Color';\nimport { Vector3 } from '../../math/Vector3';\nimport { Vector2 } from '../../math/Vector2';\n\nfunction WebGLLights() {\n\n\tvar lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tvar uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\n\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tconeCos: 0,\n\t\t\t\t\t\tpenumbraCos: 0,\n\t\t\t\t\t\tdecay: 0,\n\n\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tdecay: 0,\n\n\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tskyColor: new Color(),\n\t\t\t\t\t\tgroundColor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RectAreaLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\thalfWidth: new Vector3(),\n\t\t\t\t\t\thalfHeight: new Vector3()\n\t\t\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\n\nexport { WebGLLights };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLObjects( gl, geometries, infoRender ) {\n\n\tvar updateList = {};\n\n\tfunction update( object ) {\n\n\t\tvar frame = infoRender.frame;\n\n\t\tvar geometry = object.geometry;\n\t\tvar buffergeometry = geometries.get( object, geometry );\n\n\t\t// Update once per frame\n\n\t\tif ( updateList[ buffergeometry.id ] !== frame ) {\n\n\t\t\tif ( geometry.isGeometry ) {\n\n\t\t\t\tbuffergeometry.updateFromObject( object );\n\n\t\t\t}\n\n\t\t\tgeometries.update( buffergeometry );\n\n\t\t\tupdateList[ buffergeometry.id ] = frame;\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction clear() {\n\n\t\tupdateList = {};\n\n\t}\n\n\treturn {\n\n\t\tupdate: update,\n\t\tclear: clear\n\n\t};\n\n}\n\n\nexport { WebGLObjects };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction addLineNumbers( string ) {\n\n\tvar lines = string.split( '\\n' );\n\n\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\n\n\t}\n\n\treturn lines.join( '\\n' );\n\n}\n\nfunction WebGLShader( gl, type, string ) {\n\n\tvar shader = gl.createShader( type );\n\n\tgl.shaderSource( shader, string );\n\tgl.compileShader( shader );\n\n\tif ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\n\n\t\tconsole.error( 'THREE.WebGLShader: Shader couldn\\'t compile.' );\n\n\t}\n\n\tif ( gl.getShaderInfoLog( shader ) !== '' ) {\n\n\t\tconsole.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', type === gl.VERTEX_SHADER ? 'vertex' : 'fragment', gl.getShaderInfoLog( shader ), addLineNumbers( string ) );\n\n\t}\n\n\t// --enable-privileged-webgl-extension\n\t// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\treturn shader;\n\n}\n\n\nexport { WebGLShader };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { WebGLUniforms } from './WebGLUniforms';\nimport { WebGLShader } from './WebGLShader';\nimport { ShaderChunk } from '../shaders/ShaderChunk';\nimport { NoToneMapping, AddOperation, MixOperation, MultiplyOperation, EquirectangularRefractionMapping, CubeRefractionMapping, SphericalReflectionMapping, EquirectangularReflectionMapping, CubeUVRefractionMapping, CubeUVReflectionMapping, CubeReflectionMapping, PCFSoftShadowMap, PCFShadowMap, CineonToneMapping, Uncharted2ToneMapping, ReinhardToneMapping, LinearToneMapping, GammaEncoding, RGBDEncoding, RGBM16Encoding, RGBM7Encoding, RGBEEncoding, sRGBEncoding, LinearEncoding } from '../../constants';\n\nvar programIdCount = 0;\n\nfunction getEncodingComponents( encoding ) {\n\n\tswitch ( encoding ) {\n\n\t\tcase LinearEncoding:\n\t\t\treturn [ 'Linear','( value )' ];\n\t\tcase sRGBEncoding:\n\t\t\treturn [ 'sRGB','( value )' ];\n\t\tcase RGBEEncoding:\n\t\t\treturn [ 'RGBE','( value )' ];\n\t\tcase RGBM7Encoding:\n\t\t\treturn [ 'RGBM','( value, 7.0 )' ];\n\t\tcase RGBM16Encoding:\n\t\t\treturn [ 'RGBM','( value, 16.0 )' ];\n\t\tcase RGBDEncoding:\n\t\t\treturn [ 'RGBD','( value, 256.0 )' ];\n\t\tcase GammaEncoding:\n\t\t\treturn [ 'Gamma','( value, float( GAMMA_FACTOR ) )' ];\n\t\tdefault:\n\t\t\tthrow new Error( 'unsupported encoding: ' + encoding );\n\n\t}\n\n}\n\nfunction getTexelDecodingFunction( functionName, encoding ) {\n\n\tvar components = getEncodingComponents( encoding );\n\treturn \"vec4 \" + functionName + \"( vec4 value ) { return \" + components[ 0 ] + \"ToLinear\" + components[ 1 ] + \"; }\";\n\n}\n\nfunction getTexelEncodingFunction( functionName, encoding ) {\n\n\tvar components = getEncodingComponents( encoding );\n\treturn \"vec4 \" + functionName + \"( vec4 value ) { return LinearTo\" + components[ 0 ] + components[ 1 ] + \"; }\";\n\n}\n\nfunction getToneMappingFunction( functionName, toneMapping ) {\n\n\tvar toneMappingName;\n\n\tswitch ( toneMapping ) {\n\n\t\tcase LinearToneMapping:\n\t\t\ttoneMappingName = \"Linear\";\n\t\t\tbreak;\n\n\t\tcase ReinhardToneMapping:\n\t\t\ttoneMappingName = \"Reinhard\";\n\t\t\tbreak;\n\n\t\tcase Uncharted2ToneMapping:\n\t\t\ttoneMappingName = \"Uncharted2\";\n\t\t\tbreak;\n\n\t\tcase CineonToneMapping:\n\t\t\ttoneMappingName = \"OptimizedCineon\";\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tthrow new Error( 'unsupported toneMapping: ' + toneMapping );\n\n\t}\n\n\treturn \"vec3 \" + functionName + \"( vec3 color ) { return \" + toneMappingName + \"ToneMapping( color ); }\";\n\n}\n\nfunction generateExtensions( extensions, parameters, rendererExtensions ) {\n\n\textensions = extensions || {};\n\n\tvar chunks = [\n\t\t( extensions.derivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.normalMap || parameters.flatShading ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t( extensions.fragDepth || parameters.logarithmicDepthBuffer ) && rendererExtensions.get( 'EXT_frag_depth' ) ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t( extensions.drawBuffers ) && rendererExtensions.get( 'WEBGL_draw_buffers' ) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t( extensions.shaderTextureLOD || parameters.envMap ) && rendererExtensions.get( 'EXT_shader_texture_lod' ) ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n\t];\n\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n}\n\nfunction generateDefines( defines ) {\n\n\tvar chunks = [];\n\n\tfor ( var name in defines ) {\n\n\t\tvar value = defines[ name ];\n\n\t\tif ( value === false ) continue;\n\n\t\tchunks.push( '#define ' + name + ' ' + value );\n\n\t}\n\n\treturn chunks.join( '\\n' );\n\n}\n\nfunction fetchAttributeLocations( gl, program, identifiers ) {\n\n\tvar attributes = {};\n\n\tvar n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\n\n\tfor ( var i = 0; i < n; i ++ ) {\n\n\t\tvar info = gl.getActiveAttrib( program, i );\n\t\tvar name = info.name;\n\n\t\t// console.log(\"THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:\", name, i );\n\n\t\tattributes[ name ] = gl.getAttribLocation( program, name );\n\n\t}\n\n\treturn attributes;\n\n}\n\nfunction filterEmptyLine( string ) {\n\n\treturn string !== '';\n\n}\n\nfunction replaceLightNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights );\n\n}\n\nfunction parseIncludes( string ) {\n\n\tvar pattern = /^[ \\t]*#include +<([\\w\\d.]+)>/gm;\n\n\tfunction replace( match, include ) {\n\n\t\tvar replace = ShaderChunk[ include ];\n\n\t\tif ( replace === undefined ) {\n\n\t\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\n\n\t\t}\n\n\t\treturn parseIncludes( replace );\n\n\t}\n\n\treturn string.replace( pattern, replace );\n\n}\n\nfunction unrollLoops( string ) {\n\n\tvar pattern = /for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\n\n\tfunction replace( match, start, end, snippet ) {\n\n\t\tvar unroll = '';\n\n\t\tfor ( var i = parseInt( start ); i < parseInt( end ); i ++ ) {\n\n\t\t\tunroll += snippet.replace( /\\[ i \\]/g, '[ ' + i + ' ]' );\n\n\t\t}\n\n\t\treturn unroll;\n\n\t}\n\n\treturn string.replace( pattern, replace );\n\n}\n\nfunction WebGLProgram( renderer, code, material, parameters ) {\n\n\tvar gl = renderer.context;\n\n\tvar extensions = material.extensions;\n\tvar defines = material.defines;\n\n\tvar vertexShader = material.__webglShader.vertexShader;\n\tvar fragmentShader = material.__webglShader.fragmentShader;\n\n\tvar shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\tif ( parameters.shadowMapType === PCFShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t}\n\n\tvar envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\tvar envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\tvar envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( material.envMap.mapping ) {\n\n\t\t\tcase CubeReflectionMapping:\n\t\t\tcase CubeRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\tbreak;\n\n\t\t\tcase CubeUVReflectionMapping:\n\t\t\tcase CubeUVRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n\t\t\t\tbreak;\n\n\t\t\tcase EquirectangularReflectionMapping:\n\t\t\tcase EquirectangularRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\n\t\t\t\tbreak;\n\n\t\t\tcase SphericalReflectionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tswitch ( material.envMap.mapping ) {\n\n\t\t\tcase CubeRefractionMapping:\n\t\t\tcase EquirectangularRefractionMapping:\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tswitch ( material.combine ) {\n\n\t\t\tcase MultiplyOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\tbreak;\n\n\t\t\tcase MixOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\tbreak;\n\n\t\t\tcase AddOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tvar gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\n\n\t// console.log( 'building new program ' );\n\n\t//\n\n\tvar customExtensions = generateExtensions( extensions, parameters, renderer.extensions );\n\n\tvar customDefines = generateDefines( defines );\n\n\t//\n\n\tvar program = gl.createProgram();\n\n\tvar prefixVertex, prefixFragment;\n\n\tif ( material.isRawShaderMaterial ) {\n\n\t\tprefixVertex = [\n\n\t\t\tcustomDefines,\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\t\t\tcustomDefines,\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t} else {\n\n\t\tprefixVertex = [\n\n\t\t\t'precision ' + parameters.precision + ' float;',\n\t\t\t'precision ' + parameters.precision + ' int;',\n\n\t\t\t'#define SHADER_NAME ' + material.__webglShader.name,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t'#define MAX_BONES ' + parameters.maxBones,\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\n\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\t'#define NUM_CLIPPING_PLANES ' + parameters.numClippingPlanes,\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\n\t\t\t'attribute vec3 position;',\n\t\t\t'attribute vec3 normal;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'#ifdef USE_COLOR',\n\n\t\t\t'\tattribute vec3 color;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_MORPHTARGETS',\n\n\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t'\t#else',\n\n\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t'\t#endif',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t'#endif',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\n\t\t\t'precision ' + parameters.precision + ' float;',\n\t\t\t'precision ' + parameters.precision + ' int;',\n\n\t\t\t'#define SHADER_NAME ' + material.__webglShader.name,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest : '',\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\t'#define NUM_CLIPPING_PLANES ' + parameters.numClippingPlanes,\n\t\t\t'#define UNION_CLIPPING_PLANES ' + (parameters.numClippingPlanes - parameters.numClipIntersection),\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.premultipliedAlpha ? \"#define PREMULTIPLIED_ALPHA\" : '',\n\n\t\t\tparameters.physicallyCorrectLights ? \"#define PHYSICALLY_CORRECT_LIGHTS\" : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\tparameters.envMap && renderer.extensions.get( 'EXT_shader_texture_lod' ) ? '#define TEXTURE_LOD_EXT' : '',\n\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? \"#define TONE_MAPPING\" : '',\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '',  // this code is required here because it is used by the toneMapping() function defined below\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( \"toneMapping\", parameters.toneMapping ) : '',\n\n\t\t\tparameters.dithering ? '#define DITHERING' : '',\n\n\t\t\t( parameters.outputEncoding || parameters.mapEncoding || parameters.envMapEncoding || parameters.emissiveMapEncoding ) ? ShaderChunk[ 'encodings_pars_fragment' ] : '', // this code is required here because it is used by the various encoding/decoding function defined below\n\t\t\tparameters.mapEncoding ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\n\t\t\tparameters.envMapEncoding ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\n\t\t\tparameters.emissiveMapEncoding ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\n\t\t\tparameters.outputEncoding ? getTexelEncodingFunction( \"linearToOutputTexel\", parameters.outputEncoding ) : '',\n\n\t\t\tparameters.depthPacking ? \"#define DEPTH_PACKING \" + material.depthPacking : '',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t}\n\n\tvertexShader = parseIncludes( vertexShader, parameters );\n\tvertexShader = replaceLightNums( vertexShader, parameters );\n\n\tfragmentShader = parseIncludes( fragmentShader, parameters );\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\n\n\tif ( ! material.isShaderMaterial ) {\n\n\t\tvertexShader = unrollLoops( vertexShader );\n\t\tfragmentShader = unrollLoops( fragmentShader );\n\n\t}\n\n\tvar vertexGlsl = prefixVertex + vertexShader;\n\tvar fragmentGlsl = prefixFragment + fragmentShader;\n\n\t// console.log( '*VERTEX*', vertexGlsl );\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\tvar glVertexShader = WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\n\tvar glFragmentShader = WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\n\n\tgl.attachShader( program, glVertexShader );\n\tgl.attachShader( program, glFragmentShader );\n\n\t// Force a particular attribute to index 0.\n\n\tif ( material.index0AttributeName !== undefined ) {\n\n\t\tgl.bindAttribLocation( program, 0, material.index0AttributeName );\n\n\t} else if ( parameters.morphTargets === true ) {\n\n\t\t// programs with morphTargets displace position out of attribute 0\n\t\tgl.bindAttribLocation( program, 0, 'position' );\n\n\t}\n\n\tgl.linkProgram( program );\n\n\tvar programLog = gl.getProgramInfoLog( program );\n\tvar vertexLog = gl.getShaderInfoLog( glVertexShader );\n\tvar fragmentLog = gl.getShaderInfoLog( glFragmentShader );\n\n\tvar runnable = true;\n\tvar haveDiagnostics = true;\n\n\t// console.log( '**VERTEX**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glVertexShader ) );\n\t// console.log( '**FRAGMENT**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glFragmentShader ) );\n\n\tif ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\n\n\t\trunnable = false;\n\n\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'gl.getProgramInfoLog', programLog, vertexLog, fragmentLog );\n\n\t} else if ( programLog !== '' ) {\n\n\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\n\n\t} else if ( vertexLog === '' || fragmentLog === '' ) {\n\n\t\thaveDiagnostics = false;\n\n\t}\n\n\tif ( haveDiagnostics ) {\n\n\t\tthis.diagnostics = {\n\n\t\t\trunnable: runnable,\n\t\t\tmaterial: material,\n\n\t\t\tprogramLog: programLog,\n\n\t\t\tvertexShader: {\n\n\t\t\t\tlog: vertexLog,\n\t\t\t\tprefix: prefixVertex\n\n\t\t\t},\n\n\t\t\tfragmentShader: {\n\n\t\t\t\tlog: fragmentLog,\n\t\t\t\tprefix: prefixFragment\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t// clean up\n\n\tgl.deleteShader( glVertexShader );\n\tgl.deleteShader( glFragmentShader );\n\n\t// set up caching for uniform locations\n\n\tvar cachedUniforms;\n\n\tthis.getUniforms = function() {\n\n\t\tif ( cachedUniforms === undefined ) {\n\n\t\t\tcachedUniforms =\n\t\t\t\tnew WebGLUniforms( gl, program, renderer );\n\n\t\t}\n\n\t\treturn cachedUniforms;\n\n\t};\n\n\t// set up caching for attribute locations\n\n\tvar cachedAttributes;\n\n\tthis.getAttributes = function() {\n\n\t\tif ( cachedAttributes === undefined ) {\n\n\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\n\n\t\t}\n\n\t\treturn cachedAttributes;\n\n\t};\n\n\t// free resource\n\n\tthis.destroy = function() {\n\n\t\tgl.deleteProgram( program );\n\t\tthis.program = undefined;\n\n\t};\n\n\t// DEPRECATED\n\n\tObject.defineProperties( this, {\n\n\t\tuniforms: {\n\t\t\tget: function() {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .uniforms is now .getUniforms().' );\n\t\t\t\treturn this.getUniforms();\n\n\t\t\t}\n\t\t},\n\n\t\tattributes: {\n\t\t\tget: function() {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .attributes is now .getAttributes().' );\n\t\t\t\treturn this.getAttributes();\n\n\t\t\t}\n\t\t}\n\n\t} );\n\n\n\t//\n\n\tthis.id = programIdCount ++;\n\tthis.code = code;\n\tthis.usedTimes = 1;\n\tthis.program = program;\n\tthis.vertexShader = glVertexShader;\n\tthis.fragmentShader = glFragmentShader;\n\n\treturn this;\n\n}\n\nexport { WebGLProgram };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { BackSide, DoubleSide, FlatShading, CubeUVRefractionMapping, CubeUVReflectionMapping, GammaEncoding, LinearEncoding } from '../../constants';\nimport { WebGLProgram } from './WebGLProgram';\n\nfunction WebGLPrograms( renderer, capabilities ) {\n\n\tvar programs = [];\n\n\tvar shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tMeshToonMaterial: 'phong',\n\t\tMeshStandardMaterial: 'physical',\n\t\tMeshPhysicalMaterial: 'physical',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointsMaterial: 'points'\n\t};\n\n\tvar parameterNames = [\n\t\t\"precision\", \"supportsVertexTextures\", \"map\", \"mapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\",\n\t\t\"lightMap\", \"aoMap\", \"emissiveMap\", \"emissiveMapEncoding\", \"bumpMap\", \"normalMap\", \"displacementMap\", \"specularMap\",\n\t\t\"roughnessMap\", \"metalnessMap\", \"gradientMap\",\n\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"fog\", \"useFog\", \"fogExp\",\n\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\n\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\n\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\n\t\t\"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\", \"numRectAreaLights\",\n\t\t\"shadowMapEnabled\", \"shadowMapType\", \"toneMapping\", 'physicallyCorrectLights',\n\t\t\"alphaTest\", \"doubleSided\", \"flipSided\", \"numClippingPlanes\", \"numClipIntersection\", \"depthPacking\", \"dithering\"\n\t];\n\n\n\tfunction allocateBones( object ) {\n\n\t\tvar skeleton = object.skeleton;\n\t\tvar bones = skeleton.bones;\n\n\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\treturn 1024;\n\n\t\t} else {\n\n\t\t\t// default for when object is not specified\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\n\t\t\t//\n\t\t\t//  - leave some extra space for other uniforms\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\n\t\t\t//    (up to 54 should be safe)\n\n\t\t\tvar nVertexUniforms = capabilities.maxVertexUniforms;\n\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\n\n\t\t\tvar maxBones = Math.min( nVertexMatrices, bones.length );\n\n\t\t\tif ( maxBones < bones.length ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Skeleton has ' + bones.length + ' bones. This GPU supports ' + maxBones + '.' );\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\treturn maxBones;\n\n\t\t}\n\n\t}\n\n\tfunction getTextureEncodingFromMap( map, gammaOverrideLinear ) {\n\n\t\tvar encoding;\n\n\t\tif ( ! map ) {\n\n\t\t\tencoding = LinearEncoding;\n\n\t\t} else if ( map.isTexture ) {\n\n\t\t\tencoding = map.encoding;\n\n\t\t} else if ( map.isWebGLRenderTarget ) {\n\n\t\t\tconsole.warn( \"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\tencoding = map.texture.encoding;\n\n\t\t}\n\n\t\t// add backwards compatibility for WebGLRenderer.gammaInput/gammaOutput parameter, should probably be removed at some point.\n\t\tif ( encoding === LinearEncoding && gammaOverrideLinear ) {\n\n\t\t\tencoding = GammaEncoding;\n\n\t\t}\n\n\t\treturn encoding;\n\n\t}\n\n\tthis.getParameters = function ( material, lights, fog, nClipPlanes, nClipIntersection, object ) {\n\n\t\tvar shaderID = shaderIDs[ material.type ];\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tvar maxBones = object.isSkinnedMesh ? allocateBones( object ) : 0;\n\t\tvar precision = renderer.getPrecision();\n\n\t\tif ( material.precision !== null ) {\n\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\n\n\t\t\tif ( precision !== material.precision ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar currentRenderTarget = renderer.getRenderTarget();\n\n\t\tvar parameters = {\n\n\t\t\tshaderID: shaderID,\n\n\t\t\tprecision: precision,\n\t\t\tsupportsVertexTextures: capabilities.vertexTextures,\n\t\t\toutputEncoding: getTextureEncodingFromMap( ( ! currentRenderTarget ) ? null : currentRenderTarget.texture, renderer.gammaOutput ),\n\t\t\tmap: !! material.map,\n\t\t\tmapEncoding: getTextureEncodingFromMap( material.map, renderer.gammaInput ),\n\t\t\tenvMap: !! material.envMap,\n\t\t\tenvMapMode: material.envMap && material.envMap.mapping,\n\t\t\tenvMapEncoding: getTextureEncodingFromMap( material.envMap, renderer.gammaInput ),\n\t\t\tenvMapCubeUV: ( !! material.envMap ) && ( ( material.envMap.mapping === CubeUVReflectionMapping ) || ( material.envMap.mapping === CubeUVRefractionMapping ) ),\n\t\t\tlightMap: !! material.lightMap,\n\t\t\taoMap: !! material.aoMap,\n\t\t\temissiveMap: !! material.emissiveMap,\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap, renderer.gammaInput ),\n\t\t\tbumpMap: !! material.bumpMap,\n\t\t\tnormalMap: !! material.normalMap,\n\t\t\tdisplacementMap: !! material.displacementMap,\n\t\t\troughnessMap: !! material.roughnessMap,\n\t\t\tmetalnessMap: !! material.metalnessMap,\n\t\t\tspecularMap: !! material.specularMap,\n\t\t\talphaMap: !! material.alphaMap,\n\n\t\t\tgradientMap: !! material.gradientMap,\n\n\t\t\tcombine: material.combine,\n\n\t\t\tvertexColors: material.vertexColors,\n\n\t\t\tfog: !! fog,\n\t\t\tuseFog: material.fog,\n\t\t\tfogExp: ( fog && fog.isFogExp2 ),\n\n\t\t\tflatShading: material.shading === FlatShading,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: capabilities.logarithmicDepthBuffer,\n\n\t\t\tskinning: material.skinning && maxBones > 0,\n\t\t\tmaxBones: maxBones,\n\t\t\tuseVertexTexture: capabilities.floatVertexTextures,\n\n\t\t\tmorphTargets: material.morphTargets,\n\t\t\tmorphNormals: material.morphNormals,\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\n\n\t\t\tnumDirLights: lights.directional.length,\n\t\t\tnumPointLights: lights.point.length,\n\t\t\tnumSpotLights: lights.spot.length,\n\t\t\tnumRectAreaLights: lights.rectArea.length,\n\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\tnumClippingPlanes: nClipPlanes,\n\t\t\tnumClipIntersection: nClipIntersection,\n\n\t\t\tdithering: material.dithering,\n\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && object.receiveShadow && lights.shadows.length > 0,\n\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\ttoneMapping: renderer.toneMapping,\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\n\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\talphaTest: material.alphaTest,\n\t\t\tdoubleSided: material.side === DoubleSide,\n\t\t\tflipSided: material.side === BackSide,\n\n\t\t\tdepthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false\n\n\t\t};\n\n\t\treturn parameters;\n\n\t};\n\n\tthis.getProgramCode = function ( material, parameters ) {\n\n\t\tvar array = [];\n\n\t\tif ( parameters.shaderID ) {\n\n\t\t\tarray.push( parameters.shaderID );\n\n\t\t} else {\n\n\t\t\tarray.push( material.fragmentShader );\n\t\t\tarray.push( material.vertexShader );\n\n\t\t}\n\n\t\tif ( material.defines !== undefined ) {\n\n\t\t\tfor ( var name in material.defines ) {\n\n\t\t\t\tarray.push( name );\n\t\t\t\tarray.push( material.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var i = 0; i < parameterNames.length; i ++ ) {\n\n\t\t\tarray.push( parameters[ parameterNames[ i ] ] );\n\n\t\t}\n\n\t\treturn array.join();\n\n\t};\n\n\tthis.acquireProgram = function ( material, parameters, code ) {\n\n\t\tvar program;\n\n\t\t// Check if code has been already compiled\n\t\tfor ( var p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t\tvar programInfo = programs[ p ];\n\n\t\t\tif ( programInfo.code === code ) {\n\n\t\t\t\tprogram = programInfo;\n\t\t\t\t++ program.usedTimes;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new WebGLProgram( renderer, code, material, parameters );\n\t\t\tprograms.push( program );\n\n\t\t}\n\n\t\treturn program;\n\n\t};\n\n\tthis.releaseProgram = function ( program ) {\n\n\t\tif ( -- program.usedTimes === 0 ) {\n\n\t\t\t// Remove from unordered set\n\t\t\tvar i = programs.indexOf( program );\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\n\t\t\tprograms.pop();\n\n\t\t\t// Free WebGL resources\n\t\t\tprogram.destroy();\n\n\t\t}\n\n\t};\n\n\t// Exposed for resource monitoring & error feedback via renderer.info:\n\tthis.programs = programs;\n\n}\n\n\nexport { WebGLPrograms };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { LinearFilter, NearestFilter, RGBFormat, RGBAFormat, DepthFormat, DepthStencilFormat, UnsignedShortType, UnsignedIntType, UnsignedInt248Type, FloatType, HalfFloatType, ClampToEdgeWrapping, NearestMipMapLinearFilter, NearestMipMapNearestFilter } from '../../constants';\nimport { _Math } from '../../math/Math';\n\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, paramThreeToGL, infoMemory ) {\n\n\tvar _isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && _gl instanceof WebGL2RenderingContext );\n\n\t//\n\n\tfunction clampToMaxSize( image, maxSize ) {\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\t// Warning: Scaling through the canvas will only work with images that use\n\t\t\t// premultiplied alpha.\n\n\t\t\tvar scale = maxSize / Math.max( image.width, image.height );\n\n\t\t\tvar canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\t\tcanvas.width = Math.floor( image.width * scale );\n\t\t\tcanvas.height = Math.floor( image.height * scale );\n\n\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\n\n\t\t\treturn canvas;\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction isPowerOfTwo( image ) {\n\n\t\treturn _Math.isPowerOfTwo( image.width ) && _Math.isPowerOfTwo( image.height );\n\n\t}\n\n\tfunction makePowerOfTwo( image ) {\n\n\t\tif ( image instanceof HTMLImageElement || image instanceof HTMLCanvasElement ) {\n\n\t\t\tvar canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\t\tcanvas.width = _Math.nearestPowerOfTwo( image.width );\n\t\t\tcanvas.height = _Math.nearestPowerOfTwo( image.height );\n\n\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\tcontext.drawImage( image, 0, 0, canvas.width, canvas.height );\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is not power of two (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\n\n\t\t\treturn canvas;\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction textureNeedsPowerOfTwo( texture ) {\n\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback( f ) {\n\n\t\tif ( f === NearestFilter || f === NearestMipMapNearestFilter || f === NearestMipMapLinearFilter ) {\n\n\t\t\treturn _gl.NEAREST;\n\n\t\t}\n\n\t\treturn _gl.LINEAR;\n\n\t}\n\n\t//\n\n\tfunction onTextureDispose( event ) {\n\n\t\tvar texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\tinfoMemory.textures --;\n\n\n\t}\n\n\tfunction onRenderTargetDispose( event ) {\n\n\t\tvar renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t\tinfoMemory.textures --;\n\n\t}\n\n\t//\n\n\tfunction deallocateTexture( texture ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.image && textureProperties.__image__webglTextureCube ) {\n\n\t\t\t// cube texture\n\n\t\t\t_gl.deleteTexture( textureProperties.__image__webglTextureCube );\n\n\t\t} else {\n\n\t\t\t// 2D texture\n\n\t\t\tif ( textureProperties.__webglInit === undefined ) return;\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t}\n\n\t\t// remove all webgl properties\n\t\tproperties.remove( texture );\n\n\t}\n\n\tfunction deallocateRenderTarget( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\t\tvar textureProperties = properties.get( renderTarget.texture );\n\n\t\tif ( ! renderTarget ) return;\n\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t}\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\trenderTarget.depthTexture.dispose();\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLRenderTargetCube ) {\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\n\n\t\t}\n\n\t\tproperties.remove( renderTarget.texture );\n\t\tproperties.remove( renderTarget );\n\n\t}\n\n\t//\n\n\n\n\tfunction setTexture2D( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tvar image = texture.image;\n\n\t\t\tif ( image === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined', texture );\n\n\t\t\t} else if ( image.complete === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete', texture );\n\n\t\t\t} else {\n\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTextureCube( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.image.length === 6 ) {\n\n\t\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\t\tif ( ! textureProperties.__image__webglTextureCube ) {\n\n\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\ttextureProperties.__image__webglTextureCube = _gl.createTexture();\n\n\t\t\t\t\tinfoMemory.textures ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\n\n\t\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\n\t\t\t\tvar isCompressed = ( texture && texture.isCompressedTexture );\n\t\t\t\tvar isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\n\n\t\t\t\tvar cubeImage = [];\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\t\t\tcubeImage[ i ] = clampToMaxSize( texture.image[ i ], capabilities.maxCubemapSize );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar image = cubeImage[ 0 ],\n\t\t\t\tisPowerOfTwoImage = isPowerOfTwo( image ),\n\t\t\t\tglFormat = paramThreeToGL( texture.format ),\n\t\t\t\tglType = paramThreeToGL( texture.type );\n\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, isPowerOfTwoImage );\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( ! isCompressed ) {\n\n\t\t\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar mipmap, mipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\t\t\tfor ( var j = 0, jl = mipmaps.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tmipmap = mipmaps[ j ];\n\n\t\t\t\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()\" );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( texture.generateMipmaps && isPowerOfTwoImage ) {\n\n\t\t\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\n\n\t\t\t\t}\n\n\t\t\t\ttextureProperties.__version = texture.version;\n\n\t\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t\t} else {\n\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setTextureCubeDynamic( texture, slot ) {\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( texture ).__webglTexture );\n\n\t}\n\n\tfunction setTextureParameters( textureType, texture, isPowerOfTwoImage ) {\n\n\t\tvar extension;\n\n\t\tif ( isPowerOfTwoImage ) {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, paramThreeToGL( texture.wrapS ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, paramThreeToGL( texture.wrapT ) );\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, paramThreeToGL( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, paramThreeToGL( texture.minFilter ) );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\n\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.', texture );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.', texture );\n\n\t\t\t}\n\n\t\t}\n\n\t\textension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension ) {\n\n\t\t\tif ( texture.type === FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\n\t\t\tif ( texture.type === HalfFloatType && extensions.get( 'OES_texture_half_float_linear' ) === null ) return;\n\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction uploadTexture( textureProperties, texture, slot ) {\n\n\t\tif ( textureProperties.__webglInit === undefined ) {\n\n\t\t\ttextureProperties.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\tinfoMemory.textures ++;\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\n\n\t\tvar image = clampToMaxSize( texture.image, capabilities.maxTextureSize );\n\n\t\tif ( textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( image ) === false ) {\n\n\t\t\timage = makePowerOfTwo( image );\n\n\t\t}\n\n\t\tvar isPowerOfTwoImage = isPowerOfTwo( image ),\n\t\tglFormat = paramThreeToGL( texture.format ),\n\t\tglType = paramThreeToGL( texture.type );\n\n\t\tsetTextureParameters( _gl.TEXTURE_2D, texture, isPowerOfTwoImage );\n\n\t\tvar mipmap, mipmaps = texture.mipmaps;\n\n\t\tif ( texture.isDepthTexture ) {\n\n\t\t\t// populate depth texture with dummy data\n\n\t\t\tvar internalFormat = _gl.DEPTH_COMPONENT;\n\n\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\tif ( !_isWebGL2 ) throw new Error('Float Depth Texture only supported in WebGL2.0');\n\t\t\t\tinternalFormat = _gl.DEPTH_COMPONENT32F;\n\n\t\t\t} else if ( _isWebGL2 ) {\n\n\t\t\t\t// WebGL 2.0 requires signed internalformat for glTexImage2D\n\t\t\t\tinternalFormat = _gl.DEPTH_COMPONENT16;\n\n\t\t\t}\n\n\t\t\tif ( texture.format === DepthFormat && internalFormat === _gl.DEPTH_COMPONENT ) {\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\n\n\t\t\t\t        console.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedShortType;\n\t\t\t\t\tglType = paramThreeToGL( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\n\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\tif ( texture.format === DepthStencilFormat ) {\n\n\t\t\t\tinternalFormat = _gl.DEPTH_STENCIL;\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\n\n\t\t\t\t        console.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedInt248Type;\n\t\t\t\t\tglType = paramThreeToGL( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, internalFormat, image.width, image.height, 0, glFormat, glType, null );\n\n\t\t} else if ( texture.isDataTexture ) {\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && isPowerOfTwoImage ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\n\t\t\t}\n\n\t\t} else if ( texture.isCompressedTexture ) {\n\n\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\n\n\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\" );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// regular Texture (image, video, canvas)\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && isPowerOfTwoImage ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, image );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( texture.generateMipmaps && isPowerOfTwoImage ) _gl.generateMipmap( _gl.TEXTURE_2D );\n\n\t\ttextureProperties.__version = texture.version;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t}\n\n\t// Render targets\n\n\t// Setup storage for target texture and bind it to correct framebuffer\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, attachment, textureTarget ) {\n\n\t\tvar glFormat = paramThreeToGL( renderTarget.texture.format );\n\t\tvar glType = paramThreeToGL( renderTarget.texture.type );\n\t\tstate.texImage2D( textureTarget, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget ) {\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else {\n\n\t\t\t// FIXME: We don't support !depth !stencil\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.RGBA4, renderTarget.width, renderTarget.height );\n\n\t\t}\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\n\t}\n\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\n\n\t\tvar isCube = ( renderTarget && renderTarget.isWebGLRenderTargetCube );\n\t\tif ( isCube ) throw new Error('Depth Texture with cube render targets is not supported!');\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\tif ( !( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\n\n\t\t\tthrow new Error('renderTarget.depthTexture must be an instance of THREE.DepthTexture');\n\n\t\t}\n\n\t\t// upload an empty depth texture with framebuffer size\n\t\tif ( !properties.get( renderTarget.depthTexture ).__webglTexture ||\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\n\t\t}\n\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\n\n\t\tvar webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\n\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t} else {\n\n\t\t\tthrow new Error('Unknown depthTexture format')\n\n\t\t}\n\n\t}\n\n\t// Setup GL resources for a non-texture depth buffer\n\tfunction setupDepthRenderbuffer( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\n\t\tvar isCube = ( renderTarget.isWebGLRenderTargetCube === true );\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\tif ( isCube ) throw new Error('target.depthTexture not supported in Cube render targets');\n\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\n\n\t\t} else {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// Set up GL resources for the render target\n\tfunction setupRenderTarget( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\t\tvar textureProperties = properties.get( renderTarget.texture );\n\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\tinfoMemory.textures ++;\n\n\t\tvar isCube = ( renderTarget.isWebGLRenderTargetCube === true );\n\t\tvar isTargetPowerOfTwo = isPowerOfTwo( renderTarget );\n\n\t\t// Setup framebuffer\n\n\t\tif ( isCube ) {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t}\n\n\t\t// Setup color buffer\n\n\t\tif ( isCube ) {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, isTargetPowerOfTwo );\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\n\n\t\t\t}\n\n\t\t\tif ( renderTarget.texture.generateMipmaps && isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\n\n\t\t} else {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget.texture, isTargetPowerOfTwo );\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_2D );\n\n\t\t\tif ( renderTarget.texture.generateMipmaps && isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\n\n\t\t}\n\n\t\t// Setup depth and stencil buffers\n\n\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\tfunction updateRenderTargetMipmap( renderTarget ) {\n\n\t\tvar texture = renderTarget.texture;\n\n\t\tif ( texture.generateMipmaps && isPowerOfTwo( renderTarget ) &&\n\t\t\t\ttexture.minFilter !== NearestFilter &&\n\t\t\t\ttexture.minFilter !== LinearFilter ) {\n\n\t\t\tvar target = (renderTarget && renderTarget.isWebGLRenderTargetCube) ? _gl.TEXTURE_CUBE_MAP : _gl.TEXTURE_2D;\n\t\t\tvar webglTexture = properties.get( texture ).__webglTexture;\n\n\t\t\tstate.bindTexture( target, webglTexture );\n\t\t\t_gl.generateMipmap( target );\n\t\t\tstate.bindTexture( target, null );\n\n\t\t}\n\n\t}\n\n\tthis.setTexture2D = setTexture2D;\n\tthis.setTextureCube = setTextureCube;\n\tthis.setTextureCubeDynamic = setTextureCubeDynamic;\n\tthis.setupRenderTarget = setupRenderTarget;\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\n\n}\n\n\nexport { WebGLTextures };\n","/**\n * @author fordacious / fordacious.github.io\n */\n\nfunction WebGLProperties() {\n\n\tvar properties = {};\n\n\tfunction get( object ) {\n\n\t\tvar uuid = object.uuid;\n\t\tvar map = properties[ uuid ];\n\n\t\tif ( map === undefined ) {\n\n\t\t\tmap = {};\n\t\t\tproperties[ uuid ] = map;\n\n\t\t}\n\n\t\treturn map;\n\n\t}\n\n\tfunction remove( object ) {\n\n\t\tdelete properties[ object.uuid ];\n\n\t}\n\n\tfunction clear() {\n\n\t\tproperties = {};\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tremove: remove,\n\t\tclear: clear\n\t};\n\n}\n\n\nexport { WebGLProperties };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { NotEqualDepth, GreaterDepth, GreaterEqualDepth, EqualDepth, LessEqualDepth, LessDepth, AlwaysDepth, NeverDepth, CullFaceFront, CullFaceBack, CullFaceNone, CustomBlending, MultiplyBlending, SubtractiveBlending, AdditiveBlending, NoBlending, NormalBlending, DoubleSide, BackSide } from '../../constants';\nimport { Vector4 } from '../../math/Vector4';\n\nfunction WebGLState( gl, extensions, paramThreeToGL ) {\n\n\tfunction ColorBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar color = new Vector4();\n\t\tvar currentColorMask = null;\n\t\tvar currentColorClear = new Vector4();\n\n\t\treturn {\n\n\t\t\tsetMask: function ( colorMask ) {\n\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\n\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\n\t\t\t\t\tcurrentColorMask = colorMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\n\n\t\t\t\tif ( premultipliedAlpha === true ) {\n\n\t\t\t\t\tr *= a; g *= a; b *= a;\n\n\t\t\t\t}\n\n\t\t\t\tcolor.set( r, g, b, a );\n\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\n\n\t\t\t\t\tgl.clearColor( r, g, b, a );\n\t\t\t\t\tcurrentColorClear.copy( color );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentColorMask = null;\n\t\t\t\tcurrentColorClear.set( 0, 0, 0, 1 );\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction DepthBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar currentDepthMask = null;\n\t\tvar currentDepthFunc = null;\n\t\tvar currentDepthClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( depthTest ) {\n\n\t\t\t\tif ( depthTest ) {\n\n\t\t\t\t\tenable( gl.DEPTH_TEST );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( gl.DEPTH_TEST );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( depthMask ) {\n\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\n\n\t\t\t\t\tgl.depthMask( depthMask );\n\t\t\t\t\tcurrentDepthMask = depthMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( depthFunc ) {\n\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\n\n\t\t\t\t\tif ( depthFunc ) {\n\n\t\t\t\t\t\tswitch ( depthFunc ) {\n\n\t\t\t\t\t\t\tcase NeverDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.NEVER );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase AlwaysDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.ALWAYS );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LESS );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.EQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.GEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.GREATER );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase NotEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.NOTEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( depth ) {\n\n\t\t\t\tif ( currentDepthClear !== depth ) {\n\n\t\t\t\t\tgl.clearDepth( depth );\n\t\t\t\t\tcurrentDepthClear = depth;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentDepthMask = null;\n\t\t\t\tcurrentDepthFunc = null;\n\t\t\t\tcurrentDepthClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction StencilBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar currentStencilMask = null;\n\t\tvar currentStencilFunc = null;\n\t\tvar currentStencilRef = null;\n\t\tvar currentStencilFuncMask = null;\n\t\tvar currentStencilFail = null;\n\t\tvar currentStencilZFail = null;\n\t\tvar currentStencilZPass = null;\n\t\tvar currentStencilClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( stencilTest ) {\n\n\t\t\t\tif ( stencilTest ) {\n\n\t\t\t\t\tenable( gl.STENCIL_TEST );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( gl.STENCIL_TEST );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( stencilMask ) {\n\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\n\n\t\t\t\t\tgl.stencilMask( stencilMask );\n\t\t\t\t\tcurrentStencilMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\n\t\t\t\t     currentStencilRef \t!== stencilRef \t||\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\n\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\n\t\t\t\t\tcurrentStencilRef = stencilRef;\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\t\t\tif ( currentStencilFail\t !== stencilFail \t||\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\n\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n\n\t\t\t\t\tcurrentStencilFail = stencilFail;\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( stencil ) {\n\n\t\t\t\tif ( currentStencilClear !== stencil ) {\n\n\t\t\t\t\tgl.clearStencil( stencil );\n\t\t\t\t\tcurrentStencilClear = stencil;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentStencilMask = null;\n\t\t\t\tcurrentStencilFunc = null;\n\t\t\t\tcurrentStencilRef = null;\n\t\t\t\tcurrentStencilFuncMask = null;\n\t\t\t\tcurrentStencilFail = null;\n\t\t\t\tcurrentStencilZFail = null;\n\t\t\t\tcurrentStencilZPass = null;\n\t\t\t\tcurrentStencilClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t//\n\n\tvar colorBuffer = new ColorBuffer();\n\tvar depthBuffer = new DepthBuffer();\n\tvar stencilBuffer = new StencilBuffer();\n\n\tvar maxVertexAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\tvar newAttributes = new Uint8Array( maxVertexAttributes );\n\tvar enabledAttributes = new Uint8Array( maxVertexAttributes );\n\tvar attributeDivisors = new Uint8Array( maxVertexAttributes );\n\n\tvar capabilities = {};\n\n\tvar compressedTextureFormats = null;\n\n\tvar currentBlending = null;\n\tvar currentBlendEquation = null;\n\tvar currentBlendSrc = null;\n\tvar currentBlendDst = null;\n\tvar currentBlendEquationAlpha = null;\n\tvar currentBlendSrcAlpha = null;\n\tvar currentBlendDstAlpha = null;\n\tvar currentPremultipledAlpha = false;\n\n\tvar currentFlipSided = null;\n\tvar currentCullFace = null;\n\n\tvar currentLineWidth = null;\n\n\tvar currentPolygonOffsetFactor = null;\n\tvar currentPolygonOffsetUnits = null;\n\n\tvar currentScissorTest = null;\n\n\tvar maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\n\n\tvar version = parseFloat( /^WebGL\\ ([0-9])/.exec( gl.getParameter( gl.VERSION ) )[ 1 ] );\n\tvar lineWidthAvailable = parseFloat( version ) >= 1.0;\n\n\tvar currentTextureSlot = null;\n\tvar currentBoundTextures = {};\n\n\tvar currentScissor = new Vector4();\n\tvar currentViewport = new Vector4();\n\n\tfunction createTexture( type, target, count ) {\n\n\t\tvar data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\n\t\tvar texture = gl.createTexture();\n\n\t\tgl.bindTexture( type, texture );\n\t\tgl.texParameteri( type, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( type, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\n\t\tfor ( var i = 0; i < count; i ++ ) {\n\n\t\t\tgl.texImage2D( target + i, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, data );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tvar emptyTextures = {};\n\temptyTextures[ gl.TEXTURE_2D ] = createTexture( gl.TEXTURE_2D, gl.TEXTURE_2D, 1 );\n\temptyTextures[ gl.TEXTURE_CUBE_MAP ] = createTexture( gl.TEXTURE_CUBE_MAP, gl.TEXTURE_CUBE_MAP_POSITIVE_X, 6 );\n\n\t//\n\n\tfunction init() {\n\n\t\tcolorBuffer.setClear( 0, 0, 0, 1 );\n\t\tdepthBuffer.setClear( 1 );\n\t\tstencilBuffer.setClear( 0 );\n\n\t\tenable( gl.DEPTH_TEST );\n\t\tdepthBuffer.setFunc( LessEqualDepth );\n\n\t\tsetFlipSided( false );\n\t\tsetCullFace( CullFaceBack );\n\t\tenable( gl.CULL_FACE );\n\n\t\tenable( gl.BLEND );\n\t\tsetBlending( NormalBlending );\n\n\t}\n\n\tfunction initAttributes() {\n\n\t\tfor ( var i = 0, l = newAttributes.length; i < l; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== 0 ) {\n\n\t\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension.vertexAttribDivisorANGLE( attribute, 0 );\n\t\t\tattributeDivisors[ attribute ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension.vertexAttribDivisorANGLE( attribute, meshPerAttribute );\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tfor ( var i = 0, l = enabledAttributes.length; i !== l; ++ i ) {\n\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction enable( id ) {\n\n\t\tif ( capabilities[ id ] !== true ) {\n\n\t\t\tgl.enable( id );\n\t\t\tcapabilities[ id ] = true;\n\n\t\t}\n\n\t}\n\n\tfunction disable( id ) {\n\n\t\tif ( capabilities[ id ] !== false ) {\n\n\t\t\tgl.disable( id );\n\t\t\tcapabilities[ id ] = false;\n\n\t\t}\n\n\t}\n\n\tfunction getCompressedTextureFormats() {\n\n\t\tif ( compressedTextureFormats === null ) {\n\n\t\t\tcompressedTextureFormats = [];\n\n\t\t\tif ( extensions.get( 'WEBGL_compressed_texture_pvrtc' ) ||\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_s3tc' ) ||\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_etc1' ) ) {\n\n\t\t\t\tvar formats = gl.getParameter( gl.COMPRESSED_TEXTURE_FORMATS );\n\n\t\t\t\tfor ( var i = 0; i < formats.length; i ++ ) {\n\n\t\t\t\t\tcompressedTextureFormats.push( formats[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn compressedTextureFormats;\n\n\t}\n\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\n\n\t\tif ( blending !== NoBlending ) {\n\n\t\t\tenable( gl.BLEND );\n\n\t\t} else {\n\n\t\t\tdisable( gl.BLEND );\n\n\t\t}\n\n\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\n\n\t\t\tif ( blending === AdditiveBlending ) {\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE, gl.ONE, gl.ONE );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE );\n\n\t\t\t\t}\n\n\t\t\t} else if ( blending === SubtractiveBlending ) {\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\n\n\t\t\t\t}\n\n\t\t\t} else if ( blending === MultiplyBlending ) {\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.SRC_COLOR, gl.ZERO, gl.SRC_ALPHA );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.SRC_COLOR );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tcurrentBlending = blending;\n\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\n\n\t\t}\n\n\t\tif ( blending === CustomBlending ) {\n\n\t\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\n\t\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\n\t\t\tblendDstAlpha = blendDstAlpha || blendDst;\n\n\t\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\n\n\t\t\t\tgl.blendEquationSeparate( paramThreeToGL( blendEquation ), paramThreeToGL( blendEquationAlpha ) );\n\n\t\t\t\tcurrentBlendEquation = blendEquation;\n\t\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\n\n\t\t\t}\n\n\t\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\n\n\t\t\t\tgl.blendFuncSeparate( paramThreeToGL( blendSrc ), paramThreeToGL( blendDst ), paramThreeToGL( blendSrcAlpha ), paramThreeToGL( blendDstAlpha ) );\n\n\t\t\t\tcurrentBlendSrc = blendSrc;\n\t\t\t\tcurrentBlendDst = blendDst;\n\t\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\n\t\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tcurrentBlendEquation = null;\n\t\t\tcurrentBlendSrc = null;\n\t\t\tcurrentBlendDst = null;\n\t\t\tcurrentBlendEquationAlpha = null;\n\t\t\tcurrentBlendSrcAlpha = null;\n\t\t\tcurrentBlendDstAlpha = null;\n\n\t\t}\n\n\t}\n\n\tfunction setMaterial( material ) {\n\n\t\tmaterial.side === DoubleSide\n\t\t\t? disable( gl.CULL_FACE )\n\t\t\t: enable( gl.CULL_FACE );\n\n\t\tsetFlipSided( material.side === BackSide );\n\n\t\tmaterial.transparent === true\n\t\t\t? setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha )\n\t\t\t: setBlending( NoBlending );\n\n\t\tdepthBuffer.setFunc( material.depthFunc );\n\t\tdepthBuffer.setTest( material.depthTest );\n\t\tdepthBuffer.setMask( material.depthWrite );\n\t\tcolorBuffer.setMask( material.colorWrite );\n\n\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t}\n\n\t//\n\n\tfunction setFlipSided( flipSided ) {\n\n\t\tif ( currentFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\tgl.frontFace( gl.CW );\n\n\t\t\t} else {\n\n\t\t\t\tgl.frontFace( gl.CCW );\n\n\t\t\t}\n\n\t\t\tcurrentFlipSided = flipSided;\n\n\t\t}\n\n\t}\n\n\tfunction setCullFace( cullFace ) {\n\n\t\tif ( cullFace !== CullFaceNone ) {\n\n\t\t\tenable( gl.CULL_FACE );\n\n\t\t\tif ( cullFace !== currentCullFace ) {\n\n\t\t\t\tif ( cullFace === CullFaceBack ) {\n\n\t\t\t\t\tgl.cullFace( gl.BACK );\n\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT_AND_BACK );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.CULL_FACE );\n\n\t\t}\n\n\t\tcurrentCullFace = cullFace;\n\n\t}\n\n\tfunction setLineWidth( width ) {\n\n\t\tif ( width !== currentLineWidth ) {\n\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\n\n\t\t\tcurrentLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\n\n\t\tif ( polygonOffset ) {\n\n\t\t\tenable( gl.POLYGON_OFFSET_FILL );\n\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\n\n\t\t\t\tgl.polygonOffset( factor, units );\n\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\n\t\t\t\tcurrentPolygonOffsetUnits = units;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.POLYGON_OFFSET_FILL );\n\n\t\t}\n\n\t}\n\n\tfunction getScissorTest() {\n\n\t\treturn currentScissorTest;\n\n\t}\n\n\tfunction setScissorTest( scissorTest ) {\n\n\t\tcurrentScissorTest = scissorTest;\n\n\t\tif ( scissorTest ) {\n\n\t\t\tenable( gl.SCISSOR_TEST );\n\n\t\t} else {\n\n\t\t\tdisable( gl.SCISSOR_TEST );\n\n\t\t}\n\n\t}\n\n\t// texture\n\n\tfunction activeTexture( webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\n\n\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\tgl.activeTexture( webglSlot );\n\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t}\n\n\t}\n\n\tfunction bindTexture( webglType, webglTexture ) {\n\n\t\tif ( currentTextureSlot === null ) {\n\n\t\t\tactiveTexture();\n\n\t\t}\n\n\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture === undefined ) {\n\n\t\t\tboundTexture = { type: undefined, texture: undefined };\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\n\n\t\t}\n\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\n\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\n\n\t\t\tboundTexture.type = webglType;\n\t\t\tboundTexture.texture = webglTexture;\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( error );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction scissor( scissor ) {\n\n\t\tif ( currentScissor.equals( scissor ) === false ) {\n\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\n\t\t\tcurrentScissor.copy( scissor );\n\n\t\t}\n\n\t}\n\n\tfunction viewport( viewport ) {\n\n\t\tif ( currentViewport.equals( viewport ) === false ) {\n\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\n\t\t\tcurrentViewport.copy( viewport );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction reset() {\n\n\t\tfor ( var i = 0; i < enabledAttributes.length; i ++ ) {\n\n\t\t\tif ( enabledAttributes[ i ] === 1 ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tcapabilities = {};\n\n\t\tcompressedTextureFormats = null;\n\n\t\tcurrentTextureSlot = null;\n\t\tcurrentBoundTextures = {};\n\n\t\tcurrentBlending = null;\n\n\t\tcurrentFlipSided = null;\n\t\tcurrentCullFace = null;\n\n\t\tcolorBuffer.reset();\n\t\tdepthBuffer.reset();\n\t\tstencilBuffer.reset();\n\n\t}\n\n\treturn {\n\n\t\tbuffers: {\n\t\t\tcolor: colorBuffer,\n\t\t\tdepth: depthBuffer,\n\t\t\tstencil: stencilBuffer\n\t\t},\n\n\t\tinit: init,\n\t\tinitAttributes: initAttributes,\n\t\tenableAttribute: enableAttribute,\n\t\tenableAttributeAndDivisor: enableAttributeAndDivisor,\n\t\tdisableUnusedAttributes: disableUnusedAttributes,\n\t\tenable: enable,\n\t\tdisable: disable,\n\t\tgetCompressedTextureFormats: getCompressedTextureFormats,\n\n\t\tsetBlending: setBlending,\n\t\tsetMaterial: setMaterial,\n\n\t\tsetFlipSided: setFlipSided,\n\t\tsetCullFace: setCullFace,\n\n\t\tsetLineWidth: setLineWidth,\n\t\tsetPolygonOffset: setPolygonOffset,\n\n\t\tgetScissorTest: getScissorTest,\n\t\tsetScissorTest: setScissorTest,\n\n\t\tactiveTexture: activeTexture,\n\t\tbindTexture: bindTexture,\n\t\tcompressedTexImage2D: compressedTexImage2D,\n\t\ttexImage2D: texImage2D,\n\n\t\tscissor: scissor,\n\t\tviewport: viewport,\n\n\t\treset: reset\n\n\t};\n\n}\n\n\nexport { WebGLState };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLCapabilities( gl, extensions, parameters ) {\n\n\tvar maxAnisotropy;\n\n\tfunction getMaxAnisotropy() {\n\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\n\n\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\n\n\t\t} else {\n\n\t\t\tmaxAnisotropy = 0;\n\n\t\t}\n\n\t\treturn maxAnisotropy;\n\n\t}\n\n\tfunction getMaxPrecision( precision ) {\n\n\t\tif ( precision === 'highp' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'highp';\n\n\t\t\t}\n\n\t\t\tprecision = 'mediump';\n\n\t\t}\n\n\t\tif ( precision === 'mediump' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'mediump';\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn 'lowp';\n\n\t}\n\n\tvar precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\tvar maxPrecision = getMaxPrecision( precision );\n\n\tif ( maxPrecision !== precision ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\n\t\tprecision = maxPrecision;\n\n\t}\n\n\tvar logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true && !! extensions.get( 'EXT_frag_depth' );\n\n\tvar maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\n\tvar maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\n\tvar maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\n\tvar maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\n\n\tvar maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\tvar maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\n\tvar maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\n\tvar maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\n\n\tvar vertexTextures = maxVertexTextures > 0;\n\tvar floatFragmentTextures = !! extensions.get( 'OES_texture_float' );\n\tvar floatVertexTextures = vertexTextures && floatFragmentTextures;\n\n\treturn {\n\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\n\t\tgetMaxPrecision: getMaxPrecision,\n\n\t\tprecision: precision,\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\tmaxTextures: maxTextures,\n\t\tmaxVertexTextures: maxVertexTextures,\n\t\tmaxTextureSize: maxTextureSize,\n\t\tmaxCubemapSize: maxCubemapSize,\n\n\t\tmaxAttributes: maxAttributes,\n\t\tmaxVertexUniforms: maxVertexUniforms,\n\t\tmaxVaryings: maxVaryings,\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\n\n\t\tvertexTextures: vertexTextures,\n\t\tfloatFragmentTextures: floatFragmentTextures,\n\t\tfloatVertexTextures: floatVertexTextures\n\n\t};\n\n}\n\n\nexport { WebGLCapabilities };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLExtensions( gl ) {\n\n\tvar extensions = {};\n\n\treturn {\n\n\t\tget: function ( name ) {\n\n\t\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\t\treturn extensions[ name ];\n\n\t\t\t}\n\n\t\t\tvar extension;\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_etc1':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_etc1' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\textension = gl.getExtension( name );\n\n\t\t\t}\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t\t}\n\n\t\t\textensions[ name ] = extension;\n\n\t\t\treturn extension;\n\n\t\t}\n\n\t};\n\n}\n\n\nexport { WebGLExtensions };\n","/**\n * @author tschw\n */\n\nimport { Matrix3 } from '../../math/Matrix3';\nimport { Plane } from '../../math/Plane';\n\nfunction WebGLClipping() {\n\n\tvar scope = this,\n\n\t\tglobalState = null,\n\t\tnumGlobalPlanes = 0,\n\t\tlocalClippingEnabled = false,\n\t\trenderingShadows = false,\n\n\t\tplane = new Plane(),\n\t\tviewNormalMatrix = new Matrix3(),\n\n\t\tuniform = { value: null, needsUpdate: false };\n\n\tthis.uniform = uniform;\n\tthis.numPlanes = 0;\n\tthis.numIntersection = 0;\n\n\tthis.init = function( planes, enableLocalClipping, camera ) {\n\n\t\tvar enabled =\n\t\t\tplanes.length !== 0 ||\n\t\t\tenableLocalClipping ||\n\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t// run another frame in order to reset the state:\n\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\tlocalClippingEnabled;\n\n\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\tglobalState = projectPlanes( planes, camera, 0 );\n\t\tnumGlobalPlanes = planes.length;\n\n\t\treturn enabled;\n\n\t};\n\n\tthis.beginShadows = function() {\n\n\t\trenderingShadows = true;\n\t\tprojectPlanes( null );\n\n\t};\n\n\tthis.endShadows = function() {\n\n\t\trenderingShadows = false;\n\t\tresetGlobalState();\n\n\t};\n\n\tthis.setState = function( planes, clipIntersection, clipShadows, camera, cache, fromCache ) {\n\n\t\tif ( ! localClippingEnabled ||\n\t\t\t\tplanes === null || planes.length === 0 ||\n\t\t\t\trenderingShadows && ! clipShadows ) {\n\t\t\t// there's no local clipping\n\n\t\t\tif ( renderingShadows ) {\n\t\t\t\t// there's no global clipping\n\n\t\t\t\tprojectPlanes( null );\n\n\t\t\t} else {\n\n\t\t\t\tresetGlobalState();\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\tlGlobal = nGlobal * 4,\n\n\t\t\t\tdstArray = cache.clippingState || null;\n\n\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, fromCache );\n\n\t\t\tfor ( var i = 0; i !== lGlobal; ++ i ) {\n\n\t\t\t\tdstArray[ i ] = globalState[ i ];\n\n\t\t\t}\n\n\t\t\tcache.clippingState = dstArray;\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\n\t\t\tthis.numPlanes += nGlobal;\n\n\t\t}\n\n\n\t};\n\n\tfunction resetGlobalState() {\n\n\t\tif ( uniform.value !== globalState ) {\n\n\t\t\tuniform.value = globalState;\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t}\n\n\t\tscope.numPlanes = numGlobalPlanes;\n\t\tscope.numIntersection = 0;\n\n\t}\n\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\n\n\t\tvar nPlanes = planes !== null ? planes.length : 0,\n\t\t\tdstArray = null;\n\n\t\tif ( nPlanes !== 0 ) {\n\n\t\t\tdstArray = uniform.value;\n\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\n\n\t\t\t\tvar flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\n\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\n\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0, i4 = dstOffset;\n\t\t\t\t\t\t\t\t\ti !== nPlanes; ++ i, i4 += 4 ) {\n\n\t\t\t\t\tplane.copy( planes[ i ] ).\n\t\t\t\t\t\t\tapplyMatrix4( viewMatrix, viewNormalMatrix );\n\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniform.value = dstArray;\n\t\t\tuniform.needsUpdate = true;\n\n\t\t}\n\n\t\tscope.numPlanes = nPlanes;\n\t\t\n\t\treturn dstArray;\n\n\t}\n\n}\n\n\nexport { WebGLClipping };\n","import { REVISION, MaxEquation, MinEquation, RGB_ETC1_Format, RGBA_PVRTC_2BPPV1_Format, RGBA_PVRTC_4BPPV1_Format, RGB_PVRTC_2BPPV1_Format, RGB_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT5_Format, RGBA_S3TC_DXT3_Format, RGBA_S3TC_DXT1_Format, RGB_S3TC_DXT1_Format, SrcAlphaSaturateFactor, OneMinusDstColorFactor, DstColorFactor, OneMinusDstAlphaFactor, DstAlphaFactor, OneMinusSrcAlphaFactor, SrcAlphaFactor, OneMinusSrcColorFactor, SrcColorFactor, OneFactor, ZeroFactor, ReverseSubtractEquation, SubtractEquation, AddEquation, DepthFormat, DepthStencilFormat, LuminanceAlphaFormat, LuminanceFormat, RGBAFormat, RGBFormat, AlphaFormat, HalfFloatType, FloatType, UnsignedIntType, IntType, UnsignedShortType, ShortType, ByteType, UnsignedInt248Type, UnsignedShort565Type, UnsignedShort5551Type, UnsignedShort4444Type, UnsignedByteType, LinearMipMapLinearFilter, LinearMipMapNearestFilter, LinearFilter, NearestMipMapLinearFilter, NearestMipMapNearestFilter, NearestFilter, MirroredRepeatWrapping, ClampToEdgeWrapping, RepeatWrapping, FrontFaceDirectionCW, NoBlending, BackSide, TriangleFanDrawMode, TriangleStripDrawMode, TrianglesDrawMode, NoColors, FlatShading, LinearToneMapping } from '../constants';\nimport { _Math } from '../math/Math';\nimport { Matrix4 } from '../math/Matrix4';\nimport { DataTexture } from '../textures/DataTexture';\nimport { WebGLUniforms } from './webgl/WebGLUniforms';\nimport { UniformsLib } from './shaders/UniformsLib';\nimport { UniformsUtils } from './shaders/UniformsUtils';\nimport { ShaderLib } from './shaders/ShaderLib';\nimport { LensFlarePlugin } from './webgl/plugins/LensFlarePlugin';\nimport { SpritePlugin } from './webgl/plugins/SpritePlugin';\nimport { WebGLShadowMap } from './webgl/WebGLShadowMap';\nimport { ShaderMaterial } from '../materials/ShaderMaterial';\nimport { Mesh } from '../objects/Mesh';\nimport { BoxBufferGeometry } from '../geometries/BoxGeometry';\nimport { PlaneBufferGeometry } from '../geometries/PlaneGeometry';\nimport { MeshBasicMaterial } from '../materials/MeshBasicMaterial';\nimport { PerspectiveCamera } from '../cameras/PerspectiveCamera';\nimport { OrthographicCamera } from '../cameras/OrthographicCamera';\nimport { WebGLAttributes } from './webgl/WebGLAttributes';\nimport { WebGLRenderLists } from './webgl/WebGLRenderLists';\nimport { WebGLIndexedBufferRenderer } from './webgl/WebGLIndexedBufferRenderer';\nimport { WebGLBufferRenderer } from './webgl/WebGLBufferRenderer';\nimport { WebGLGeometries } from './webgl/WebGLGeometries';\nimport { WebGLLights } from './webgl/WebGLLights';\nimport { WebGLObjects } from './webgl/WebGLObjects';\nimport { WebGLPrograms } from './webgl/WebGLPrograms';\nimport { WebGLTextures } from './webgl/WebGLTextures';\nimport { WebGLProperties } from './webgl/WebGLProperties';\nimport { WebGLState } from './webgl/WebGLState';\nimport { WebGLCapabilities } from './webgl/WebGLCapabilities';\nimport { BufferGeometry } from '../core/BufferGeometry';\nimport { WebGLExtensions } from './webgl/WebGLExtensions';\nimport { Vector3 } from '../math/Vector3';\n// import { Sphere } from '../math/Sphere';\nimport { WebGLClipping } from './webgl/WebGLClipping';\nimport { Frustum } from '../math/Frustum';\nimport { Vector4 } from '../math/Vector4';\nimport { Color } from '../math/Color';\n\n/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n * @author tschw\n */\n\nfunction WebGLRenderer( parameters ) {\n\n\tconsole.log( 'THREE.WebGLRenderer', REVISION );\n\n\tparameters = parameters || {};\n\n\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' ),\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false;\n\n\tvar lights = [];\n\n\tvar currentRenderList = null;\n\n\tvar morphInfluences = new Float32Array( 8 );\n\n\tvar sprites = [];\n\tvar lensFlares = [];\n\n\t// public properties\n\n\tthis.domElement = _canvas;\n\tthis.context = null;\n\n\t// clearing\n\n\tthis.autoClear = true;\n\tthis.autoClearColor = true;\n\tthis.autoClearDepth = true;\n\tthis.autoClearStencil = true;\n\n\t// scene graph\n\n\tthis.sortObjects = true;\n\n\t// user-defined clipping\n\n\tthis.clippingPlanes = [];\n\tthis.localClippingEnabled = false;\n\n\t// physically based shading\n\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\n\tthis.gammaInput = false;\n\tthis.gammaOutput = false;\n\n\t// physical lights\n\n\tthis.physicallyCorrectLights = false;\n\n\t// tone mapping\n\n\tthis.toneMapping = LinearToneMapping;\n\tthis.toneMappingExposure = 1.0;\n\tthis.toneMappingWhitePoint = 1.0;\n\n\t// morphs\n\n\tthis.maxMorphTargets = 8;\n\tthis.maxMorphNormals = 4;\n\n\t// internal properties\n\n\tvar _this = this,\n\n\t\t// internal state cache\n\n\t\t_currentProgram = null,\n\t\t_currentRenderTarget = null,\n\t\t_currentFramebuffer = null,\n\t\t_currentMaterialId = - 1,\n\t\t_currentGeometryProgram = '',\n\t\t_currentCamera = null,\n\n\t\t_currentScissor = new Vector4(),\n\t\t_currentScissorTest = null,\n\n\t\t_currentViewport = new Vector4(),\n\n\t\t//\n\n\t\t_usedTextureUnits = 0,\n\n\t\t//\n\n\t\t_clearColor = new Color( 0x000000 ),\n\t\t_clearAlpha = 0,\n\n\t\t_width = _canvas.width,\n\t\t_height = _canvas.height,\n\n\t\t_pixelRatio = 1,\n\n\t\t_scissor = new Vector4( 0, 0, _width, _height ),\n\t\t_scissorTest = false,\n\n\t\t_viewport = new Vector4( 0, 0, _width, _height ),\n\n\t\t// frustum\n\n\t\t_frustum = new Frustum(),\n\n\t\t// clipping\n\n\t\t_clipping = new WebGLClipping(),\n\t\t_clippingEnabled = false,\n\t\t_localClippingEnabled = false,\n\n\t\t// camera matrices cache\n\n\t\t_projScreenMatrix = new Matrix4(),\n\n\t\t_vector3 = new Vector3(),\n\t\t_matrix4 = new Matrix4(),\n\t\t_matrix42 = new Matrix4(),\n\n\t\t// light arrays cache\n\n\t\t_lights = {\n\n\t\t\thash: '',\n\n\t\t\tambient: [ 0, 0, 0 ],\n\t\t\tdirectional: [],\n\t\t\tdirectionalShadowMap: [],\n\t\t\tdirectionalShadowMatrix: [],\n\t\t\tspot: [],\n\t\t\tspotShadowMap: [],\n\t\t\tspotShadowMatrix: [],\n\t\t\trectArea: [],\n\t\t\tpoint: [],\n\t\t\tpointShadowMap: [],\n\t\t\tpointShadowMatrix: [],\n\t\t\themi: [],\n\n\t\t\tshadows: []\n\n\t\t},\n\n\t\t// info\n\n\t\t_infoMemory = {\n\t\t\tgeometries: 0,\n\t\t\ttextures: 0\n\t\t},\n\n\t\t_infoRender = {\n\n\t\t\tframe: 0,\n\t\t\tcalls: 0,\n\t\t\tvertices: 0,\n\t\t\tfaces: 0,\n\t\t\tpoints: 0\n\n\t\t};\n\n\tthis.info = {\n\n\t\trender: _infoRender,\n\t\tmemory: _infoMemory,\n\t\tprograms: null\n\n\t};\n\n\n\t// initialize\n\n\tvar _gl;\n\n\ttry {\n\n\t\tvar contextAttributes = {\n\t\t\talpha: _alpha,\n\t\t\tdepth: _depth,\n\t\t\tstencil: _stencil,\n\t\t\tantialias: _antialias,\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer\n\t\t};\n\n\t\t_gl = _context || _canvas.getContext( 'webgl', contextAttributes ) || _canvas.getContext( 'experimental-webgl', contextAttributes );\n\n\t\tif ( _gl === null ) {\n\n\t\t\tif ( _canvas.getContext( 'webgl' ) !== null ) {\n\n\t\t\t\tthrow 'Error creating WebGL context with your selected attributes.';\n\n\t\t\t} else {\n\n\t\t\t\tthrow 'Error creating WebGL context.';\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n\t\t\t};\n\n\t\t}\n\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\n\n\t} catch ( error ) {\n\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error );\n\n\t}\n\n\tvar extensions = new WebGLExtensions( _gl );\n\n\textensions.get( 'WEBGL_depth_texture' );\n\textensions.get( 'OES_texture_float' );\n\textensions.get( 'OES_texture_float_linear' );\n\textensions.get( 'OES_texture_half_float' );\n\textensions.get( 'OES_texture_half_float_linear' );\n\textensions.get( 'OES_standard_derivatives' );\n\textensions.get( 'ANGLE_instanced_arrays' );\n\n\tif ( extensions.get( 'OES_element_index_uint' ) ) {\n\n\t\tBufferGeometry.MaxIndex = 4294967296;\n\n\t}\n\n\tvar capabilities = new WebGLCapabilities( _gl, extensions, parameters );\n\n\tvar state = new WebGLState( _gl, extensions, paramThreeToGL );\n\n\tvar properties = new WebGLProperties();\n\tvar textures = new WebGLTextures( _gl, extensions, state, properties, capabilities, paramThreeToGL, _infoMemory );\n\tvar attributes = new WebGLAttributes( _gl );\n\tvar geometries = new WebGLGeometries( _gl, attributes, _infoMemory );\n\tvar objects = new WebGLObjects( _gl, geometries, _infoRender );\n\tvar programCache = new WebGLPrograms( this, capabilities );\n\tvar lightCache = new WebGLLights();\n\tvar renderLists = new WebGLRenderLists();\n\n\tthis.info.programs = programCache.programs;\n\n\tvar bufferRenderer = new WebGLBufferRenderer( _gl, extensions, _infoRender );\n\tvar indexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, _infoRender );\n\n\t//\n\n\tvar backgroundPlaneCamera, backgroundPlaneMesh;\n\tvar backgroundBoxCamera, backgroundBoxMesh;\n\n\t//\n\n\tfunction getTargetPixelRatio() {\n\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\n\n\t}\n\n\tfunction setDefaultGLState() {\n\n\t\tstate.init();\n\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ) );\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ) );\n\n\t\tstate.buffers.color.setClear( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha, _premultipliedAlpha );\n\n\t}\n\n\tfunction resetGLState() {\n\n\t\t_currentProgram = null;\n\t\t_currentCamera = null;\n\n\t\t_currentGeometryProgram = '';\n\t\t_currentMaterialId = - 1;\n\n\t\tstate.reset();\n\n\t}\n\n\tsetDefaultGLState();\n\n\tthis.context = _gl;\n\tthis.capabilities = capabilities;\n\tthis.extensions = extensions;\n\tthis.properties = properties;\n\tthis.state = state;\n\n\t// shadow map\n\n\tvar shadowMap = new WebGLShadowMap( this, _lights, objects, capabilities );\n\n\tthis.shadowMap = shadowMap;\n\n\n\t// Plugins\n\n\tvar spritePlugin = new SpritePlugin( this, sprites );\n\tvar lensFlarePlugin = new LensFlarePlugin( this, lensFlares );\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _gl;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _gl.getContextAttributes();\n\n\t};\n\n\tthis.forceContextLoss = function () {\n\n\t\tvar extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.loseContext();\n\n\t};\n\n\tthis.getMaxAnisotropy = function () {\n\n\t\treturn capabilities.getMaxAnisotropy();\n\n\t};\n\n\tthis.getPrecision = function () {\n\n\t\treturn capabilities.precision;\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value === undefined ) return;\n\n\t\t_pixelRatio = value;\n\n\t\tthis.setSize( _viewport.z, _viewport.w, false );\n\n\t};\n\n\tthis.getSize = function () {\n\n\t\treturn {\n\t\t\twidth: _width,\n\t\t\theight: _height\n\t\t};\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_canvas.width = width * _pixelRatio;\n\t\t_canvas.height = height * _pixelRatio;\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\tstate.viewport( _viewport.set( x, y, width, height ) );\n\n\t};\n\n\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\tstate.scissor( _scissor.set( x, y, width, height ) );\n\n\t};\n\n\tthis.setScissorTest = function ( boolean ) {\n\n\t\tstate.setScissorTest( _scissorTest = boolean );\n\n\t};\n\n\t// Clearing\n\n\tthis.getClearColor = function () {\n\n\t\treturn _clearColor;\n\n\t};\n\n\tthis.setClearColor = function ( color, alpha ) {\n\n\t\t_clearColor.set( color );\n\n\t\t_clearAlpha = alpha !== undefined ? alpha : 1;\n\n\t\tstate.buffers.color.setClear( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha, _premultipliedAlpha );\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn _clearAlpha;\n\n\t};\n\n\tthis.setClearAlpha = function ( alpha ) {\n\n\t\t_clearAlpha = alpha;\n\n\t\tstate.buffers.color.setClear( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha, _premultipliedAlpha );\n\n\t};\n\n\tthis.clear = function ( color, depth, stencil ) {\n\n\t\tvar bits = 0;\n\n\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\n\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\n\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t_gl.clear( bits );\n\n\t};\n\n\tthis.clearColor = function () {\n\n\t\tthis.clear( true, false, false );\n\n\t};\n\n\tthis.clearDepth = function () {\n\n\t\tthis.clear( false, true, false );\n\n\t};\n\n\tthis.clearStencil = function () {\n\n\t\tthis.clear( false, false, true );\n\n\t};\n\n\tthis.clearTarget = function ( renderTarget, color, depth, stencil ) {\n\n\t\tthis.setRenderTarget( renderTarget );\n\t\tthis.clear( color, depth, stencil );\n\n\t};\n\n\t// Reset\n\n\tthis.resetGLState = resetGLState;\n\n\tthis.dispose = function () {\n\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\n\n\t\trenderLists.dispose();\n\n\t};\n\n\t// Events\n\n\tfunction onContextLost( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tresetGLState();\n\t\tsetDefaultGLState();\n\n\t\tproperties.clear();\n\t\tobjects.clear();\n\n\t}\n\n\tfunction onMaterialDispose( event ) {\n\n\t\tvar material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\tdeallocateMaterial( material );\n\n\t}\n\n\t// Buffer deallocation\n\n\tfunction deallocateMaterial( material ) {\n\n\t\treleaseMaterialProgramReference( material );\n\n\t\tproperties.remove( material );\n\n\t}\n\n\n\tfunction releaseMaterialProgramReference( material ) {\n\n\t\tvar programInfo = properties.get( material ).program;\n\n\t\tmaterial.program = undefined;\n\n\t\tif ( programInfo !== undefined ) {\n\n\t\t\tprogramCache.releaseProgram( programInfo );\n\n\t\t}\n\n\t}\n\n\t// Buffer rendering\n\n\tfunction renderObjectImmediate( object, program, material ) {\n\n\t\tobject.render( function ( object ) {\n\n\t\t\t_this.renderBufferImmediate( object, program, material );\n\n\t\t} );\n\n\t}\n\n\tthis.renderBufferImmediate = function ( object, program, material ) {\n\n\t\tstate.initAttributes();\n\n\t\tvar buffers = properties.get( object );\n\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tif ( object.hasPositions ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.position );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.position );\n\t\t\t_gl.vertexAttribPointer( programAttributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasNormals ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.normal );\n\n\t\t\tif ( ! material.isMeshPhongMaterial &&\n\t\t\t\t! material.isMeshStandardMaterial &&\n\t\t\t\t! material.isMeshNormalMaterial &&\n\t\t\t\tmaterial.shading === FlatShading ) {\n\n\t\t\t\tfor ( var i = 0, l = object.count * 3; i < l; i += 9 ) {\n\n\t\t\t\t\tvar array = object.normalArray;\n\n\t\t\t\t\tvar nx = ( array[ i + 0 ] + array[ i + 3 ] + array[ i + 6 ] ) / 3;\n\t\t\t\t\tvar ny = ( array[ i + 1 ] + array[ i + 4 ] + array[ i + 7 ] ) / 3;\n\t\t\t\t\tvar nz = ( array[ i + 2 ] + array[ i + 5 ] + array[ i + 8 ] ) / 3;\n\n\t\t\t\t\tarray[ i + 0 ] = nx;\n\t\t\t\t\tarray[ i + 1 ] = ny;\n\t\t\t\t\tarray[ i + 2 ] = nz;\n\n\t\t\t\t\tarray[ i + 3 ] = nx;\n\t\t\t\t\tarray[ i + 4 ] = ny;\n\t\t\t\t\tarray[ i + 5 ] = nz;\n\n\t\t\t\t\tarray[ i + 6 ] = nx;\n\t\t\t\t\tarray[ i + 7 ] = ny;\n\t\t\t\t\tarray[ i + 8 ] = nz;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.normal );\n\n\t\t\t_gl.vertexAttribPointer( programAttributes.normal, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasUvs && material.map ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.uv );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.uv );\n\n\t\t\t_gl.vertexAttribPointer( attributes.uv, 2, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasColors && material.vertexColors !== NoColors ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.color );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.color );\n\n\t\t\t_gl.vertexAttribPointer( programAttributes.color, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tstate.disableUnusedAttributes();\n\n\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\n\n\t\tobject.count = 0;\n\n\t};\n\n\tfunction absNumericalSort( a, b ) {\n\n\t\treturn Math.abs( b[ 0 ] ) - Math.abs( a[ 0 ] );\n\n\t}\n\n\tthis.renderBufferDirect = function ( camera, fog, geometry, material, object, group ) {\n\n\t\tstate.setMaterial( material );\n\n\t\tvar program = setProgram( camera, fog, material, object );\n\t\tvar geometryProgram = geometry.id + '_' + program.id + '_' + ( material.wireframe === true );\n\n\t\tvar updateBuffers = false;\n\n\t\tif ( geometryProgram !== _currentGeometryProgram ) {\n\n\t\t\t_currentGeometryProgram = geometryProgram;\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tvar morphTargetInfluences = object.morphTargetInfluences;\n\n\t\tif ( morphTargetInfluences !== undefined ) {\n\n\t\t\t// TODO Remove allocations\n\n\t\t\tvar activeInfluences = [];\n\n\t\t\tfor ( var i = 0, l = morphTargetInfluences.length; i < l; i ++ ) {\n\n\t\t\t\tvar influence = morphTargetInfluences[ i ];\n\t\t\t\tactiveInfluences.push( [ influence, i ] );\n\n\t\t\t}\n\n\t\t\tactiveInfluences.sort( absNumericalSort );\n\n\t\t\tif ( activeInfluences.length > 8 ) {\n\n\t\t\t\tactiveInfluences.length = 8;\n\n\t\t\t}\n\n\t\t\tvar morphAttributes = geometry.morphAttributes;\n\n\t\t\tfor ( var i = 0, l = activeInfluences.length; i < l; i ++ ) {\n\n\t\t\t\tvar influence = activeInfluences[ i ];\n\t\t\t\tmorphInfluences[ i ] = influence[ 0 ];\n\n\t\t\t\tif ( influence[ 0 ] !== 0 ) {\n\n\t\t\t\t\tvar index = influence[ 1 ];\n\n\t\t\t\t\tif ( material.morphTargets === true && morphAttributes.position ) geometry.addAttribute( 'morphTarget' + i, morphAttributes.position[ index ] );\n\t\t\t\t\tif ( material.morphNormals === true && morphAttributes.normal ) geometry.addAttribute( 'morphNormal' + i, morphAttributes.normal[ index ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( material.morphTargets === true ) geometry.removeAttribute( 'morphTarget' + i );\n\t\t\t\t\tif ( material.morphNormals === true ) geometry.removeAttribute( 'morphNormal' + i );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( var i = activeInfluences.length, il = morphInfluences.length; i < il; i ++ ) {\n\n\t\t\t\tmorphInfluences[ i ] = 0.0;\n\n\t\t\t}\n\n\t\t\tprogram.getUniforms().setValue( _gl, 'morphTargetInfluences', morphInfluences );\n\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\t//\n\n\t\tvar index = geometry.index;\n\t\tvar position = geometry.attributes.position;\n\t\tvar rangeFactor = 1;\n\n\t\tif ( material.wireframe === true ) {\n\n\t\t\tindex = geometries.getWireframeAttribute( geometry );\n\t\t\trangeFactor = 2;\n\n\t\t}\n\n\t\tvar renderer = bufferRenderer;\n\n\t\tif ( index !== null ) {\n\n\t\t\trenderer = indexedBufferRenderer;\n\t\t\trenderer.setIndex( index );\n\n\t\t}\n\n\t\tif ( updateBuffers ) {\n\n\t\t\tsetupVertexAttributes( material, program, geometry );\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, attributes.get( index ).buffer );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar dataCount = 0;\n\n\t\tif ( index !== null ) {\n\n\t\t\tdataCount = index.count;\n\n\t\t} else if ( position !== undefined ) {\n\n\t\t\tdataCount = position.count;\n\n\t\t}\n\n\t\tvar rangeStart = geometry.drawRange.start * rangeFactor;\n\t\tvar rangeCount = geometry.drawRange.count * rangeFactor;\n\n\t\tvar groupStart = group !== null ? group.start * rangeFactor : 0;\n\t\tvar groupCount = group !== null ? group.count * rangeFactor : Infinity;\n\n\t\tvar drawStart = Math.max( rangeStart, groupStart );\n\t\tvar drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\n\n\t\tvar drawCount = Math.max( 0, drawEnd - drawStart + 1 );\n\n\t\tif ( drawCount === 0 ) return;\n\n\t\t//\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\n\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t} else {\n\n\t\t\t\tswitch ( object.drawMode ) {\n\n\t\t\t\t\tcase TrianglesDrawMode:\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLES );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TriangleStripDrawMode:\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_STRIP );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TriangleFanDrawMode:\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_FAN );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t} else if ( object.isLine ) {\n\n\t\t\tvar lineWidth = material.linewidth;\n\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\n\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\n\n\t\t\tif ( object.isLineSegments ) {\n\n\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t} else if ( object.isLineLoop ) {\n\n\t\t\t\trenderer.setMode( _gl.LINE_LOOP );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( _gl.LINE_STRIP );\n\n\t\t\t}\n\n\t\t} else if ( object.isPoints ) {\n\n\t\t\trenderer.setMode( _gl.POINTS );\n\n\t\t}\n\n\t\tif ( geometry && geometry.isInstancedBufferGeometry ) {\n\n\t\t\tif ( geometry.maxInstancedCount > 0 ) {\n\n\t\t\t\trenderer.renderInstances( geometry, drawStart, drawCount );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderer.render( drawStart, drawCount );\n\n\t\t}\n\n\t};\n\n\tfunction setupVertexAttributes( material, program, geometry, startIndex ) {\n\n\t\tif ( geometry && geometry.isInstancedBufferGeometry ) {\n\n\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( startIndex === undefined ) startIndex = 0;\n\n\t\tstate.initAttributes();\n\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tvar materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\tfor ( var name in programAttributes ) {\n\n\t\t\tvar programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute >= 0 ) {\n\n\t\t\t\tvar geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tvar normalized = geometryAttribute.normalized;\n\t\t\t\t\tvar size = geometryAttribute.itemSize;\n\n\t\t\t\t\tvar attributeProperties = attributes.get( geometryAttribute );\n\n\t\t\t\t\tvar buffer = attributeProperties.buffer;\n\t\t\t\t\tvar type = attributeProperties.type;\n\t\t\t\t\tvar bytesPerElement = attributeProperties.bytesPerElement;\n\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tvar data = geometryAttribute.data;\n\t\t\t\t\t\tvar stride = data.stride;\n\t\t\t\t\t\tvar offset = geometryAttribute.offset;\n\n\t\t\t\t\t\tif ( data && data.isInstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, data.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, stride * bytesPerElement, ( startIndex * stride + offset ) * bytesPerElement );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, 0, startIndex * size * bytesPerElement );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tvar value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib4fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib1fv( programAttribute, value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.disableUnusedAttributes();\n\n\t}\n\n\t// Compile\n\n\tthis.compile = function ( scene, camera ) {\n\n\t\tlights = [];\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object.isLight ) {\n\n\t\t\t\tlights.push( object );\n\n\t\t\t}\n\n\t\t} );\n\n\t\tsetupLights( lights, camera );\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object.material ) {\n\n\t\t\t\tif ( Array.isArray( object.material ) ) {\n\n\t\t\t\t\tfor ( var i = 0; i < object.material.length; i ++ ) {\n\n\t\t\t\t\t\tinitMaterial( object.material[ i ], scene.fog, object );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinitMaterial( object.material, scene.fog, object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t};\n\n\t// Rendering\n\n\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\n\n\t\tif ( camera !== undefined && camera.isCamera !== true ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// reset caching for this frame\n\n\t\t_currentGeometryProgram = '';\n\t\t_currentMaterialId = - 1;\n\t\t_currentCamera = null;\n\n\t\t// update scene graph\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t// update camera matrices and frustum\n\n\t\tcamera.onBeforeRender( _this );\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t_frustum.setFromMatrix( _projScreenMatrix );\n\n\t\tlights.length = 0;\n\t\tsprites.length = 0;\n\t\tlensFlares.length = 0;\n\n\t\t_localClippingEnabled = this.localClippingEnabled;\n\t\t_clippingEnabled = _clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\n\n\t\tcurrentRenderList = renderLists.get( scene, camera );\n\t\tcurrentRenderList.init();\n\n\t\tprojectObject( scene, camera, _this.sortObjects );\n\n\t\tcurrentRenderList.finish();\n\n\t\tif ( _this.sortObjects === true ) {\n\n\t\t\tcurrentRenderList.sort();\n\n\t\t}\n\n\t\t//\n\n\t\tif ( _clippingEnabled ) _clipping.beginShadows();\n\n\t\tsetupShadows( lights );\n\n\t\tshadowMap.render( scene, camera );\n\n\t\tsetupLights( lights, camera );\n\n\t\tif ( _clippingEnabled ) _clipping.endShadows();\n\n\t\t//\n\n\t\t_infoRender.frame ++;\n\t\t_infoRender.calls = 0;\n\t\t_infoRender.vertices = 0;\n\t\t_infoRender.faces = 0;\n\t\t_infoRender.points = 0;\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\trenderTarget = null;\n\n\t\t}\n\n\t\tthis.setRenderTarget( renderTarget );\n\n\t\t//\n\n\t\tvar background = scene.background;\n\n\t\tif ( background === null ) {\n\n\t\t\tstate.buffers.color.setClear( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha, _premultipliedAlpha );\n\n\t\t} else if ( background && background.isColor ) {\n\n\t\t\tstate.buffers.color.setClear( background.r, background.g, background.b, 1, _premultipliedAlpha );\n\t\t\tforceClear = true;\n\n\t\t}\n\n\t\tif ( this.autoClear || forceClear ) {\n\n\t\t\tthis.clear( this.autoClearColor, this.autoClearDepth, this.autoClearStencil );\n\n\t\t}\n\n\t\tif ( background && background.isCubeTexture ) {\n\n\t\t\tif ( backgroundBoxCamera === undefined ) {\n\n\t\t\t\tbackgroundBoxCamera = new PerspectiveCamera();\n\n\t\t\t\tbackgroundBoxMesh = new Mesh(\n\t\t\t\t\tnew BoxBufferGeometry( 5, 5, 5 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tuniforms: ShaderLib.cube.uniforms,\n\t\t\t\t\t\tvertexShader: ShaderLib.cube.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.cube.fragmentShader,\n\t\t\t\t\t\tside: BackSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tbackgroundBoxCamera.projectionMatrix.copy( camera.projectionMatrix );\n\n\t\t\tbackgroundBoxCamera.matrixWorld.extractRotation( camera.matrixWorld );\n\t\t\tbackgroundBoxCamera.matrixWorldInverse.getInverse( backgroundBoxCamera.matrixWorld );\n\n\n\t\t\tbackgroundBoxMesh.material.uniforms[ \"tCube\" ].value = background;\n\t\t\tbackgroundBoxMesh.modelViewMatrix.multiplyMatrices( backgroundBoxCamera.matrixWorldInverse, backgroundBoxMesh.matrixWorld );\n\n\t\t\tobjects.update( backgroundBoxMesh );\n\n\t\t\t_this.renderBufferDirect( backgroundBoxCamera, null, backgroundBoxMesh.geometry, backgroundBoxMesh.material, backgroundBoxMesh, null );\n\n\t\t} else if ( background && background.isTexture ) {\n\n\t\t\tif ( backgroundPlaneCamera === undefined ) {\n\n\t\t\t\tbackgroundPlaneCamera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\n\t\t\t\tbackgroundPlaneMesh = new Mesh(\n\t\t\t\t\tnew PlaneBufferGeometry( 2, 2 ),\n\t\t\t\t\tnew MeshBasicMaterial( { depthTest: false, depthWrite: false, fog: false } )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tbackgroundPlaneMesh.material.map = background;\n\n\t\t\tobjects.update( backgroundPlaneMesh );\n\n\t\t\t_this.renderBufferDirect( backgroundPlaneCamera, null, backgroundPlaneMesh.geometry, backgroundPlaneMesh.material, backgroundPlaneMesh, null );\n\n\t\t}\n\n\t\t//\n\n\t\tvar opaqueObjects = currentRenderList.opaque;\n\t\tvar transparentObjects = currentRenderList.transparent;\n\n\t\tif ( scene.overrideMaterial ) {\n\n\t\t\tvar overrideMaterial = scene.overrideMaterial;\n\n\t\t\tif ( opaqueObjects.length ) renderObjects( opaqueObjects, scene, camera, overrideMaterial );\n\t\t\tif ( transparentObjects.length ) renderObjects( transparentObjects, scene, camera, overrideMaterial );\n\n\t\t} else {\n\n\t\t\t// opaque pass (front-to-back order)\n\n\t\t\tif ( opaqueObjects.length ) renderObjects( opaqueObjects, scene, camera );\n\n\t\t\t// transparent pass (back-to-front order)\n\n\t\t\tif ( transparentObjects.length ) renderObjects( transparentObjects, scene, camera );\n\n\t\t}\n\n\t\t// custom render plugins (post pass)\n\n\t\tspritePlugin.render( scene, camera );\n\t\tlensFlarePlugin.render( scene, camera, _currentViewport );\n\n\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\tif ( renderTarget ) {\n\n\t\t\ttextures.updateRenderTargetMipmap( renderTarget );\n\n\t\t}\n\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\tstate.buffers.depth.setTest( true );\n\t\tstate.buffers.depth.setMask( true );\n\t\tstate.buffers.color.setMask( true );\n\n\t\tif ( camera.isArrayCamera && camera.enabled ) {\n\n\t\t\t_this.setScissorTest( false );\n\n\t\t}\n\n\t\tcamera.onAfterRender( _this );\n\n\t\t// _gl.finish();\n\n\t};\n\n\t/*\n\t// TODO Duplicated code (Frustum)\n\n\tvar _sphere = new Sphere();\n\n\tfunction isObjectViewable( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( geometry.boundingSphere === null )\n\t\t\tgeometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere ).\n\t\tapplyMatrix4( object.matrixWorld );\n\n\t\treturn isSphereViewable( _sphere );\n\n\t}\n\n\tfunction isSpriteViewable( sprite ) {\n\n\t\t_sphere.center.set( 0, 0, 0 );\n\t\t_sphere.radius = 0.7071067811865476;\n\t\t_sphere.applyMatrix4( sprite.matrixWorld );\n\n\t\treturn isSphereViewable( _sphere );\n\n\t}\n\n\tfunction isSphereViewable( sphere ) {\n\n\t\tif ( ! _frustum.intersectsSphere( sphere ) ) return false;\n\n\t\tvar numPlanes = _clipping.numPlanes;\n\n\t\tif ( numPlanes === 0 ) return true;\n\n\t\tvar planes = _this.clippingPlanes,\n\n\t\t\tcenter = sphere.center,\n\t\t\tnegRad = - sphere.radius,\n\t\t\ti = 0;\n\n\t\tdo {\n\n\t\t\t// out when deeper than radius in the negative halfspace\n\t\t\tif ( planes[ i ].distanceToPoint( center ) < negRad ) return false;\n\n\t\t} while ( ++ i !== numPlanes );\n\n\t\treturn true;\n\n\t}\n\t*/\n\n\tfunction projectObject( object, camera, sortObjects ) {\n\n\t\tif ( ! object.visible ) return;\n\n\t\tvar visible = object.layers.test( camera.layers );\n\n\t\tif ( visible ) {\n\n\t\t\tif ( object.isLight ) {\n\n\t\t\t\tlights.push( object );\n\n\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\n\n\t\t\t\t\tsprites.push( object );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isLensFlare ) {\n\n\t\t\t\tlensFlares.push( object );\n\n\t\t\t} else if ( object.isImmediateRenderObject ) {\n\n\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tcurrentRenderList.push( object, null, object.material, _vector3.z, null );\n\n\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\t\tobject.skeleton.update();\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar geometry = objects.update( object );\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\tvar groups = geometry.groups;\n\n\t\t\t\t\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tvar group = groups[ i ];\n\t\t\t\t\t\t\tvar groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, _vector3.z, group );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ], camera, sortObjects );\n\n\t\t}\n\n\t}\n\n\tfunction renderObjects( renderList, scene, camera, overrideMaterial ) {\n\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tvar renderItem = renderList[ i ];\n\n\t\t\tvar object = renderItem.object;\n\t\t\tvar geometry = renderItem.geometry;\n\t\t\tvar material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\n\t\t\tvar group = renderItem.group;\n\n\t\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\n\n\t\t\tif ( camera.isArrayCamera && camera.enabled ) {\n\n\t\t\t\tvar cameras = camera.cameras;\n\n\t\t\t\tfor ( var j = 0, jl = cameras.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar camera2 = cameras[ j ];\n\t\t\t\t\tvar bounds = camera2.bounds;\n\n\t\t\t\t\t_this.setViewport(\n\t\t\t\t\t\tbounds.x * _width * _pixelRatio, bounds.y * _height * _pixelRatio,\n\t\t\t\t\t\tbounds.z * _width * _pixelRatio, bounds.w * _height * _pixelRatio\n\t\t\t\t\t);\n\t\t\t\t\t_this.setScissor(\n\t\t\t\t\t\tbounds.x * _width * _pixelRatio, bounds.y * _height * _pixelRatio,\n\t\t\t\t\t\tbounds.z * _width * _pixelRatio, bounds.w * _height * _pixelRatio\n\t\t\t\t\t);\n\t\t\t\t\t_this.setScissorTest( true );\n\n\t\t\t\t\trenderObject( object, scene, camera2, geometry, material, group );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t}\n\n\t\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\n\n\t\t}\n\n\t}\n\n\tfunction renderObject( object, scene, camera, geometry, material, group ) {\n\n\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\n\n\t\tif ( object.isImmediateRenderObject ) {\n\n\t\t\tstate.setMaterial( material );\n\n\t\t\tvar program = setProgram( camera, scene.fog, material, object );\n\n\t\t\t_currentGeometryProgram = '';\n\n\t\t\trenderObjectImmediate( object, program, material );\n\n\t\t} else {\n\n\t\t\t_this.renderBufferDirect( camera, scene.fog, geometry, material, object, group );\n\n\t\t}\n\n\t}\n\n\tfunction initMaterial( material, fog, object ) {\n\n\t\tvar materialProperties = properties.get( material );\n\n\t\tvar parameters = programCache.getParameters(\n\t\t\tmaterial, _lights, fog, _clipping.numPlanes, _clipping.numIntersection, object );\n\n\t\tvar code = programCache.getProgramCode( material, parameters );\n\n\t\tvar program = materialProperties.program;\n\t\tvar programChange = true;\n\n\t\tif ( program === undefined ) {\n\n\t\t\t// new material\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t} else if ( program.code !== code ) {\n\n\t\t\t// changed glsl or parameters\n\t\t\treleaseMaterialProgramReference( material );\n\n\t\t} else if ( parameters.shaderID !== undefined ) {\n\n\t\t\t// same glsl and uniform list\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\t// only rebuild uniform list\n\t\t\tprogramChange = false;\n\n\t\t}\n\n\t\tif ( programChange ) {\n\n\t\t\tif ( parameters.shaderID ) {\n\n\t\t\t\tvar shader = ShaderLib[ parameters.shaderID ];\n\n\t\t\t\tmaterialProperties.__webglShader = {\n\t\t\t\t\tname: material.type,\n\t\t\t\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\t\t\t\tvertexShader: shader.vertexShader,\n\t\t\t\t\tfragmentShader: shader.fragmentShader\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tmaterialProperties.__webglShader = {\n\t\t\t\t\tname: material.type,\n\t\t\t\t\tuniforms: material.uniforms,\n\t\t\t\t\tvertexShader: material.vertexShader,\n\t\t\t\t\tfragmentShader: material.fragmentShader\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tmaterial.__webglShader = materialProperties.__webglShader;\n\n\t\t\tprogram = programCache.acquireProgram( material, parameters, code );\n\n\t\t\tmaterialProperties.program = program;\n\t\t\tmaterial.program = program;\n\n\t\t}\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tif ( material.morphTargets ) {\n\n\t\t\tmaterial.numSupportedMorphTargets = 0;\n\n\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\n\n\t\t\t\tif ( programAttributes[ 'morphTarget' + i ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.morphNormals ) {\n\n\t\t\tmaterial.numSupportedMorphNormals = 0;\n\n\t\t\tfor ( var i = 0; i < _this.maxMorphNormals; i ++ ) {\n\n\t\t\t\tif ( programAttributes[ 'morphNormal' + i ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar uniforms = materialProperties.__webglShader.uniforms;\n\n\t\tif ( ! material.isShaderMaterial &&\n\t\t\t! material.isRawShaderMaterial ||\n\t\t\tmaterial.clipping === true ) {\n\n\t\t\tmaterialProperties.numClippingPlanes = _clipping.numPlanes;\n\t\t\tmaterialProperties.numIntersection = _clipping.numIntersection;\n\t\t\tuniforms.clippingPlanes = _clipping.uniform;\n\n\t\t}\n\n\t\tmaterialProperties.fog = fog;\n\n\t\t// store the light setup it was created for\n\n\t\tmaterialProperties.lightsHash = _lights.hash;\n\n\t\tif ( material.lights ) {\n\n\t\t\t// wire up the material to this renderer's lighting state\n\n\t\t\tuniforms.ambientLightColor.value = _lights.ambient;\n\t\t\tuniforms.directionalLights.value = _lights.directional;\n\t\t\tuniforms.spotLights.value = _lights.spot;\n\t\t\tuniforms.rectAreaLights.value = _lights.rectArea;\n\t\t\tuniforms.pointLights.value = _lights.point;\n\t\t\tuniforms.hemisphereLights.value = _lights.hemi;\n\n\t\t\tuniforms.directionalShadowMap.value = _lights.directionalShadowMap;\n\t\t\tuniforms.directionalShadowMatrix.value = _lights.directionalShadowMatrix;\n\t\t\tuniforms.spotShadowMap.value = _lights.spotShadowMap;\n\t\t\tuniforms.spotShadowMatrix.value = _lights.spotShadowMatrix;\n\t\t\tuniforms.pointShadowMap.value = _lights.pointShadowMap;\n\t\t\tuniforms.pointShadowMatrix.value = _lights.pointShadowMatrix;\n\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\n\n\t\t}\n\n\t\tvar progUniforms = materialProperties.program.getUniforms(),\n\t\t\tuniformsList =\n\t\t\t\tWebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\n\n\t\tmaterialProperties.uniformsList = uniformsList;\n\n\t}\n\n\tfunction setProgram( camera, fog, material, object ) {\n\n\t\t_usedTextureUnits = 0;\n\n\t\tvar materialProperties = properties.get( material );\n\n\t\tif ( _clippingEnabled ) {\n\n\t\t\tif ( _localClippingEnabled || camera !== _currentCamera ) {\n\n\t\t\t\tvar useCache =\n\t\t\t\t\tcamera === _currentCamera &&\n\t\t\t\t\tmaterial.id === _currentMaterialId;\n\n\t\t\t\t// we might want to call this function with some ClippingGroup\n\t\t\t\t// object instead of the material, once it becomes feasible\n\t\t\t\t// (#8465, #8379)\n\t\t\t\t_clipping.setState(\n\t\t\t\t\tmaterial.clippingPlanes, material.clipIntersection, material.clipShadows,\n\t\t\t\t\tcamera, materialProperties, useCache );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.needsUpdate === false ) {\n\n\t\t\tif ( materialProperties.program === undefined ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( material.fog && materialProperties.fog !== fog ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( material.lights && materialProperties.lightsHash !== _lights.hash ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\n\t\t\t\t( materialProperties.numClippingPlanes !== _clipping.numPlanes ||\n\t\t\t\tmaterialProperties.numIntersection !== _clipping.numIntersection ) ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.needsUpdate ) {\n\n\t\t\tinitMaterial( material, fog, object );\n\t\t\tmaterial.needsUpdate = false;\n\n\t\t}\n\n\t\tvar refreshProgram = false;\n\t\tvar refreshMaterial = false;\n\t\tvar refreshLights = false;\n\n\t\tvar program = materialProperties.program,\n\t\t\tp_uniforms = program.getUniforms(),\n\t\t\tm_uniforms = materialProperties.__webglShader.uniforms;\n\n\t\tif ( program.id !== _currentProgram ) {\n\n\t\t\t_gl.useProgram( program.program );\n\t\t\t_currentProgram = program.id;\n\n\t\t\trefreshProgram = true;\n\t\t\trefreshMaterial = true;\n\t\t\trefreshLights = true;\n\n\t\t}\n\n\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\t_currentMaterialId = material.id;\n\n\t\t\trefreshMaterial = true;\n\n\t\t}\n\n\t\tif ( refreshProgram || camera !== _currentCamera ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\n\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\n\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t}\n\n\n\t\t\tif ( camera !== _currentCamera ) {\n\n\t\t\t\t_currentCamera = camera;\n\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\n\t\t\t\t// now, in case this material supports lights - or later, when\n\t\t\t\t// the next material that does gets activated:\n\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\n\n\t\t\t}\n\n\t\t\t// load material specific uniforms\n\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\tif ( material.isShaderMaterial ||\n\t\t\t\tmaterial.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.envMap ) {\n\n\t\t\t\tvar uCamPos = p_uniforms.map.cameraPosition;\n\n\t\t\t\tif ( uCamPos !== undefined ) {\n\n\t\t\t\t\tuCamPos.setValue( _gl,\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ||\n\t\t\t\tmaterial.skinning ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\n\n\t\t\t}\n\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingWhitePoint', _this.toneMappingWhitePoint );\n\n\t\t}\n\n\t\t// skinning uniforms must be set even if material didn't change\n\t\t// auto-setting of texture unit for bone texture must go before other textures\n\t\t// not sure why, but otherwise weird things happen\n\n\t\tif ( material.skinning ) {\n\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\n\n\t\t\tvar skeleton = object.skeleton;\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tvar bones = skeleton.bones;\n\n\t\t\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\t\t\tif ( skeleton.boneTexture === undefined ) {\n\n\t\t\t\t\t\t// layout (1 matrix = 4 pixels)\n\t\t\t\t\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t\t\t\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n\t\t\t\t\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n\t\t\t\t\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n\t\t\t\t\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\n\t\t\t\t\t\tvar size = Math.sqrt( bones.length * 4 ); // 4 pixels needed for 1 matrix\n\t\t\t\t\t\tsize = _Math.nextPowerOfTwo( Math.ceil( size ) );\n\t\t\t\t\t\tsize = Math.max( size, 4 );\n\n\t\t\t\t\t\tvar boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\n\t\t\t\t\t\tboneMatrices.set( skeleton.boneMatrices ); // copy current values\n\n\t\t\t\t\t\tvar boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\n\n\t\t\t\t\t\tskeleton.boneMatrices = boneMatrices;\n\t\t\t\t\t\tskeleton.boneTexture = boneTexture;\n\t\t\t\t\t\tskeleton.boneTextureSize = size;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture );\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tp_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( refreshMaterial ) {\n\n\t\t\tif ( material.lights ) {\n\n\t\t\t\t// the current material requires lighting info\n\n\t\t\t\t// note: all lighting uniforms are always set correctly\n\t\t\t\t// they simply reference the renderer's state for their\n\t\t\t\t// values\n\t\t\t\t//\n\t\t\t\t// use the current material's .needsUpdate flags to set\n\t\t\t\t// the GL state when required\n\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\n\n\t\t\t}\n\n\t\t\t// refresh uniforms common to several materials\n\n\t\t\tif ( fog && material.fog ) {\n\n\t\t\t\trefreshUniformsFog( m_uniforms, fog );\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isMeshNormalMaterial ||\n\t\t\t\tmaterial.isMeshDepthMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t}\n\n\t\t\t// refresh single material specific uniforms\n\n\t\t\tif ( material.isLineBasicMaterial ) {\n\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\n\n\t\t\t} else if ( material.isLineDashedMaterial ) {\n\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\n\t\t\t\trefreshUniformsDash( m_uniforms, material );\n\n\t\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\t\trefreshUniformsPoints( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshLambertMaterial ) {\n\n\t\t\t\trefreshUniformsLambert( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshToonMaterial ) {\n\n\t\t\t\trefreshUniformsToon( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshPhongMaterial ) {\n\n\t\t\t\trefreshUniformsPhong( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshPhysicalMaterial ) {\n\n\t\t\t\trefreshUniformsPhysical( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshStandardMaterial ) {\n\n\t\t\t\trefreshUniformsStandard( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshDepthMaterial ) {\n\n\t\t\t\tif ( material.displacementMap ) {\n\n\t\t\t\t\tm_uniforms.displacementMap.value = material.displacementMap;\n\t\t\t\t\tm_uniforms.displacementScale.value = material.displacementScale;\n\t\t\t\t\tm_uniforms.displacementBias.value = material.displacementBias;\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\t\trefreshUniformsNormal( m_uniforms, material );\n\n\t\t\t}\n\n\t\t\t// RectAreaLight Texture\n\t\t\t// TODO (mrdoob): Find a nicer implementation\n\n\t\t\tif ( m_uniforms.ltcMat !== undefined ) m_uniforms.ltcMat.value = UniformsLib.LTC_MAT_TEXTURE;\n\t\t\tif ( m_uniforms.ltcMag !== undefined ) m_uniforms.ltcMag.value = UniformsLib.LTC_MAG_TEXTURE;\n\n\t\t\tWebGLUniforms.upload(\n\t\t\t\t_gl, materialProperties.uniformsList, m_uniforms, _this );\n\n\t\t}\n\n\n\t\t// common matrices\n\n\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\n\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\n\n\t\treturn program;\n\n\t}\n\n\t// Uniforms (refresh uniforms objects)\n\n\tfunction refreshUniformsCommon( uniforms, material ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tuniforms.diffuse.value = material.color;\n\n\t\tif ( material.emissive ) {\n\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t}\n\n\t\tuniforms.map.value = material.map;\n\t\tuniforms.specularMap.value = material.specularMap;\n\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. specular map\n\t\t// 3. normal map\n\t\t// 4. bump map\n\t\t// 5. alpha map\n\t\t// 6. emissive map\n\n\t\tvar uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.specularMap ) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if ( material.displacementMap ) {\n\n\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t} else if ( material.normalMap ) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if ( material.bumpMap ) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if ( material.roughnessMap ) {\n\n\t\t\tuvScaleMap = material.roughnessMap;\n\n\t\t} else if ( material.metalnessMap ) {\n\n\t\t\tuvScaleMap = material.metalnessMap;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t} else if ( material.emissiveMap ) {\n\n\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tvar offset = uvScaleMap.offset;\n\t\t\tvar repeat = uvScaleMap.repeat;\n\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\n\n\t\t}\n\n\t\tuniforms.envMap.value = material.envMap;\n\n\t\t// don't flip CubeTexture envMaps, flip everything else:\n\t\t//  WebGLRenderTargetCube will be flipped for backwards compatibility\n\t\t//  WebGLRenderTargetCube.texture will be flipped because it's a Texture and NOT a CubeTexture\n\t\t// this check must be handled differently, or removed entirely, if WebGLRenderTargetCube uses a CubeTexture in the future\n\t\tuniforms.flipEnvMap.value = ( ! ( material.envMap && material.envMap.isCubeTexture ) ) ? 1 : - 1;\n\n\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t}\n\n\tfunction refreshUniformsLine( uniforms, material ) {\n\n\t\tuniforms.diffuse.value = material.color;\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsPoints( uniforms, material ) {\n\n\t\tuniforms.diffuse.value = material.color;\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size * _pixelRatio;\n\t\tuniforms.scale.value = _height * 0.5;\n\n\t\tuniforms.map.value = material.map;\n\n\t\tif ( material.map !== null ) {\n\n\t\t\tvar offset = material.map.offset;\n\t\t\tvar repeat = material.map.repeat;\n\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsFog( uniforms, fog ) {\n\n\t\tuniforms.fogColor.value = fog.color;\n\n\t\tif ( fog.isFog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLambert( uniforms, material ) {\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong( uniforms, material ) {\n\n\t\tuniforms.specular.value = material.specular;\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsToon( uniforms, material ) {\n\n\t\trefreshUniformsPhong( uniforms, material );\n\n\t\tif ( material.gradientMap ) {\n\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsStandard( uniforms, material ) {\n\n\t\tuniforms.roughness.value = material.roughness;\n\t\tuniforms.metalness.value = material.metalness;\n\n\t\tif ( material.roughnessMap ) {\n\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t}\n\n\t\tif ( material.metalnessMap ) {\n\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tif ( material.envMap ) {\n\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhysical( uniforms, material ) {\n\n\t\tuniforms.clearCoat.value = material.clearCoat;\n\t\tuniforms.clearCoatRoughness.value = material.clearCoatRoughness;\n\n\t\trefreshUniformsStandard( uniforms, material );\n\n\t}\n\n\tfunction refreshUniformsNormal( uniforms, material ) {\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\n\n\t\tuniforms.ambientLightColor.needsUpdate = value;\n\n\t\tuniforms.directionalLights.needsUpdate = value;\n\t\tuniforms.pointLights.needsUpdate = value;\n\t\tuniforms.spotLights.needsUpdate = value;\n\t\tuniforms.rectAreaLights.needsUpdate = value;\n\t\tuniforms.hemisphereLights.needsUpdate = value;\n\n\t}\n\n\t// Lighting\n\n\tfunction setupShadows( lights ) {\n\n\t\tvar lightShadowsLength = 0;\n\n\t\tfor ( var i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tvar light = lights[ i ];\n\n\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t_lights.shadows[ lightShadowsLength ] = light;\n\t\t\t\tlightShadowsLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\t_lights.shadows.length = lightShadowsLength;\n\n\t}\n\n\tfunction setupLights( lights, camera ) {\n\n\t\tvar l, ll, light, shadow,\n\t\t\tr = 0, g = 0, b = 0,\n\t\t\tcolor,\n\t\t\tintensity,\n\t\t\tdistance,\n\t\t\tshadowMap,\n\n\t\t\tviewMatrix = camera.matrixWorldInverse,\n\n\t\t\tdirectionalLength = 0,\n\t\t\tpointLength = 0,\n\t\t\tspotLength = 0,\n\t\t\trectAreaLength = 0,\n\t\t\themiLength = 0;\n\n\t\tfor ( l = 0, ll = lights.length; l < ll; l ++ ) {\n\n\t\t\tlight = lights[ l ];\n\n\t\t\tcolor = light.color;\n\t\t\tintensity = light.intensity;\n\t\t\tdistance = light.distance;\n\n\t\t\tshadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\n\n\t\t\tif ( light.isAmbientLight ) {\n\n\t\t\t\tr += color.r * intensity;\n\t\t\t\tg += color.g * intensity;\n\t\t\t\tb += color.b * intensity;\n\n\t\t\t} else if ( light.isDirectionalLight ) {\n\n\t\t\t\tvar uniforms = lightCache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( _vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tshadow = light.shadow;\n\n\t\t\t\t\tuniforms.shadowBias = shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t}\n\n\t\t\t\t_lights.directionalShadowMap[ directionalLength ] = shadowMap;\n\t\t\t\t_lights.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\n\t\t\t\t_lights.directional[ directionalLength ] = uniforms;\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tvar uniforms = lightCache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.distance = distance;\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( _vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\n\t\t\t\tuniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tshadow = light.shadow;\n\n\t\t\t\t\tuniforms.shadowBias = shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t}\n\n\t\t\t\t_lights.spotShadowMap[ spotLength ] = shadowMap;\n\t\t\t\t_lights.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\n\t\t\t\t_lights.spot[ spotLength ] = uniforms;\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tvar uniforms = lightCache.get( light );\n\n\t\t\t\t// (a) intensity controls irradiance of entire light\n\t\t\t\tuniforms.color\n\t\t\t\t\t.copy( color )\n\t\t\t\t\t.multiplyScalar( intensity / ( light.width * light.height ) );\n\n\t\t\t\t// (b) intensity controls the radiance per light area\n\t\t\t\t// uniforms.color.copy( color ).multiplyScalar( intensity );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\t// extract local rotation of light to derive width/height half vectors\n\t\t\t\t_matrix42.identity();\n\t\t\t\t_matrix4.copy( light.matrixWorld );\n\t\t\t\t_matrix4.premultiply( viewMatrix );\n\t\t\t\t_matrix42.extractRotation( _matrix4 );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5,                0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set(              0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tuniforms.halfWidth.applyMatrix4( _matrix42 );\n\t\t\t\tuniforms.halfHeight.applyMatrix4( _matrix42 );\n\n\t\t\t\t// TODO (abelnation): RectAreaLight distance?\n\t\t\t\t// uniforms.distance = distance;\n\n\t\t\t\t_lights.rectArea[ rectAreaLength ] = uniforms;\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tvar uniforms = lightCache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.distance = light.distance;\n\t\t\t\tuniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tshadow = light.shadow;\n\n\t\t\t\t\tuniforms.shadowBias = shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t}\n\n\t\t\t\t_lights.pointShadowMap[ pointLength ] = shadowMap;\n\t\t\t\t_lights.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\n\t\t\t\t_lights.point[ pointLength ] = uniforms;\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tvar uniforms = lightCache.get( light );\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\t\t\t\tuniforms.direction.normalize();\n\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\n\n\t\t\t\t_lights.hemi[ hemiLength ] = uniforms;\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\t_lights.ambient[ 0 ] = r;\n\t\t_lights.ambient[ 1 ] = g;\n\t\t_lights.ambient[ 2 ] = b;\n\n\t\t_lights.directional.length = directionalLength;\n\t\t_lights.spot.length = spotLength;\n\t\t_lights.rectArea.length = rectAreaLength;\n\t\t_lights.point.length = pointLength;\n\t\t_lights.hemi.length = hemiLength;\n\n\t\t// TODO (sam-g-steel) why aren't we using join\n\t\t_lights.hash = directionalLength + ',' + pointLength + ',' + spotLength + ',' + rectAreaLength + ',' + hemiLength + ',' + _lights.shadows.length;\n\n\t}\n\n\t// GL state setting\n\n\tthis.setFaceCulling = function ( cullFace, frontFaceDirection ) {\n\n\t\tstate.setCullFace( cullFace );\n\t\tstate.setFlipSided( frontFaceDirection === FrontFaceDirectionCW );\n\n\t};\n\n\t// Textures\n\n\tfunction allocTextureUnit() {\n\n\t\tvar textureUnit = _usedTextureUnits;\n\n\t\tif ( textureUnit >= capabilities.maxTextures ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: trying to use ' + textureUnit + ' texture units while this GPU supports only ' + capabilities.maxTextures );\n\n\t\t}\n\n\t\t_usedTextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\tthis.allocTextureUnit = allocTextureUnit;\n\n\t// this.setTexture2D = setTexture2D;\n\tthis.setTexture2D = ( function () {\n\n\t\tvar warned = false;\n\n\t\t// backwards compatibility: peel texture.texture\n\t\treturn function setTexture2D( texture, slot ) {\n\n\t\t\tif ( texture && texture.isWebGLRenderTarget ) {\n\n\t\t\t\tif ( ! warned ) {\n\n\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\t\t\twarned = true;\n\n\t\t\t\t}\n\n\t\t\t\ttexture = texture.texture;\n\n\t\t\t}\n\n\t\t\ttextures.setTexture2D( texture, slot );\n\n\t\t};\n\n\t}() );\n\n\tthis.setTexture = ( function () {\n\n\t\tvar warned = false;\n\n\t\treturn function setTexture( texture, slot ) {\n\n\t\t\tif ( ! warned ) {\n\n\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.\" );\n\t\t\t\twarned = true;\n\n\t\t\t}\n\n\t\t\ttextures.setTexture2D( texture, slot );\n\n\t\t};\n\n\t}() );\n\n\tthis.setTextureCube = ( function () {\n\n\t\tvar warned = false;\n\n\t\treturn function setTextureCube( texture, slot ) {\n\n\t\t\t// backwards compatibility: peel texture.texture\n\t\t\tif ( texture && texture.isWebGLRenderTargetCube ) {\n\n\t\t\t\tif ( ! warned ) {\n\n\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.\" );\n\t\t\t\t\twarned = true;\n\n\t\t\t\t}\n\n\t\t\t\ttexture = texture.texture;\n\n\t\t\t}\n\n\t\t\t// currently relying on the fact that WebGLRenderTargetCube.texture is a Texture and NOT a CubeTexture\n\t\t\t// TODO: unify these code paths\n\t\t\tif ( ( texture && texture.isCubeTexture ) ||\n\t\t\t\t( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\n\n\t\t\t\t// CompressedTexture can have Array in image :/\n\n\t\t\t\t// this function alone should take care of cube textures\n\t\t\t\ttextures.setTextureCube( texture, slot );\n\n\t\t\t} else {\n\n\t\t\t\t// assumed: texture property of THREE.WebGLRenderTargetCube\n\n\t\t\t\ttextures.setTextureCubeDynamic( texture, slot );\n\n\t\t\t}\n\n\t\t};\n\n\t}() );\n\n\tthis.getRenderTarget = function () {\n\n\t\treturn _currentRenderTarget;\n\n\t};\n\n\tthis.setRenderTarget = function ( renderTarget ) {\n\n\t\t_currentRenderTarget = renderTarget;\n\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\n\n\t\t\ttextures.setupRenderTarget( renderTarget );\n\n\t\t}\n\n\t\tvar isCube = ( renderTarget && renderTarget.isWebGLRenderTargetCube );\n\t\tvar framebuffer;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tvar renderTargetProperties = properties.get( renderTarget );\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer[ renderTarget.activeCubeFace ];\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer;\n\n\t\t\t}\n\n\t\t\t_currentScissor.copy( renderTarget.scissor );\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\n\n\t\t\t_currentViewport.copy( renderTarget.viewport );\n\n\t\t} else {\n\n\t\t\tframebuffer = null;\n\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio );\n\t\t\t_currentScissorTest = _scissorTest;\n\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio );\n\n\t\t}\n\n\t\tif ( _currentFramebuffer !== framebuffer ) {\n\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t\t_currentFramebuffer = framebuffer;\n\n\t\t}\n\n\t\tstate.scissor( _currentScissor );\n\t\tstate.setScissorTest( _currentScissorTest );\n\n\t\tstate.viewport( _currentViewport );\n\n\t\tif ( isCube ) {\n\n\t\t\tvar textureProperties = properties.get( renderTarget.texture );\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + renderTarget.activeCubeFace, textureProperties.__webglTexture, renderTarget.activeMipMapLevel );\n\n\t\t}\n\n\t};\n\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer ) {\n\n\t\tif ( ( renderTarget && renderTarget.isWebGLRenderTarget ) === false ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar framebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\tif ( framebuffer ) {\n\n\t\t\tvar restore = false;\n\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\t\t\trestore = true;\n\n\t\t\t}\n\n\t\t\ttry {\n\n\t\t\t\tvar texture = renderTarget.texture;\n\t\t\t\tvar textureFormat = texture.format;\n\t\t\t\tvar textureType = texture.type;\n\n\t\t\t\tif ( textureFormat !== RGBAFormat && paramThreeToGL( textureFormat ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_FORMAT ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( textureType !== UnsignedByteType && paramThreeToGL( textureType ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_TYPE ) && // IE11, Edge and Chrome Mac < 52 (#9513)\n\t\t\t\t\t! ( textureType === FloatType && ( extensions.get( 'OES_texture_float' ) || extensions.get( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\n\t\t\t\t\t! ( textureType === HalfFloatType && extensions.get( 'EXT_color_buffer_half_float' ) ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _gl.checkFramebufferStatus( _gl.FRAMEBUFFER ) === _gl.FRAMEBUFFER_COMPLETE ) {\n\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\n\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, paramThreeToGL( textureFormat ), paramThreeToGL( textureType ), buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\n\n\t\t\t\t}\n\n\t\t\t} finally {\n\n\t\t\t\tif ( restore ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, _currentFramebuffer );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\t// Map three.js constants to WebGL constants\n\n\tfunction paramThreeToGL( p ) {\n\n\t\tvar extension;\n\n\t\tif ( p === RepeatWrapping ) return _gl.REPEAT;\n\t\tif ( p === ClampToEdgeWrapping ) return _gl.CLAMP_TO_EDGE;\n\t\tif ( p === MirroredRepeatWrapping ) return _gl.MIRRORED_REPEAT;\n\n\t\tif ( p === NearestFilter ) return _gl.NEAREST;\n\t\tif ( p === NearestMipMapNearestFilter ) return _gl.NEAREST_MIPMAP_NEAREST;\n\t\tif ( p === NearestMipMapLinearFilter ) return _gl.NEAREST_MIPMAP_LINEAR;\n\n\t\tif ( p === LinearFilter ) return _gl.LINEAR;\n\t\tif ( p === LinearMipMapNearestFilter ) return _gl.LINEAR_MIPMAP_NEAREST;\n\t\tif ( p === LinearMipMapLinearFilter ) return _gl.LINEAR_MIPMAP_LINEAR;\n\n\t\tif ( p === UnsignedByteType ) return _gl.UNSIGNED_BYTE;\n\t\tif ( p === UnsignedShort4444Type ) return _gl.UNSIGNED_SHORT_4_4_4_4;\n\t\tif ( p === UnsignedShort5551Type ) return _gl.UNSIGNED_SHORT_5_5_5_1;\n\t\tif ( p === UnsignedShort565Type ) return _gl.UNSIGNED_SHORT_5_6_5;\n\n\t\tif ( p === ByteType ) return _gl.BYTE;\n\t\tif ( p === ShortType ) return _gl.SHORT;\n\t\tif ( p === UnsignedShortType ) return _gl.UNSIGNED_SHORT;\n\t\tif ( p === IntType ) return _gl.INT;\n\t\tif ( p === UnsignedIntType ) return _gl.UNSIGNED_INT;\n\t\tif ( p === FloatType ) return _gl.FLOAT;\n\n\t\tif ( p === HalfFloatType ) {\n\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\n\n\t\t\tif ( extension !== null ) return extension.HALF_FLOAT_OES;\n\n\t\t}\n\n\t\tif ( p === AlphaFormat ) return _gl.ALPHA;\n\t\tif ( p === RGBFormat ) return _gl.RGB;\n\t\tif ( p === RGBAFormat ) return _gl.RGBA;\n\t\tif ( p === LuminanceFormat ) return _gl.LUMINANCE;\n\t\tif ( p === LuminanceAlphaFormat ) return _gl.LUMINANCE_ALPHA;\n\t\tif ( p === DepthFormat ) return _gl.DEPTH_COMPONENT;\n\t\tif ( p === DepthStencilFormat ) return _gl.DEPTH_STENCIL;\n\n\t\tif ( p === AddEquation ) return _gl.FUNC_ADD;\n\t\tif ( p === SubtractEquation ) return _gl.FUNC_SUBTRACT;\n\t\tif ( p === ReverseSubtractEquation ) return _gl.FUNC_REVERSE_SUBTRACT;\n\n\t\tif ( p === ZeroFactor ) return _gl.ZERO;\n\t\tif ( p === OneFactor ) return _gl.ONE;\n\t\tif ( p === SrcColorFactor ) return _gl.SRC_COLOR;\n\t\tif ( p === OneMinusSrcColorFactor ) return _gl.ONE_MINUS_SRC_COLOR;\n\t\tif ( p === SrcAlphaFactor ) return _gl.SRC_ALPHA;\n\t\tif ( p === OneMinusSrcAlphaFactor ) return _gl.ONE_MINUS_SRC_ALPHA;\n\t\tif ( p === DstAlphaFactor ) return _gl.DST_ALPHA;\n\t\tif ( p === OneMinusDstAlphaFactor ) return _gl.ONE_MINUS_DST_ALPHA;\n\n\t\tif ( p === DstColorFactor ) return _gl.DST_COLOR;\n\t\tif ( p === OneMinusDstColorFactor ) return _gl.ONE_MINUS_DST_COLOR;\n\t\tif ( p === SrcAlphaSaturateFactor ) return _gl.SRC_ALPHA_SATURATE;\n\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format ||\n\t\t\tp === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format ||\n\t\t\tp === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\n\n\t\t\tif ( extension !== null ) return extension.COMPRESSED_RGB_ETC1_WEBGL;\n\n\t\t}\n\n\t\tif ( p === MinEquation || p === MaxEquation ) {\n\n\t\t\textension = extensions.get( 'EXT_blend_minmax' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === MinEquation ) return extension.MIN_EXT;\n\t\t\t\tif ( p === MaxEquation ) return extension.MAX_EXT;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === UnsignedInt248Type ) {\n\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\n\n\t\t\tif ( extension !== null ) return extension.UNSIGNED_INT_24_8_WEBGL;\n\n\t\t}\n\n\t\treturn 0;\n\n\t}\n\n}\n\n\nexport { WebGLRenderer };\n","import { _Math } from './Math';\n\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\n *\n * The poles (phi) are at the positive and negative y axis.\n * The equator starts at positive z.\n */\n\nfunction Spherical( radius, phi, theta ) {\n\n\tthis.radius = ( radius !== undefined ) ? radius : 1.0;\n\tthis.phi = ( phi !== undefined ) ? phi : 0; // up / down towards top and bottom pole\n\tthis.theta = ( theta !== undefined ) ? theta : 0; // around the equator of the sphere\n\n\treturn this;\n\n}\n\nObject.assign( Spherical.prototype, {\n\n\tset: function ( radius, phi, theta ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi;\n\t\tthis.theta = theta;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( other ) {\n\n\t\tthis.radius = other.radius;\n\t\tthis.phi = other.phi;\n\t\tthis.theta = other.theta;\n\n\t\treturn this;\n\n\t},\n\n\t// restrict phi to be betwee EPS and PI-EPS\n\tmakeSafe: function() {\n\n\t\tvar EPS = 0.000001;\n\t\tthis.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromVector3: function( vec3 ) {\n\n\t\tthis.radius = vec3.length();\n\n\t\tif ( this.radius === 0 ) {\n\n\t\t\tthis.theta = 0;\n\t\t\tthis.phi = 0;\n\n\t\t} else {\n\n\t\t\tthis.theta = Math.atan2( vec3.x, vec3.z ); // equator angle around y-up axis\n\t\t\tthis.phi = Math.acos( _Math.clamp( vec3.y / this.radius, - 1, 1 ) ); // polar angle\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Spherical };\n","import * as THREE from './../../node_modules/three/src/constants';\r\nimport { Vector3 } from './../../node_modules/three/src/math/Vector3';\r\nimport { Vector2 } from './../../node_modules/three/src/math/Vector2';\r\nimport { Spherical } from './../../node_modules/three/src/math/Spherical';\r\nimport { Quaternion } from './../../node_modules/three/src/math/Quaternion';\r\nimport {OrthographicCamera} from './../../node_modules/three/src/cameras/OrthographicCamera';\r\nimport {PerspectiveCamera} from './../../node_modules/three/src/cameras/PerspectiveCamera';\r\nimport {EventDispatcher} from './../../node_modules/three/src/core/EventDispatcher';\r\n/**\r\n * @author qiao / https://github.com/qiao\r\n * @author mrdoob / http://mrdoob.com\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author erich666 / http://erichaines.com\r\n */\r\n\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n//\r\n//    Orbit - left mouse / touch: one finger move\r\n//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\r\n//    Pan - right mouse, or arrow keys / touch: three finter swipe\r\n\r\n //THREE.OrbitControls = function OrbitControls( object, domElement ) {\r\nfunction OrbitControls( object, domElement ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\r\n\r\n\t// Set to false to disable this control\r\n\tthis.enabled = true;\r\n\r\n\t// \"target\" sets the location of focus, where the object orbits around\r\n\tthis.target = new Vector3();\r\n\r\n\t// How far you can dolly in and out ( PerspectiveCamera only )\r\n\tthis.minDistance = 0;\r\n\tthis.maxDistance = Infinity;\r\n\r\n\t// How far you can zoom in and out ( OrthographicCamera only )\r\n\tthis.minZoom = 0;\r\n\tthis.maxZoom = Infinity;\r\n\r\n\t// How far you can orbit vertically, upper and lower limits.\r\n\t// Range is 0 to Math.PI radians.\r\n\tthis.minPolarAngle = 0; // radians\r\n\tthis.maxPolarAngle = Math.PI; // radians\r\n\r\n\t// How far you can orbit horizontally, upper and lower limits.\r\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\r\n\tthis.minAzimuthAngle = - Infinity; // radians\r\n\tthis.maxAzimuthAngle = Infinity; // radians\r\n\r\n\t// Set to true to enable damping (inertia)\r\n\t// If damping is enabled, you must call controls.update() in your animation loop\r\n\tthis.enableDamping = false;\r\n\tthis.dampingFactor = 0.25;\r\n\r\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n\t// Set to false to disable zooming\r\n\tthis.enableZoom = true;\r\n\tthis.zoomSpeed = 1.0;\r\n\r\n\t// Set to false to disable rotating\r\n\tthis.enableRotate = true;\r\n\tthis.rotateSpeed = 1.0;\r\n\r\n\t// Set to false to disable panning\r\n\tthis.enablePan = true;\r\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\r\n\r\n\t// Set to true to automatically rotate around the target\r\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n\tthis.autoRotate = false;\r\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\r\n\r\n\t// Set to false to disable use of the keys\r\n\tthis.enableKeys = true;\r\n\r\n\t// The four arrow keys\r\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\r\n\r\n\t// Mouse buttons\r\n\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\r\n\r\n\t// for reset\r\n\tthis.target0 = this.target.clone();\r\n\tthis.position0 = this.object.position.clone();\r\n\tthis.zoom0 = this.object.zoom;\r\n\r\n\t//\r\n\t// public methods\r\n\t//\r\n\r\n\tthis.getPolarAngle = function () {\r\n\r\n\t\treturn spherical.phi;\r\n\r\n\t};\r\n\r\n\tthis.getAzimuthalAngle = function () {\r\n\r\n\t\treturn spherical.theta;\r\n\r\n\t};\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tscope.target.copy( scope.target0 );\r\n\t\tscope.object.position.copy( scope.position0 );\r\n\t\tscope.object.zoom = scope.zoom0;\r\n\r\n\t\tscope.object.updateProjectionMatrix();\r\n\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\tscope.update();\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t};\r\n\r\n\t// this method is exposed, but perhaps it would be better if we can make it private...\r\n\tthis.update = function() {\r\n\r\n\t\tvar offset = new Vector3();\r\n\r\n\t\t// so camera.up is the orbit axis\r\n\t\tvar quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\r\n\t\tvar quatInverse = quat.clone().inverse();\r\n\r\n\t\tvar lastPosition = new Vector3();\r\n\t\tvar lastQuaternion = new Quaternion();\r\n\r\n\t\treturn function update () {\r\n\r\n\t\t\tvar position = scope.object.position;\r\n\r\n\t\t\toffset.copy( position ).sub( scope.target );\r\n\r\n\t\t\t// rotate offset to \"y-axis-is-up\" space\r\n\t\t\toffset.applyQuaternion( quat );\r\n\r\n\t\t\t// angle from z-axis around y-axis\r\n\t\t\tspherical.setFromVector3( offset );\r\n\r\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\r\n\r\n\t\t\t\trotateLeft( getAutoRotationAngle() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tspherical.theta += sphericalDelta.theta;\r\n\t\t\tspherical.phi += sphericalDelta.phi;\r\n\r\n\t\t\t// restrict theta to be between desired limits\r\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\r\n\r\n\t\t\t// restrict phi to be between desired limits\r\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\r\n\r\n\t\t\tspherical.makeSafe();\r\n\r\n\r\n\t\t\tspherical.radius *= scale;\r\n\r\n\t\t\t// restrict radius to be between desired limits\r\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\r\n\r\n\t\t\t// move target to panned location\r\n\t\t\tscope.target.add( panOffset );\r\n\r\n\t\t\toffset.setFromSpherical( spherical );\r\n\r\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\r\n\t\t\toffset.applyQuaternion( quatInverse );\r\n\r\n\t\t\tposition.copy( scope.target ).add( offset );\r\n\r\n\t\t\tscope.object.lookAt( scope.target );\r\n\r\n\t\t\tif ( scope.enableDamping === true ) {\r\n\r\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\r\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscale = 1;\r\n\t\t\tpanOffset.set( 0, 0, 0 );\r\n\r\n\t\t\t// update condition is:\r\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\r\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n\t\t\tif ( zoomChanged ||\r\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\r\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\r\n\r\n\t\t\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\t\t\tlastPosition.copy( scope.object.position );\r\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\r\n\t\t\t\tzoomChanged = false;\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tthis.dispose = function() {\r\n\r\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\r\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\r\n\t\tscope.domElement.removeEventListener( 'mousewheel', onMouseWheel, false );\r\n\t\tscope.domElement.removeEventListener( 'MozMousePixelScroll', onMouseWheel, false ); // firefox\r\n\r\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\r\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\r\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\r\n\r\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n\r\n\t};\r\n\r\n\t//\r\n\t// internals\r\n\t//\r\n\r\n\tvar scope = this;\r\n\r\n\tvar changeEvent = { type: 'change' };\r\n\tvar startEvent = { type: 'start' };\r\n\tvar endEvent = { type: 'end' };\r\n\r\n\tvar STATE = { NONE : - 1, ROTATE : 0, DOLLY : 1, PAN : 2, TOUCH_ROTATE : 3, TOUCH_DOLLY : 4, TOUCH_PAN : 5 };\r\n\r\n\tvar state = STATE.NONE;\r\n\r\n\tvar EPS = 0.000001;\r\n\r\n\t// current position in spherical coordinates\r\n\tvar spherical = new Spherical();\r\n\tvar sphericalDelta = new Spherical();\r\n\r\n\tvar scale = 1;\r\n\tvar panOffset = new Vector3();\r\n\tvar zoomChanged = false;\r\n\r\n\tvar rotateStart = new Vector2();\r\n\tvar rotateEnd = new Vector2();\r\n\tvar rotateDelta = new Vector2();\r\n\r\n\tvar panStart = new Vector2();\r\n\tvar panEnd = new Vector2();\r\n\tvar panDelta = new Vector2();\r\n\r\n\tvar dollyStart = new Vector2();\r\n\tvar dollyEnd = new Vector2();\r\n\tvar dollyDelta = new Vector2();\r\n\r\n\tfunction getAutoRotationAngle() {\r\n\r\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n\r\n\t}\r\n\r\n\tfunction getZoomScale() {\r\n\r\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\r\n\r\n\t}\r\n\r\n\tfunction rotateLeft( angle ) {\r\n\r\n\t\tsphericalDelta.theta -= angle;\r\n\r\n\t}\r\n\r\n\tfunction rotateUp( angle ) {\r\n\r\n\t\tsphericalDelta.phi -= angle;\r\n\r\n\t}\r\n\r\n\tvar panLeft = function() {\r\n\r\n\t\tvar v = new Vector3();\r\n\r\n\t\treturn function panLeft( distance, objectMatrix ) {\r\n\r\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\r\n\t\t\tv.multiplyScalar( - distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tvar panUp = function() {\r\n\r\n\t\tvar v = new Vector3();\r\n\r\n\t\treturn function panUp( distance, objectMatrix ) {\r\n\r\n\t\t\tv.setFromMatrixColumn( objectMatrix, 1 ); // get Y column of objectMatrix\r\n\t\t\tv.multiplyScalar( distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\t// deltaX and deltaY are in pixels; right and down are positive\r\n\tvar pan = function() {\r\n\r\n\t\tvar offset = new Vector3();\r\n\r\n\t\treturn function pan ( deltaX, deltaY ) {\r\n\r\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\t\tif ( scope.object instanceof PerspectiveCamera ) {\r\n\r\n\t\t\t\t// perspective\r\n\t\t\t\tvar position = scope.object.position;\r\n\t\t\t\toffset.copy( position ).sub( scope.target );\r\n\t\t\t\tvar targetDistance = offset.length();\r\n\r\n\t\t\t\t// half of the fov is center to top of screen\r\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\r\n\r\n\t\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\r\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\r\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else if ( scope.object instanceof OrthographicCamera ) {\r\n\r\n\t\t\t\t// orthographic\r\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\r\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// camera neither orthographic nor perspective\r\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\r\n\t\t\t\tscope.enablePan = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tfunction dollyIn( dollyScale ) {\r\n\r\n\t\tif ( scope.object instanceof PerspectiveCamera ) {\r\n\r\n\t\t\tscale /= dollyScale;\r\n\r\n\t\t} else if ( scope.object instanceof OrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction dollyOut( dollyScale ) {\r\n\r\n\t\tif ( scope.object instanceof PerspectiveCamera ) {\r\n\r\n\t\t\tscale *= dollyScale;\r\n\r\n\t\t} else if ( scope.object instanceof OrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event callbacks - update the object state\r\n\t//\r\n\r\n\tfunction handleMouseDownRotate( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownRotate' );\r\n\r\n\t\trotateStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownDolly( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownDolly' );\r\n\r\n\t\tdollyStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownPan( event ) {\r\n\r\n\t\t//console.log( 'handleMouseDownPan' );\r\n\r\n\t\tpanStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveRotate( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMoveRotate' );\r\n\r\n\t\trotateEnd.set( event.clientX, event.clientY );\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart );\r\n\r\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\t// rotating across whole screen goes 360 degrees around\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\r\n\r\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveDolly( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMoveDolly' );\r\n\r\n\t\tdollyEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n\t\tif ( dollyDelta.y > 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t} else if ( dollyDelta.y < 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMovePan( event ) {\r\n\r\n\t\t//console.log( 'handleMouseMovePan' );\r\n\r\n\t\tpanEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseUp( event ) {\r\n\r\n\t\t//console.log( 'handleMouseUp' );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseWheel( event ) {\r\n\r\n\t\t//console.log( 'handleMouseWheel' );\r\n\r\n\t\tvar delta = 0;\r\n\r\n\t\tif ( event.wheelDelta !== undefined ) {\r\n\r\n\t\t\t// WebKit / Opera / Explorer 9\r\n\r\n\t\t\tdelta = event.wheelDelta;\r\n\r\n\t\t} else if ( event.detail !== undefined ) {\r\n\r\n\t\t\t// Firefox\r\n\r\n\t\t\tdelta = - event.detail;\r\n\r\n\t\t}\r\n\r\n\t\tif ( delta > 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t} else if ( delta < 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleKeyDown( event ) {\r\n\r\n\t\t//console.log( 'handleKeyDown' );\r\n\r\n\t\tswitch ( event.keyCode ) {\r\n\r\n\t\t\tcase scope.keys.UP:\r\n\t\t\t\tpan( 0, scope.keyPanSpeed );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.BOTTOM:\r\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.LEFT:\r\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.RIGHT:\r\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\r\n\t\t\t\tscope.update();\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartRotate( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartRotate' );\r\n\r\n\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartDolly( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartDolly' );\r\n\r\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\tdollyStart.set( 0, distance );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartPan( event ) {\r\n\r\n\t\t//console.log( 'handleTouchStartPan' );\r\n\r\n\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveRotate( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMoveRotate' );\r\n\r\n\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart );\r\n\r\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n\t\t// rotating across whole screen goes 360 degrees around\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\r\n\r\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveDolly( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMoveDolly' );\r\n\r\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\tdollyEnd.set( 0, distance );\r\n\r\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n\t\tif ( dollyDelta.y > 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t} else if ( dollyDelta.y < 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMovePan( event ) {\r\n\r\n\t\t//console.log( 'handleTouchMovePan' );\r\n\r\n\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleTouchEnd( event ) {\r\n\r\n\t\t//console.log( 'handleTouchEnd' );\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event handlers - FSM: listen for events and reset state\r\n\t//\r\n\r\n\tfunction onMouseDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tif ( event.button === scope.mouseButtons.ORBIT ) {\r\n\r\n\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\thandleMouseDownRotate( event );\r\n\r\n\t\t\tstate = STATE.ROTATE;\r\n\r\n\t\t} else if ( event.button === scope.mouseButtons.ZOOM ) {\r\n\r\n\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\thandleMouseDownDolly( event );\r\n\r\n\t\t\tstate = STATE.DOLLY;\r\n\r\n\t\t} else if ( event.button === scope.mouseButtons.PAN ) {\r\n\r\n\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\tstate = STATE.PAN;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\r\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tif ( state === STATE.ROTATE ) {\r\n\r\n\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\thandleMouseMoveRotate( event );\r\n\r\n\t\t} else if ( state === STATE.DOLLY ) {\r\n\r\n\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\thandleMouseMoveDolly( event );\r\n\r\n\t\t} else if ( state === STATE.PAN ) {\r\n\r\n\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\thandleMouseMovePan( event );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseUp( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleMouseUp( event );\r\n\r\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onMouseWheel( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\thandleMouseWheel( event );\r\n\r\n\t\tscope.dispatchEvent( startEvent ); // not sure why these are here...\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t}\r\n\r\n\tfunction onKeyDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\r\n\r\n\t\thandleKeyDown( event );\r\n\r\n\t}\r\n\r\n\tfunction onTouchStart( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1:\t// one-fingered touch: rotate\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleTouchStartRotate( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\t// two-fingered touch: dolly\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleTouchStartDolly( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_DOLLY;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 3: // three-fingered touch: pan\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleTouchStartPan( event );\r\n\r\n\t\t\t\tstate = STATE.TOUCH_PAN;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1: // one-fingered touch: rotate\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?...\r\n\r\n\t\t\t\thandleTouchMoveRotate( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2: // two-fingered touch: dolly\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_DOLLY ) return; // is this needed?...\r\n\r\n\t\t\t\thandleTouchMoveDolly( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 3: // three-fingered touch: pan\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\t\t\t\tif ( state !== STATE.TOUCH_PAN ) return; // is this needed?...\r\n\r\n\t\t\t\thandleTouchMovePan( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchEnd( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleTouchEnd( event );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onContextMenu( event ) {\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\r\n\r\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\r\n\tscope.domElement.addEventListener( 'mousewheel', onMouseWheel, false );\r\n\tscope.domElement.addEventListener( 'MozMousePixelScroll', onMouseWheel, false ); // firefox\r\n\r\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\r\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\r\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\r\n\r\n\twindow.addEventListener( 'keydown', onKeyDown, false );\r\n\r\n\t// force an update at start\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nOrbitControls.prototype = Object.create( EventDispatcher.prototype );\r\nOrbitControls.prototype.constructor = OrbitControls;\r\n\r\nObject.defineProperties( OrbitControls.prototype, {\r\n\r\n\tcenter: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .center has been renamed to .target' );\r\n\t\t\treturn this.target;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// backward compatibility\r\n\r\n\tnoZoom: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\r\n\t\t\treturn ! this.enableZoom;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\r\n\t\t\tthis.enableZoom = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tnoRotate: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\r\n\t\t\treturn ! this.enableRotate;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\r\n\t\t\tthis.enableRotate = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tnoPan: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\r\n\t\t\treturn ! this.enablePan;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\r\n\t\t\tthis.enablePan = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tnoKeys: {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\r\n\t\t\treturn ! this.enableKeys;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\r\n\t\t\tthis.enableKeys = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tstaticMoving : {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\r\n\t\t\treturn ! this.enableDamping;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\r\n\t\t\tthis.enableDamping = ! value;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tdynamicDampingFactor : {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\r\n\t\t\treturn this.dampingFactor;\r\n\r\n\t\t},\r\n\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\r\n\t\t\tthis.dampingFactor = value;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nexport {OrbitControls};\r\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { RGBAFormat, RGBFormat } from '../constants';\nimport { ImageLoader } from './ImageLoader';\nimport { Texture } from '../textures/Texture';\nimport { DefaultLoadingManager } from './LoadingManager';\n\n\nfunction TextureLoader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n}\n\nObject.assign( TextureLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tvar texture = new Texture();\n\t\ttexture.image = loader.load( url, function () {\n\n\t\t\t// JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n\t\t\tvar isJPEG = url.search( /\\.(jpg|jpeg)$/ ) > 0 || url.search( /^data\\:image\\/jpeg/ ) === 0;\n\n\t\t\ttexture.format = isJPEG ? RGBFormat : RGBAFormat;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { TextureLoader };\n","export var REVISION = '85';\nexport var MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\nexport var CullFaceNone = 0;\nexport var CullFaceBack = 1;\nexport var CullFaceFront = 2;\nexport var CullFaceFrontBack = 3;\nexport var FrontFaceDirectionCW = 0;\nexport var FrontFaceDirectionCCW = 1;\nexport var BasicShadowMap = 0;\nexport var PCFShadowMap = 1;\nexport var PCFSoftShadowMap = 2;\nexport var FrontSide = 0;\nexport var BackSide = 1;\nexport var DoubleSide = 2;\nexport var FlatShading = 1;\nexport var SmoothShading = 2;\nexport var NoColors = 0;\nexport var FaceColors = 1;\nexport var VertexColors = 2;\nexport var NoBlending = 0;\nexport var NormalBlending = 1;\nexport var AdditiveBlending = 2;\nexport var SubtractiveBlending = 3;\nexport var MultiplyBlending = 4;\nexport var CustomBlending = 5;\nexport var AddEquation = 100;\nexport var SubtractEquation = 101;\nexport var ReverseSubtractEquation = 102;\nexport var MinEquation = 103;\nexport var MaxEquation = 104;\nexport var ZeroFactor = 200;\nexport var OneFactor = 201;\nexport var SrcColorFactor = 202;\nexport var OneMinusSrcColorFactor = 203;\nexport var SrcAlphaFactor = 204;\nexport var OneMinusSrcAlphaFactor = 205;\nexport var DstAlphaFactor = 206;\nexport var OneMinusDstAlphaFactor = 207;\nexport var DstColorFactor = 208;\nexport var OneMinusDstColorFactor = 209;\nexport var SrcAlphaSaturateFactor = 210;\nexport var NeverDepth = 0;\nexport var AlwaysDepth = 1;\nexport var LessDepth = 2;\nexport var LessEqualDepth = 3;\nexport var EqualDepth = 4;\nexport var GreaterEqualDepth = 5;\nexport var GreaterDepth = 6;\nexport var NotEqualDepth = 7;\nexport var MultiplyOperation = 0;\nexport var MixOperation = 1;\nexport var AddOperation = 2;\nexport var NoToneMapping = 0;\nexport var LinearToneMapping = 1;\nexport var ReinhardToneMapping = 2;\nexport var Uncharted2ToneMapping = 3;\nexport var CineonToneMapping = 4;\nexport var UVMapping = 300;\nexport var CubeReflectionMapping = 301;\nexport var CubeRefractionMapping = 302;\nexport var EquirectangularReflectionMapping = 303;\nexport var EquirectangularRefractionMapping = 304;\nexport var SphericalReflectionMapping = 305;\nexport var CubeUVReflectionMapping = 306;\nexport var CubeUVRefractionMapping = 307;\nexport var RepeatWrapping = 1000;\nexport var ClampToEdgeWrapping = 1001;\nexport var MirroredRepeatWrapping = 1002;\nexport var NearestFilter = 1003;\nexport var NearestMipMapNearestFilter = 1004;\nexport var NearestMipMapLinearFilter = 1005;\nexport var LinearFilter = 1006;\nexport var LinearMipMapNearestFilter = 1007;\nexport var LinearMipMapLinearFilter = 1008;\nexport var UnsignedByteType = 1009;\nexport var ByteType = 1010;\nexport var ShortType = 1011;\nexport var UnsignedShortType = 1012;\nexport var IntType = 1013;\nexport var UnsignedIntType = 1014;\nexport var FloatType = 1015;\nexport var HalfFloatType = 1016;\nexport var UnsignedShort4444Type = 1017;\nexport var UnsignedShort5551Type = 1018;\nexport var UnsignedShort565Type = 1019;\nexport var UnsignedInt248Type = 1020;\nexport var AlphaFormat = 1021;\nexport var RGBFormat = 1022;\nexport var RGBAFormat = 1023;\nexport var LuminanceFormat = 1024;\nexport var LuminanceAlphaFormat = 1025;\nexport var RGBEFormat = RGBAFormat;\nexport var DepthFormat = 1026;\nexport var DepthStencilFormat = 1027;\nexport var RGB_S3TC_DXT1_Format = 2001;\nexport var RGBA_S3TC_DXT1_Format = 2002;\nexport var RGBA_S3TC_DXT3_Format = 2003;\nexport var RGBA_S3TC_DXT5_Format = 2004;\nexport var RGB_PVRTC_4BPPV1_Format = 2100;\nexport var RGB_PVRTC_2BPPV1_Format = 2101;\nexport var RGBA_PVRTC_4BPPV1_Format = 2102;\nexport var RGBA_PVRTC_2BPPV1_Format = 2103;\nexport var RGB_ETC1_Format = 2151;\nexport var LoopOnce = 2200;\nexport var LoopRepeat = 2201;\nexport var LoopPingPong = 2202;\nexport var InterpolateDiscrete = 2300;\nexport var InterpolateLinear = 2301;\nexport var InterpolateSmooth = 2302;\nexport var ZeroCurvatureEnding = 2400;\nexport var ZeroSlopeEnding = 2401;\nexport var WrapAroundEnding = 2402;\nexport var TrianglesDrawMode = 0;\nexport var TriangleStripDrawMode = 1;\nexport var TriangleFanDrawMode = 2;\nexport var LinearEncoding = 3000;\nexport var sRGBEncoding = 3001;\nexport var GammaEncoding = 3007;\nexport var RGBEEncoding = 3002;\nexport var LogLuvEncoding = 3003;\nexport var RGBM7Encoding = 3004;\nexport var RGBM16Encoding = 3005;\nexport var RGBDEncoding = 3006;\nexport var BasicDepthPacking = 3200;\nexport var RGBADepthPacking = 3201;\n","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _Math = {\n\n\tDEG2RAD: Math.PI / 180,\n\tRAD2DEG: 180 / Math.PI,\n\n\tgenerateUUID: function () {\n\n\t\t// http://www.broofa.com/Tools/Math.uuid.htm\n\n\t\tvar chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split( '' );\n\t\tvar uuid = new Array( 36 );\n\t\tvar rnd = 0, r;\n\n\t\treturn function generateUUID() {\n\n\t\t\tfor ( var i = 0; i < 36; i ++ ) {\n\n\t\t\t\tif ( i === 8 || i === 13 || i === 18 || i === 23 ) {\n\n\t\t\t\t\tuuid[ i ] = '-';\n\n\t\t\t\t} else if ( i === 14 ) {\n\n\t\t\t\t\tuuid[ i ] = '4';\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( rnd <= 0x02 ) rnd = 0x2000000 + ( Math.random() * 0x1000000 ) | 0;\n\t\t\t\t\tr = rnd & 0xf;\n\t\t\t\t\trnd = rnd >> 4;\n\t\t\t\t\tuuid[ i ] = chars[ ( i === 19 ) ? ( r & 0x3 ) | 0x8 : r ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn uuid.join( '' );\n\n\t\t};\n\n\t}(),\n\n\tclamp: function ( value, min, max ) {\n\n\t\treturn Math.max( min, Math.min( max, value ) );\n\n\t},\n\n\t// compute euclidian modulo of m % n\n\t// https://en.wikipedia.org/wiki/Modulo_operation\n\n\teuclideanModulo: function ( n, m ) {\n\n\t\treturn ( ( n % m ) + m ) % m;\n\n\t},\n\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\n\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\n\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n\t},\n\n\t// https://en.wikipedia.org/wiki/Linear_interpolation\n\n\tlerp: function ( x, y, t ) {\n\n\t\treturn ( 1 - t ) * x + t * y;\n\n\t},\n\n\t// http://en.wikipedia.org/wiki/Smoothstep\n\n\tsmoothstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t},\n\n\tsmootherstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n\t},\n\n\t// Random integer from <low, high> interval\n\n\trandInt: function ( low, high ) {\n\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n\t},\n\n\t// Random float from <low, high> interval\n\n\trandFloat: function ( low, high ) {\n\n\t\treturn low + Math.random() * ( high - low );\n\n\t},\n\n\t// Random float from <-range/2, range/2> interval\n\n\trandFloatSpread: function ( range ) {\n\n\t\treturn range * ( 0.5 - Math.random() );\n\n\t},\n\n\tdegToRad: function ( degrees ) {\n\n\t\treturn degrees * _Math.DEG2RAD;\n\n\t},\n\n\tradToDeg: function ( radians ) {\n\n\t\treturn radians * _Math.RAD2DEG;\n\n\t},\n\n\tisPowerOfTwo: function ( value ) {\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t},\n\n\tnearestPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.round( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tnextPowerOfTwo: function ( value ) {\n\n\t\tvalue --;\n\t\tvalue |= value >> 1;\n\t\tvalue |= value >> 2;\n\t\tvalue |= value >> 4;\n\t\tvalue |= value >> 8;\n\t\tvalue |= value >> 16;\n\t\tvalue ++;\n\n\t\treturn value;\n\n\t}\n\n};\n\n\nexport { _Math };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar Cache = {\n\n\tenabled: false,\n\n\tfiles: {},\n\n\tadd: function ( key, file ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {};\n\n\t}\n\n};\n\n\nexport { Cache };\n","import { Vector4 } from '../../math/Vector4';\nimport { Color } from '../../math/Color';\nimport { Vector2 } from '../../math/Vector2';\nimport { DataTexture } from '../../textures/DataTexture';\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nvar UniformsLib = {\n\n\tcommon: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\n\t\tmap: { value: null },\n\t\toffsetRepeat: { value: new Vector4( 0, 0, 1, 1 ) },\n\n\t\tspecularMap: { value: null },\n\t\talphaMap: { value: null },\n\n\t\tenvMap: { value: null },\n\t\tflipEnvMap: { value: - 1 },\n\t\treflectivity: { value: 1.0 },\n\t\trefractionRatio: { value: 0.98 }\n\n\t},\n\n\taomap: {\n\n\t\taoMap: { value: null },\n\t\taoMapIntensity: { value: 1 }\n\n\t},\n\n\tlightmap: {\n\n\t\tlightMap: { value: null },\n\t\tlightMapIntensity: { value: 1 }\n\n\t},\n\n\temissivemap: {\n\n\t\temissiveMap: { value: null }\n\n\t},\n\n\tbumpmap: {\n\n\t\tbumpMap: { value: null },\n\t\tbumpScale: { value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\tnormalMap: { value: null },\n\t\tnormalScale: { value: new Vector2( 1, 1 ) }\n\n\t},\n\n\tdisplacementmap: {\n\n\t\tdisplacementMap: { value: null },\n\t\tdisplacementScale: { value: 1 },\n\t\tdisplacementBias: { value: 0 }\n\n\t},\n\n\troughnessmap: {\n\n\t\troughnessMap: { value: null }\n\n\t},\n\n\tmetalnessmap: {\n\n\t\tmetalnessMap: { value: null }\n\n\t},\n\n\tgradientmap: {\n\n\t\tgradientMap: { value: null }\n\n\t},\n\n\tfog: {\n\n\t\tfogDensity: { value: 0.00025 },\n\t\tfogNear: { value: 1 },\n\t\tfogFar: { value: 2000 },\n\t\tfogColor: { value: new Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\tambientLightColor: { value: [] },\n\n\t\tdirectionalLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tcolor: {},\n\n\t\t\tshadow: {},\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tdirectionalShadowMap: { value: [] },\n\t\tdirectionalShadowMatrix: { value: [] },\n\n\t\tspotLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdirection: {},\n\t\t\tdistance: {},\n\t\t\tconeCos: {},\n\t\t\tpenumbraCos: {},\n\t\t\tdecay: {},\n\n\t\t\tshadow: {},\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tspotShadowMap: { value: [] },\n\t\tspotShadowMatrix: { value: [] },\n\n\t\tpointLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdecay: {},\n\t\t\tdistance: {},\n\n\t\t\tshadow: {},\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tpointShadowMap: { value: [] },\n\t\tpointShadowMatrix: { value: [] },\n\n\t\themisphereLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tskyColor: {},\n\t\t\tgroundColor: {}\n\t\t} },\n\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n\t\trectAreaLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\twidth: {},\n\t\t\theight: {}\n\t\t} }\n\n\t},\n\n\tpoints: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tsize: { value: 1.0 },\n\t\tscale: { value: 1.0 },\n\t\tmap: { value: null },\n\t\toffsetRepeat: { value: new Vector4( 0, 0, 1, 1 ) }\n\n\t}\n\n};\n\nexport { UniformsLib };\n","/**\n * Uniform Utilities\n */\n\nvar UniformsUtils = {\n\n\tmerge: function ( uniforms ) {\n\n\t\tvar merged = {};\n\n\t\tfor ( var u = 0; u < uniforms.length; u ++ ) {\n\n\t\t\tvar tmp = this.clone( uniforms[ u ] );\n\n\t\t\tfor ( var p in tmp ) {\n\n\t\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn merged;\n\n\t},\n\n\tclone: function ( uniforms_src ) {\n\n\t\tvar uniforms_dst = {};\n\n\t\tfor ( var u in uniforms_src ) {\n\n\t\t\tuniforms_dst[ u ] = {};\n\n\t\t\tfor ( var p in uniforms_src[ u ] ) {\n\n\t\t\t\tvar parameter_src = uniforms_src[ u ][ p ];\n\n\t\t\t\tif ( parameter_src && ( parameter_src.isColor ||\n\t\t\t\t\tparameter_src.isMatrix3 || parameter_src.isMatrix4 ||\n\t\t\t\t\tparameter_src.isVector2 || parameter_src.isVector3 || parameter_src.isVector4 ||\n\t\t\t\t\tparameter_src.isTexture ) ) {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.clone();\n\n\t\t\t\t} else if ( Array.isArray( parameter_src ) ) {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.slice();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn uniforms_dst;\n\n\t}\n\n};\n\n\nexport { UniformsUtils };\n","import alphamap_fragment from './ShaderChunk/alphamap_fragment.glsl';\nimport alphamap_pars_fragment from './ShaderChunk/alphamap_pars_fragment.glsl';\nimport alphatest_fragment from './ShaderChunk/alphatest_fragment.glsl';\nimport aomap_fragment from './ShaderChunk/aomap_fragment.glsl';\nimport aomap_pars_fragment from './ShaderChunk/aomap_pars_fragment.glsl';\nimport begin_vertex from './ShaderChunk/begin_vertex.glsl';\nimport beginnormal_vertex from './ShaderChunk/beginnormal_vertex.glsl';\nimport bsdfs from './ShaderChunk/bsdfs.glsl';\nimport bumpmap_pars_fragment from './ShaderChunk/bumpmap_pars_fragment.glsl';\nimport clipping_planes_fragment from './ShaderChunk/clipping_planes_fragment.glsl';\nimport clipping_planes_pars_fragment from './ShaderChunk/clipping_planes_pars_fragment.glsl';\nimport clipping_planes_pars_vertex from './ShaderChunk/clipping_planes_pars_vertex.glsl';\nimport clipping_planes_vertex from './ShaderChunk/clipping_planes_vertex.glsl';\nimport color_fragment from './ShaderChunk/color_fragment.glsl';\nimport color_pars_fragment from './ShaderChunk/color_pars_fragment.glsl';\nimport color_pars_vertex from './ShaderChunk/color_pars_vertex.glsl';\nimport color_vertex from './ShaderChunk/color_vertex.glsl';\nimport common from './ShaderChunk/common.glsl';\nimport cube_uv_reflection_fragment from './ShaderChunk/cube_uv_reflection_fragment.glsl';\nimport defaultnormal_vertex from './ShaderChunk/defaultnormal_vertex.glsl';\nimport displacementmap_pars_vertex from './ShaderChunk/displacementmap_pars_vertex.glsl';\nimport displacementmap_vertex from './ShaderChunk/displacementmap_vertex.glsl';\nimport emissivemap_fragment from './ShaderChunk/emissivemap_fragment.glsl';\nimport emissivemap_pars_fragment from './ShaderChunk/emissivemap_pars_fragment.glsl';\nimport encodings_fragment from './ShaderChunk/encodings_fragment.glsl';\nimport encodings_pars_fragment from './ShaderChunk/encodings_pars_fragment.glsl';\nimport envmap_fragment from './ShaderChunk/envmap_fragment.glsl';\nimport envmap_pars_fragment from './ShaderChunk/envmap_pars_fragment.glsl';\nimport envmap_pars_vertex from './ShaderChunk/envmap_pars_vertex.glsl';\nimport envmap_vertex from './ShaderChunk/envmap_vertex.glsl';\nimport fog_vertex from './ShaderChunk/fog_vertex.glsl';\nimport fog_pars_vertex from './ShaderChunk/fog_pars_vertex.glsl';\nimport fog_fragment from './ShaderChunk/fog_fragment.glsl';\nimport fog_pars_fragment from './ShaderChunk/fog_pars_fragment.glsl';\nimport gradientmap_pars_fragment from './ShaderChunk/gradientmap_pars_fragment.glsl';\nimport lightmap_fragment from './ShaderChunk/lightmap_fragment.glsl';\nimport lightmap_pars_fragment from './ShaderChunk/lightmap_pars_fragment.glsl';\nimport lights_lambert_vertex from './ShaderChunk/lights_lambert_vertex.glsl';\nimport lights_pars from './ShaderChunk/lights_pars.glsl';\nimport lights_phong_fragment from './ShaderChunk/lights_phong_fragment.glsl';\nimport lights_phong_pars_fragment from './ShaderChunk/lights_phong_pars_fragment.glsl';\nimport lights_physical_fragment from './ShaderChunk/lights_physical_fragment.glsl';\nimport lights_physical_pars_fragment from './ShaderChunk/lights_physical_pars_fragment.glsl';\nimport lights_template from './ShaderChunk/lights_template.glsl';\nimport logdepthbuf_fragment from './ShaderChunk/logdepthbuf_fragment.glsl';\nimport logdepthbuf_pars_fragment from './ShaderChunk/logdepthbuf_pars_fragment.glsl';\nimport logdepthbuf_pars_vertex from './ShaderChunk/logdepthbuf_pars_vertex.glsl';\nimport logdepthbuf_vertex from './ShaderChunk/logdepthbuf_vertex.glsl';\nimport map_fragment from './ShaderChunk/map_fragment.glsl';\nimport map_pars_fragment from './ShaderChunk/map_pars_fragment.glsl';\nimport map_particle_fragment from './ShaderChunk/map_particle_fragment.glsl';\nimport map_particle_pars_fragment from './ShaderChunk/map_particle_pars_fragment.glsl';\nimport metalnessmap_fragment from './ShaderChunk/metalnessmap_fragment.glsl';\nimport metalnessmap_pars_fragment from './ShaderChunk/metalnessmap_pars_fragment.glsl';\nimport morphnormal_vertex from './ShaderChunk/morphnormal_vertex.glsl';\nimport morphtarget_pars_vertex from './ShaderChunk/morphtarget_pars_vertex.glsl';\nimport morphtarget_vertex from './ShaderChunk/morphtarget_vertex.glsl';\nimport normal_flip from './ShaderChunk/normal_flip.glsl';\nimport normal_fragment from './ShaderChunk/normal_fragment.glsl';\nimport normalmap_pars_fragment from './ShaderChunk/normalmap_pars_fragment.glsl';\nimport packing from './ShaderChunk/packing.glsl';\nimport premultiplied_alpha_fragment from './ShaderChunk/premultiplied_alpha_fragment.glsl';\nimport project_vertex from './ShaderChunk/project_vertex.glsl';\nimport dithering_fragment from './ShaderChunk/dithering_fragment.glsl';\nimport dithering_pars_fragment from './ShaderChunk/dithering_pars_fragment.glsl';\nimport roughnessmap_fragment from './ShaderChunk/roughnessmap_fragment.glsl';\nimport roughnessmap_pars_fragment from './ShaderChunk/roughnessmap_pars_fragment.glsl';\nimport shadowmap_pars_fragment from './ShaderChunk/shadowmap_pars_fragment.glsl';\nimport shadowmap_pars_vertex from './ShaderChunk/shadowmap_pars_vertex.glsl';\nimport shadowmap_vertex from './ShaderChunk/shadowmap_vertex.glsl';\nimport shadowmask_pars_fragment from './ShaderChunk/shadowmask_pars_fragment.glsl';\nimport skinbase_vertex from './ShaderChunk/skinbase_vertex.glsl';\nimport skinning_pars_vertex from './ShaderChunk/skinning_pars_vertex.glsl';\nimport skinning_vertex from './ShaderChunk/skinning_vertex.glsl';\nimport skinnormal_vertex from './ShaderChunk/skinnormal_vertex.glsl';\nimport specularmap_fragment from './ShaderChunk/specularmap_fragment.glsl';\nimport specularmap_pars_fragment from './ShaderChunk/specularmap_pars_fragment.glsl';\nimport tonemapping_fragment from './ShaderChunk/tonemapping_fragment.glsl';\nimport tonemapping_pars_fragment from './ShaderChunk/tonemapping_pars_fragment.glsl';\nimport uv_pars_fragment from './ShaderChunk/uv_pars_fragment.glsl';\nimport uv_pars_vertex from './ShaderChunk/uv_pars_vertex.glsl';\nimport uv_vertex from './ShaderChunk/uv_vertex.glsl';\nimport uv2_pars_fragment from './ShaderChunk/uv2_pars_fragment.glsl';\nimport uv2_pars_vertex from './ShaderChunk/uv2_pars_vertex.glsl';\nimport uv2_vertex from './ShaderChunk/uv2_vertex.glsl';\nimport worldpos_vertex from './ShaderChunk/worldpos_vertex.glsl';\n\nimport cube_frag from './ShaderLib/cube_frag.glsl';\nimport cube_vert from './ShaderLib/cube_vert.glsl';\nimport depth_frag from './ShaderLib/depth_frag.glsl';\nimport depth_vert from './ShaderLib/depth_vert.glsl';\nimport distanceRGBA_frag from './ShaderLib/distanceRGBA_frag.glsl';\nimport distanceRGBA_vert from './ShaderLib/distanceRGBA_vert.glsl';\nimport equirect_frag from './ShaderLib/equirect_frag.glsl';\nimport equirect_vert from './ShaderLib/equirect_vert.glsl';\nimport linedashed_frag from './ShaderLib/linedashed_frag.glsl';\nimport linedashed_vert from './ShaderLib/linedashed_vert.glsl';\nimport meshbasic_frag from './ShaderLib/meshbasic_frag.glsl';\nimport meshbasic_vert from './ShaderLib/meshbasic_vert.glsl';\nimport meshlambert_frag from './ShaderLib/meshlambert_frag.glsl';\nimport meshlambert_vert from './ShaderLib/meshlambert_vert.glsl';\nimport meshphong_frag from './ShaderLib/meshphong_frag.glsl';\nimport meshphong_vert from './ShaderLib/meshphong_vert.glsl';\nimport meshphysical_frag from './ShaderLib/meshphysical_frag.glsl';\nimport meshphysical_vert from './ShaderLib/meshphysical_vert.glsl';\nimport normal_frag from './ShaderLib/normal_frag.glsl';\nimport normal_vert from './ShaderLib/normal_vert.glsl';\nimport points_frag from './ShaderLib/points_frag.glsl';\nimport points_vert from './ShaderLib/points_vert.glsl';\nimport shadow_frag from './ShaderLib/shadow_frag.glsl';\nimport shadow_vert from './ShaderLib/shadow_vert.glsl';\n\nexport var ShaderChunk = {\n\talphamap_fragment: alphamap_fragment,\n\talphamap_pars_fragment: alphamap_pars_fragment,\n\talphatest_fragment: alphatest_fragment,\n\taomap_fragment: aomap_fragment,\n\taomap_pars_fragment: aomap_pars_fragment,\n\tbegin_vertex: begin_vertex,\n\tbeginnormal_vertex: beginnormal_vertex,\n\tbsdfs: bsdfs,\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\n\tclipping_planes_fragment: clipping_planes_fragment,\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\n\tclipping_planes_vertex: clipping_planes_vertex,\n\tcolor_fragment: color_fragment,\n\tcolor_pars_fragment: color_pars_fragment,\n\tcolor_pars_vertex: color_pars_vertex,\n\tcolor_vertex: color_vertex,\n\tcommon: common,\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\n\tdefaultnormal_vertex: defaultnormal_vertex,\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\n\tdisplacementmap_vertex: displacementmap_vertex,\n\temissivemap_fragment: emissivemap_fragment,\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\n\tencodings_fragment: encodings_fragment,\n\tencodings_pars_fragment: encodings_pars_fragment,\n\tenvmap_fragment: envmap_fragment,\n\tenvmap_pars_fragment: envmap_pars_fragment,\n\tenvmap_pars_vertex: envmap_pars_vertex,\n\tenvmap_vertex: envmap_vertex,\n\tfog_vertex: fog_vertex,\n\tfog_pars_vertex: fog_pars_vertex,\n\tfog_fragment: fog_fragment,\n\tfog_pars_fragment: fog_pars_fragment,\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\n\tlightmap_fragment: lightmap_fragment,\n\tlightmap_pars_fragment: lightmap_pars_fragment,\n\tlights_lambert_vertex: lights_lambert_vertex,\n\tlights_pars: lights_pars,\n\tlights_phong_fragment: lights_phong_fragment,\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\n\tlights_physical_fragment: lights_physical_fragment,\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\n\tlights_template: lights_template,\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\n\tmap_fragment: map_fragment,\n\tmap_pars_fragment: map_pars_fragment,\n\tmap_particle_fragment: map_particle_fragment,\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\n\tmetalnessmap_fragment: metalnessmap_fragment,\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\n\tmorphnormal_vertex: morphnormal_vertex,\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\n\tmorphtarget_vertex: morphtarget_vertex,\n\tnormal_flip: normal_flip,\n\tnormal_fragment: normal_fragment,\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\n\tpacking: packing,\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\n\tproject_vertex: project_vertex,\n\tdithering_fragment: dithering_fragment,\n\tdithering_pars_fragment: dithering_pars_fragment,\n\troughnessmap_fragment: roughnessmap_fragment,\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\n\tshadowmap_vertex: shadowmap_vertex,\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\n\tskinbase_vertex: skinbase_vertex,\n\tskinning_pars_vertex: skinning_pars_vertex,\n\tskinning_vertex: skinning_vertex,\n\tskinnormal_vertex: skinnormal_vertex,\n\tspecularmap_fragment: specularmap_fragment,\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\n\ttonemapping_fragment: tonemapping_fragment,\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\n\tuv_pars_fragment: uv_pars_fragment,\n\tuv_pars_vertex: uv_pars_vertex,\n\tuv_vertex: uv_vertex,\n\tuv2_pars_fragment: uv2_pars_fragment,\n\tuv2_pars_vertex: uv2_pars_vertex,\n\tuv2_vertex: uv2_vertex,\n\tworldpos_vertex: worldpos_vertex,\n\n\tcube_frag: cube_frag,\n\tcube_vert: cube_vert,\n\tdepth_frag: depth_frag,\n\tdepth_vert: depth_vert,\n\tdistanceRGBA_frag: distanceRGBA_frag,\n\tdistanceRGBA_vert: distanceRGBA_vert,\n\tequirect_frag: equirect_frag,\n\tequirect_vert: equirect_vert,\n\tlinedashed_frag: linedashed_frag,\n\tlinedashed_vert: linedashed_vert,\n\tmeshbasic_frag: meshbasic_frag,\n\tmeshbasic_vert: meshbasic_vert,\n\tmeshlambert_frag: meshlambert_frag,\n\tmeshlambert_vert: meshlambert_vert,\n\tmeshphong_frag: meshphong_frag,\n\tmeshphong_vert: meshphong_vert,\n\tmeshphysical_frag: meshphysical_frag,\n\tmeshphysical_vert: meshphysical_vert,\n\tnormal_frag: normal_frag,\n\tnormal_vert: normal_vert,\n\tpoints_frag: points_frag,\n\tpoints_vert: points_vert,\n\tshadow_frag: shadow_frag,\n\tshadow_vert: shadow_vert\n};\n","import { ShaderChunk } from './ShaderChunk';\nimport { UniformsUtils } from './UniformsUtils';\nimport { Vector3 } from '../../math/Vector3';\nimport { UniformsLib } from './UniformsLib';\nimport { Color } from '../../math/Color';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n */\n\nvar ShaderLib = {\n\n\tbasic: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\n\n\t},\n\n\tlambert: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\n\n\t},\n\n\tphong: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.gradientmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphong_vert,\n\t\tfragmentShader: ShaderChunk.meshphong_frag\n\n\t},\n\n\tstandard: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.roughnessmap,\n\t\t\tUniformsLib.metalnessmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\troughness: { value: 0.5 },\n\t\t\t\tmetalness: { value: 0.5 },\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\n\n\t},\n\n\tpoints: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.points,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.points_vert,\n\t\tfragmentShader: ShaderChunk.points_frag\n\n\t},\n\n\tdashed: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tscale: { value: 1 },\n\t\t\t\tdashSize: { value: 1 },\n\t\t\t\ttotalSize: { value: 2 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.linedashed_vert,\n\t\tfragmentShader: ShaderChunk.linedashed_frag\n\n\t},\n\n\tdepth: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.depth_vert,\n\t\tfragmentShader: ShaderChunk.depth_frag\n\n\t},\n\n\tnormal: {\n\n\t\tuniforms: UniformsUtils.merge( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.normal_vert,\n\t\tfragmentShader: ShaderChunk.normal_frag\n\n\t},\n\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\tcube: {\n\n\t\tuniforms: {\n\t\t\ttCube: { value: null },\n\t\t\ttFlip: { value: - 1 },\n\t\t\topacity: { value: 1.0 }\n\t\t},\n\n\t\tvertexShader: ShaderChunk.cube_vert,\n\t\tfragmentShader: ShaderChunk.cube_frag\n\n\t},\n\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\tequirect: {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t\ttFlip: { value: - 1 }\n\t\t},\n\n\t\tvertexShader: ShaderChunk.equirect_vert,\n\t\tfragmentShader: ShaderChunk.equirect_frag\n\n\t},\n\n\tdistanceRGBA: {\n\n\t\tuniforms: {\n\t\t\tlightPos: { value: new Vector3() }\n\t\t},\n\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\n\n\t}\n\n};\n\nShaderLib.physical = {\n\n\tuniforms: UniformsUtils.merge( [\n\t\tShaderLib.standard.uniforms,\n\t\t{\n\t\t\tclearCoat: { value: 0 },\n\t\t\tclearCoatRoughness: { value: 0 }\n\t\t}\n\t] ),\n\n\tvertexShader: ShaderChunk.meshphysical_vert,\n\tfragmentShader: ShaderChunk.meshphysical_frag\n\n};\n\n\nexport { ShaderLib };\n","import * as THREE from './../../node_modules/three/src/constants';\r\nimport {Mesh} from './../../node_modules/three/src/objects/Mesh';\r\nimport {Clock} from './../../node_modules/three/src/core/Clock';\r\nimport {PerspectiveCamera} from './../../node_modules/three/src/cameras/PerspectiveCamera';\r\nimport {CubeCamera} from './../../node_modules/three/src/cameras/CubeCamera';\r\nimport {Scene} from './../../node_modules/three/src/scenes/Scene';\r\nimport {Fog} from './../../node_modules/three/src/scenes/Fog';\r\nimport {CubeTextureLoader} from './../../node_modules/three/src/loaders/CubeTextureLoader';\r\nimport {MeshPhongMaterial} from './../../node_modules/three/src/materials/MeshPhongMaterial';\r\nimport {PlaneBufferGeometry} from './../../node_modules/three/src/geometries/PlaneGeometry';\r\nimport {SphereGeometry} from './../../node_modules/three/src/geometries/SphereGeometry';\r\nimport {BoxGeometry} from './../../node_modules/three/src/geometries/BoxGeometry';\r\nimport {TorusGeometry} from './../../node_modules/three/src/geometries/TorusGeometry';\r\nimport { SpotLight } from './../../node_modules/three/src/lights/SpotLight';\r\nimport { PointLight } from './../../node_modules/three/src/lights/PointLight';\r\nimport { DirectionalLight } from './../../node_modules/three/src/lights/DirectionalLight';\r\nimport { AmbientLight } from './../../node_modules/three/src/lights/AmbientLight';\r\nimport {ColladaLoader} from './ColladaLoader2';\r\nimport { LightShadow } from './../../node_modules/three/src/lights/LightShadow';\r\nimport { CameraHelper } from './../../node_modules/three/src/helpers/CameraHelper';\r\nimport { WebGLRenderer } from './../../node_modules/three/src/renderers/WebGLRenderer';\r\nimport { OrbitControls } from './OrbitControls';\r\nimport { TextureLoader } from './../../node_modules/three/src/loaders/TextureLoader';\r\nimport { Vector3 } from './../../node_modules/three/src/math/Vector3';\r\n//import {AxisHelper} from './../../node_modules/three/src/Three';\r\n\r\n\r\n\r\nwindow[\"ObjectViewer\"] = function ObjectViewer(id, objpath)\r\n{\r\n\t\r\n\t\r\n\tvar bbMin;\r\n\tvar bbMax;\r\n\tvar center = new Vector3();\r\n\tvar radius = 100;\r\n\t\r\n\tvar v1 = new Vector3();\r\n\tvar v2 = new Vector3();\r\n\tfunction UpdateBBox(o)\r\n\t{\r\n\t\to.geometry.computeBoundingBox();\r\n\t\tvar bb = o.geometry.boundingBox;\r\n\t\tv1.copy(bb.min).applyMatrix4(o.matrixWorld);\r\n\t\tv2.copy(bb.max).applyMatrix4(o.matrixWorld);\r\n\t\t\r\n\t\tif(bb === undefined) return;\r\n\t\tif(bbMin === undefined) bbMin = v1.clone();\r\n\t\tif(bbMax === undefined) bbMax = v2.clone();\r\n\t\t\r\n\t\tbbMin.x = Math.min(bbMin.x, v1.x);\r\n\t\tbbMin.y = Math.min(bbMin.y, v1.y);\r\n\t\tbbMin.z = Math.min(bbMin.z, v1.z);\r\n\t\t\r\n\t\tbbMax.x = Math.max(bbMax.x, v2.x);\r\n\t\tbbMax.y = Math.max(bbMax.y, v2.y);\r\n\t\tbbMax.z = Math.max(bbMax.z, v2.z);\r\n\t\t\r\n\t\tbbMin.x = Math.min(bbMin.x, bbMax.x);\r\n\t\tbbMin.y = Math.min(bbMin.y, bbMax.y);\r\n\t\tbbMin.z = Math.min(bbMin.z, bbMax.z);\r\n\t\t\r\n\t\tbbMax.x = Math.max(bbMax.x, bbMin.x);\r\n\t\tbbMax.y = Math.max(bbMax.y, bbMin.y);\r\n\t\tbbMax.z = Math.max(bbMax.z, bbMin.z);\r\n\t\t\r\n\t\tcenter.x = bbMin.x + (bbMax.x - bbMin.x)/2;\r\n\t\tcenter.y = bbMin.y + (bbMax.y - bbMin.y)/2;\r\n\t\tcenter.z = bbMin.z + (bbMax.z - bbMin.z)/2;\t\r\n\t}\r\n\tfunction CalcMinDistance()\r\n\t{\r\n\t\tradius = v1.copy(center).sub(bbMin).length();\r\n\t}\r\n\t\r\n\t\r\n\tfunction CalculateBoundingBox(obj3d)\r\n\t{\r\n\t\tif(obj3d.geometry !== undefined) UpdateBBox(obj3d);\r\n\t\tfor(var i = 0; i < obj3d.children.length ; i++)\r\n\t\t{\r\n\t\t\tCalculateBoundingBox( obj3d.children[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tvar canvas = document.getElementById(id);\r\n\tvar controls;\r\n\tvar camera, scene, renderer;\r\n\r\n\tcamera = new PerspectiveCamera( 45, canvas.clientWidth / canvas.clientHeight, 2, 4000 );\r\n\t//camera.position.set( 30, 30, 200 );\r\n\tcamera.position.set(0,0,radius);\r\n\t\r\n\twindow[\"testf\"] = function()\r\n\t{\r\n\t\tconsole.log(camera.position, controls);\r\n\t\tconsole.log(bbMin, bbMax);\r\n\t}\r\n\tscene = new Scene();\r\n\t//scene.fog = new Fog( 0, 1000, 10000 );\r\n\t\r\n\t\r\n\r\n\t\t// LIGHTS\r\n\t\t\r\n\t\tscene.add( new AmbientLight( 0xffffff,0.9));\r\n\t\t\r\n\t\r\n\t\t// RENDERER\r\n\t\trenderer = new WebGLRenderer( { antialias: true,canvas:canvas } );\r\n\t\trenderer.setClearColor(0xffffff);\r\n\t\trenderer.setPixelRatio( window.devicePixelRatio );\r\n\t\trenderer.setSize( canvas.clientWidth, canvas.clientHeight );\r\n\t\trenderer.shadowMap.enabled = true;\r\n\t\trenderer.shadowMap.type = THREE.PCFSoftShadowMap;\r\n\t\trenderer.gammaInput = true;\r\n\t\trenderer.gammaOutput = true;\r\n\r\n\t\tcontrols = new OrbitControls( camera, renderer.domElement );\r\n\t\tcontrols.target.set( 0, 0, 0 );\r\n\t\tcontrols.rotateSpeed = 0.3;\r\n\t\tcontrols.zoomSpeed = 1.2;\r\n\t\tcontrols.panSpeed = 0.8;\r\n\t\tcontrols.enableZoom = true;\r\n\t\tcontrols.enablePan = false;\r\n\t\tcontrols.enableDamping = true;\r\n\t\tcontrols.dampingFactor = 0.15;\r\n\t\tcontrols.keys = [ 65, 83, 68 ];\r\n\t\t\r\n\t\tvar loader = new ColladaLoader();\r\n\t\tloader.options.convertUpAxis = true;\r\n\t\tloader.load( objpath, function ( collada ) {\r\n\t\t\tvar object = collada.scene;\r\n\t\t\tobject.scale.set( 1, 1, 1 );\r\n\t\t\tscene.add( object );\r\n\t\t\tobject.updateMatrix();\r\n\t\t\tobject.updateMatrixWorld();\r\n\t\t\tobject.position.set(0,0,0);\r\n\t\t\tCalculateBoundingBox(object);\r\n\t\t\tCalcMinDistance();\r\n\t\t\tcamera.position.copy(center).add(new Vector3(0,0,radius*2));\r\n\t\t\tcontrols.minDistance = radius;\r\n\t\t\tcontrols.maxDistance = radius * 5;\r\n\t\t\tcontrols.target.copy(center);\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\tvar axis = new AxisHelper(100);\r\n\t\t\taxis.position.copy(center);\r\n\t\t\t\t\t\t\r\n\t\t\tvar mi = new AxisHelper(300);\r\n\t\t\tmi.position.copy(bbMin);\r\n\t\t\t\r\n\t\t\tvar ma = new AxisHelper(300);\r\n\t\t\tma.position.copy(bbMax);\r\n\t\t\t\r\n\t\t\tscene.add(axis);\r\n\t\t\tscene.add(mi);\r\n\t\t\tscene.add(ma);\r\n\t\t\t*/\r\n\t\t\t\r\n\t\t});\r\n\r\n\t\t// EVENTS\r\n\t\twindow.addEventListener( 'resize', onWindowResize, false );\r\n\t\r\n\tfunction onWindowResize( event ) {\r\n\t\tcamera.aspect = canvas.clientWidth / canvas.clientHeight;\r\n\t\tcamera.updateProjectionMatrix();\r\n\t\trenderer.setSize( canvas.clientWidth, canvas.clientHeight );\r\n\t\t\r\n\t}\r\n\t\t\t//\r\n\t\t\tfunction animate() {\r\n\t\t\t\trequestAnimationFrame( animate );\r\n\t\t\t\trender();\r\n\t\t\t}\r\n\t\t\tfunction render() {\r\n\t\t\t\t// update\r\n\t\t\t\t//var delta = clock.getDelta();\r\n\t\t\t\tcontrols.update();\r\n\r\n\t\t\t\trenderer.render( scene, camera );\r\n\t\t\t}\r\n\t\t\t//setInterval(render,1/35);\r\n\t\t\tanimate();\r\n}\r\nexport {ObjectViewer};"],"names":["Matrix4","this","elements","arguments","length","console","error","Quaternion","x","y","z","w","_x","_y","_z","_w","undefined","Vector3","Vector2","Box3","min","max","Infinity","Sphere","center","radius","Ray","origin","direction","EventDispatcher","Euler","order","_order","DefaultOrder","Layers","mask","Matrix3","Object3D","onRotationChange","quaternion","setFromEuler","rotation","onQuaternionChange","setFromQuaternion","Object","defineProperty","value","object3DId","uuid","_Math","generateUUID","name","type","parent","children","up","DefaultUp","clone","position","scale","onChange","defineProperties","enumerable","modelViewMatrix","normalMatrix","matrix","matrixWorld","matrixAutoUpdate","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","layers","visible","castShadow","receiveShadow","frustumCulled","renderOrder","userData","onBeforeRender","onAfterRender","Line3","start","end","Plane","normal","constant","Triangle","a","b","c","Color","r","g","set","setRGB","Face3","color","materialIndex","isVector3","vertexNormals","Array","isArray","isColor","vertexColors","Material","materialId","fog","lights","blending","NormalBlending","side","FrontSide","shading","SmoothShading","NoColors","opacity","transparent","blendSrc","SrcAlphaFactor","blendDst","OneMinusSrcAlphaFactor","blendEquation","AddEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","LessEqualDepth","depthTest","depthWrite","clippingPlanes","clipIntersection","clipShadows","colorWrite","precision","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaTest","premultipliedAlpha","overdraw","needsUpdate","MeshBasicMaterial","parameters","call","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","specularMap","alphaMap","envMap","combine","MultiplyOperation","reflectivity","refractionRatio","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","skinning","morphTargets","setValues","Vector4","BufferAttribute","array","itemSize","normalized","TypeError","count","dynamic","updateRange","offset","onUploadCallback","version","Uint16BufferAttribute","Uint16Array","Uint32BufferAttribute","Uint32Array","Float32BufferAttribute","Float32Array","DirectGeometry","indices","vertices","normals","colors","uvs","uvs2","groups","skinWeights","skinIndices","boundingBox","boundingSphere","verticesNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","uvsNeedUpdate","groupsNeedUpdate","arrayMax","i","l","GeometryIdCount","Geometry","faces","faceVertexUvs","morphNormals","lineDistances","elementsNeedUpdate","lineDistancesNeedUpdate","BufferGeometry","index","attributes","morphAttributes","drawRange","Mesh","geometry","material","Math","random","drawMode","TrianglesDrawMode","updateMorphTargets","Clock","autoStart","startTime","oldTime","elapsedTime","running","Camera","matrixWorldInverse","projectionMatrix","PerspectiveCamera","fov","aspect","near","far","zoom","focus","view","filmGauge","filmOffset","updateProjectionMatrix","Texture","image","mapping","wrapS","wrapT","magFilter","minFilter","format","anisotropy","encoding","textureId","DEFAULT_IMAGE","mipmaps","DEFAULT_MAPPING","ClampToEdgeWrapping","LinearFilter","LinearMipMapLinearFilter","RGBAFormat","UnsignedByteType","repeat","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","LinearEncoding","onUpdate","WebGLRenderTarget","width","height","options","scissor","scissorTest","viewport","texture","depthBuffer","stencilBuffer","depthTexture","Scene","background","overrideMaterial","autoUpdate","LoadingManager","onLoad","onProgress","onError","scope","isLoading","itemsLoaded","itemsTotal","onStart","itemStart","url","itemEnd","itemError","ImageLoader","manager","DefaultLoadingManager","CubeTexture","images","CubeReflectionMapping","CubeTextureLoader","MeshPhongMaterial","specular","shininess","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalScale","displacementMap","displacementScale","displacementBias","PlaneBufferGeometry","widthSegments","heightSegments","ix","iy","width_half","height_half","gridX","floor","gridY","gridX1","gridY1","segment_width","segment_height","push","d","setIndex","addAttribute","BoxBufferGeometry","depth","depthSegments","buildPlane","u","v","udir","vdir","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","vertexCounter","groupCount","vector","numberOfVertices","addGroup","groupStart","Light","intensity","LightShadow","camera","bias","mapSize","SpotLightShadow","SpotLight","distance","angle","penumbra","decay","copy","updateMatrix","target","get","PI","power","shadow","PointLight","OrthographicCamera","left","right","top","bottom","DirectionalLightShadow","DirectionalLight","AmbientLight","FileLoader","MeshLambertMaterial","LineBasicMaterial","linewidth","linecap","linejoin","Line","mode","warn","LineSegments","Group","ColladaLoader","CameraHelper","addLine","addPoint","id","pointMap","FaceColors","colorFrustum","colorCone","colorUp","colorTarget","colorCross","update","DataTexture","data","NearestFilter","UniformContainer","seq","flatten","nBlocks","blockSize","firstElem","n","arrayCacheF32","toArray","allocTexUnits","renderer","arrayCacheI32","Int32Array","allocTextureUnit","setValue1f","gl","uniform1f","addr","setValue1i","uniform1i","setValue2fv","uniform2fv","uniform2f","setValue3fv","uniform3f","uniform3fv","setValue4fv","uniform4fv","uniform4f","setValue2fm","uniformMatrix2fv","setValue3fm","uniformMatrix3fv","mat3array","setValue4fm","uniformMatrix4fv","mat4array","setValueT1","unit","setTexture2D","emptyTexture","setValueT6","setTextureCube","emptyCubeTexture","setValue2iv","uniform2iv","setValue3iv","uniform3iv","setValue4iv","uniform4iv","getSingularSetter","setValue1fv","uniform1fv","setValue1iv","uniform1iv","setValueV2a","size","setValueV3a","setValueV4a","setValueM2a","setValueM3a","setValueM4a","setValueT1a","units","setValueT6a","getPureArraySetter","SingleUniform","activeInfo","setValue","PureArrayUniform","StructuredUniform","addUniform","container","uniformObject","parseUniform","path","pathLength","RePathPart","lastIndex","match","exec","matchEnd","idIsIndex","subscript","next","WebGLUniforms","program","getProgramParameter","ACTIVE_UNIFORMS","info","getActiveUniform","getUniformLocation","Box2","LensFlarePlugin","flares","init","vertexBuffer","createBuffer","elementBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","ELEMENT_ARRAY_BUFFER","tempTexture","createTexture","occlusionTexture","state","bindTexture","TEXTURE_2D","texImage2D","RGB","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","RGBA","shader","vertexShader","join","fragmentShader","createProgram","vertex","getAttribLocation","uv","uniforms","renderType","occlusionMap","screenPosition","createShader","FRAGMENT_SHADER","VERTEX_SHADER","prefix","getPrecision","shaderSource","compileShader","attachShader","linkProgram","context","render","scene","tempPosition","invAspect","halfViewportWidth","halfViewportHeight","screenPositionPixels","validArea","useProgram","initAttributes","enableAttribute","disableUnusedAttributes","vertexAttribPointer","FLOAT","disable","CULL_FACE","buffers","setMask","flare","applyMatrix4","containsPoint","activeTexture","TEXTURE0","TEXTURE1","copyTexImage2D","BLEND","enable","DEPTH_TEST","drawElements","TRIANGLES","UNSIGNED_SHORT","positionScreen","customUpdateCallback","updateLensFlares","j","jl","lensFlares","sprite","setBlending","resetGLState","SpritePlugin","sprites","uvOffset","uvScale","fogType","fogDensity","fogNear","fogFar","fogColor","canvas","document","createElementNS","getContext","fillStyle","fillRect","painterSortStable","spritePosition","spriteRotation","spriteScale","oldFogType","sceneFogType","isFog","isFogExp2","density","multiplyMatrices","sort","decompose","setTest","ShaderMaterial","defines","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","uv2","index0AttributeName","MeshDepthMaterial","depthPacking","BasicDepthPacking","Frustum","p0","p1","p2","p3","p4","p5","planes","WebGLShadowMap","_renderer","_lights","_objects","capabilities","getDepthMaterial","object","isPointLight","lightPositionWorld","result","materialVariants","_depthMaterials","customMaterial","customDepthMaterial","_distanceMaterials","customDistanceMaterial","useMorphing","isBufferGeometry","isGeometry","isSkinnedMesh","useSkinning","variantIndex","_MorphingFlag","_SkinningFlag","localClippingEnabled","keyA","keyB","materialsForVariant","_materialCache","cachedMaterial","renderSingleSided","DoubleSide","renderReverseSided","BackSide","lightPos","renderObject","shadowCamera","test","isMesh","isLine","isPoints","_frustum","intersectsObject","k","kl","group","groupMaterial","depthMaterial","_lightPositionWorld","renderBufferDirect","_gl","_state","_projScreenMatrix","_lightShadows","shadows","_shadowMapSize","_maxShadowMapSize","maxTextureSize","_lookTarget","_NumberOfMaterialVariants","cubeDirections","cubeUps","cube2DViewPorts","depthMaterialTemplate","RGBADepthPacking","distanceShader","ShaderLib","distanceUniforms","UniformsUtils","distanceMaterial","USE_SHADOWMAP","enabled","PCFShadowMap","setClear","setScissorTest","faceCount","il","light","shadowMatrix","setFromMatrixPosition","vpWidth","vpHeight","makeTranslation","lookAt","updateMatrixWorld","getInverse","multiply","pars","isSpotLightShadow","shadowMap","setRenderTarget","clear","face","add","vpDimensions","setFromMatrix","clearColor","getClearColor","clearAlpha","getClearAlpha","setClearColor","WebGLAttributes","attribute","bufferType","usage","DYNAMIC_DRAW","buffer","Float64Array","Int16Array","SHORT","UNSIGNED_INT","INT","Int8Array","BYTE","Uint8Array","bytesPerElement","BYTES_PER_ELEMENT","updateBuffer","bufferSubData","subarray","isInterleavedBufferAttribute","remove","deleteBuffer","reversePainterSortStable","WebGLRenderList","opaqueLastIndex","transparentLastIndex","opaque","renderItem","finish","WebGLRenderLists","hash","list","lists","dispose","WebGLIndexedBufferRenderer","infoRender","setMode","calls","renderInstances","extension","drawElementsInstancedANGLE","maxInstancedCount","WebGLBufferRenderer","drawArrays","drawArraysInstancedANGLE","WebGLGeometries","infoMemory","onGeometryDispose","event","buffergeometry","geometries","removeEventListener","wireframeAttributes","addEventListener","_bufferGeometry","setFromObject","geometryAttributes","getWireframeAttribute","geometryIndex","WebGLLights","shadowBias","shadowRadius","shadowMapSize","coneCos","penumbraCos","skyColor","groundColor","halfWidth","halfHeight","WebGLObjects","frame","updateList","updateFromObject","addLineNumbers","string","lines","split","WebGLShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","getEncodingComponents","sRGBEncoding","RGBEEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","GammaEncoding","Error","getTexelDecodingFunction","functionName","components","getTexelEncodingFunction","getToneMappingFunction","toneMapping","toneMappingName","LinearToneMapping","ReinhardToneMapping","Uncharted2ToneMapping","CineonToneMapping","generateExtensions","rendererExtensions","envMapCubeUV","flatShading","logarithmicDepthBuffer","filter","filterEmptyLine","generateDefines","chunks","fetchAttributeLocations","identifiers","ACTIVE_ATTRIBUTES","getActiveAttrib","replaceLightNums","replace","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","parseIncludes","include","ShaderChunk","pattern","unrollLoops","snippet","unroll","parseInt","WebGLProgram","code","__webglShader","shadowMapTypeDefine","shadowMapType","PCFSoftShadowMap","envMapTypeDefine","envMapModeDefine","envMapBlendingDefine","CubeRefractionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","MixOperation","AddOperation","prefixVertex","prefixFragment","gammaFactorDefine","gammaFactor","customExtensions","customDefines","isRawShaderMaterial","supportsVertexTextures","maxBones","useFog","fogExp","roughnessMap","metalnessMap","useVertexTexture","doubleSided","flipSided","numClippingPlanes","shadowMapEnabled","sizeAttenuation","gradientMap","numClipIntersection","physicallyCorrectLights","NoToneMapping","outputEncoding","mapEncoding","envMapEncoding","emissiveMapEncoding","isShaderMaterial","vertexGlsl","fragmentGlsl","glVertexShader","glFragmentShader","bindAttribLocation","programLog","getProgramInfoLog","vertexLog","fragmentLog","runnable","haveDiagnostics","LINK_STATUS","getError","VALIDATE_STATUS","diagnostics","log","deleteShader","cachedUniforms","getUniforms","cachedAttributes","getAttributes","destroy","deleteProgram","programIdCount","usedTimes","WebGLPrograms","allocateBones","bones","skeleton","floatVertexTextures","nVertexUniforms","maxVertexUniforms","nVertexMatrices","getTextureEncodingFromMap","gammaOverrideLinear","isTexture","isWebGLRenderTarget","programs","shaderIDs","MeshNormalMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","LineDashedMaterial","PointsMaterial","parameterNames","getParameters","nClipPlanes","nClipIntersection","shaderID","getMaxPrecision","currentRenderTarget","getRenderTarget","vertexTextures","gammaOutput","gammaInput","envMapMode","FlatShading","maxMorphTargets","maxMorphNormals","directional","point","spot","rectArea","hemi","getProgramCode","acquireProgram","p","pl","programInfo","releaseProgram","indexOf","pop","WebGLTextures","properties","paramThreeToGL","clampToMaxSize","maxSize","drawImage","isPowerOfTwo","makePowerOfTwo","HTMLImageElement","HTMLCanvasElement","nearestPowerOfTwo","textureNeedsPowerOfTwo","filterFallback","f","NearestMipMapNearestFilter","NearestMipMapLinearFilter","LINEAR","onTextureDispose","deallocateTexture","textures","onRenderTargetDispose","renderTarget","deallocateRenderTarget","textureProperties","__image__webglTextureCube","deleteTexture","__webglInit","__webglTexture","renderTargetProperties","isWebGLRenderTargetCube","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","slot","__version","complete","uploadTexture","TEXTURE_CUBE_MAP","pixelStorei","UNPACK_FLIP_Y_WEBGL","isCompressed","isCompressedTexture","isDataTexture","cubeImage","maxCubemapSize","isPowerOfTwoImage","glFormat","glType","setTextureParameters","mipmap","RGBFormat","getCompressedTextureFormats","compressedTexImage2D","TEXTURE_CUBE_MAP_POSITIVE_X","generateMipmap","setTextureCubeDynamic","textureType","FloatType","HalfFloatType","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","getMaxAnisotropy","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","isDepthTexture","internalFormat","DEPTH_COMPONENT","_isWebGL2","DEPTH_COMPONENT32F","DEPTH_COMPONENT16","DepthFormat","UnsignedShortType","UnsignedIntType","DepthStencilFormat","DEPTH_STENCIL","UnsignedInt248Type","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL_ATTACHMENT","RGBA4","setupDepthTexture","webglDepthTexture","setupDepthRenderbuffer","isCube","createRenderbuffer","setupRenderTarget","isTargetPowerOfTwo","createFramebuffer","COLOR_ATTACHMENT0","updateRenderTargetMipmap","webglTexture","WebGL2RenderingContext","WebGLProperties","WebGLState","ColorBuffer","locked","currentColorMask","currentColorClear","colorMask","setLocked","lock","equals","reset","DepthBuffer","currentDepthMask","currentDepthFunc","currentDepthClear","depthMask","setFunc","NeverDepth","NEVER","AlwaysDepth","ALWAYS","LessDepth","LESS","LEQUAL","EqualDepth","EQUAL","GreaterEqualDepth","GEQUAL","GreaterDepth","GREATER","NotEqualDepth","NOTEQUAL","clearDepth","StencilBuffer","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","STENCIL_TEST","stencilMask","stencilFunc","stencilRef","setOp","stencilFail","stencilZFail","stencilZPass","stencilOp","stencil","clearStencil","colorBuffer","setFlipSided","setCullFace","CullFaceBack","newAttributes","enabledAttributes","enableVertexAttribArray","attributeDivisors","vertexAttribDivisorANGLE","enableAttributeAndDivisor","meshPerAttribute","disableVertexAttribArray","compressedTextureFormats","formats","getParameter","COMPRESSED_TEXTURE_FORMATS","NoBlending","currentBlending","currentPremultipledAlpha","AdditiveBlending","blendEquationSeparate","FUNC_ADD","blendFuncSeparate","ONE","blendFunc","SRC_ALPHA","SubtractiveBlending","ZERO","ONE_MINUS_SRC_COLOR","ONE_MINUS_SRC_ALPHA","MultiplyBlending","SRC_COLOR","CustomBlending","currentBlendEquation","currentBlendEquationAlpha","currentBlendSrc","currentBlendDst","currentBlendSrcAlpha","currentBlendDstAlpha","setMaterial","setPolygonOffset","currentFlipSided","frontFace","CW","CCW","cullFace","CullFaceNone","currentCullFace","BACK","CullFaceFront","FRONT","FRONT_AND_BACK","setLineWidth","currentLineWidth","lineWidthAvailable","lineWidth","factor","POLYGON_OFFSET_FILL","currentPolygonOffsetFactor","currentPolygonOffsetUnits","getScissorTest","currentScissorTest","SCISSOR_TEST","webglSlot","maxTextures","currentTextureSlot","webglType","boundTexture","currentBoundTextures","emptyTextures","apply","currentScissor","currentViewport","maxVertexAttributes","MAX_VERTEX_ATTRIBS","MAX_TEXTURE_IMAGE_UNITS","parseFloat","VERSION","WebGLCapabilities","maxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getShaderPrecisionFormat","HIGH_FLOAT","MEDIUM_FLOAT","maxPrecision","maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE","maxAttributes","MAX_VERTEX_UNIFORM_VECTORS","maxVaryings","MAX_VARYING_VECTORS","maxFragmentUniforms","MAX_FRAGMENT_UNIFORM_VECTORS","floatFragmentTextures","WebGLExtensions","getExtension","WebGLClipping","resetGlobalState","uniform","globalState","numGlobalPlanes","numPlanes","numIntersection","projectPlanes","dstOffset","skipTransform","nPlanes","dstArray","flatSize","viewMatrix","viewNormalMatrix","getNormalMatrix","i4","plane","renderingShadows","enableLocalClipping","beginShadows","endShadows","setState","cache","fromCache","nGlobal","lGlobal","clippingState","WebGLRenderer","getTargetPixelRatio","_currentRenderTarget","_pixelRatio","setDefaultGLState","_currentScissor","_scissor","multiplyScalar","_currentViewport","_viewport","_clearColor","_clearAlpha","_premultipliedAlpha","_currentProgram","_currentCamera","_currentGeometryProgram","_currentMaterialId","onContextLost","preventDefault","objects","onMaterialDispose","deallocateMaterial","releaseMaterialProgramReference","programCache","renderObjectImmediate","_this","renderBufferImmediate","absNumericalSort","abs","setupVertexAttributes","startIndex","isInstancedBufferGeometry","programAttributes","materialDefaultAttributeValues","programAttribute","geometryAttribute","attributeProperties","stride","isInstancedInterleavedBuffer","isInstancedBufferAttribute","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","projectObject","sortObjects","isLight","isSprite","intersectsSprite","isLensFlare","isImmediateRenderObject","_vector3","currentRenderList","renderObjects","renderList","isArrayCamera","cameras","camera2","bounds","setViewport","_width","_height","setScissor","setProgram","initMaterial","materialProperties","_clipping","programChange","numSupportedMorphTargets","numSupportedMorphNormals","lightsHash","ambientLightColor","ambient","directionalLights","spotLights","rectAreaLights","pointLights","hemisphereLights","directionalShadowMap","directionalShadowMatrix","spotShadowMap","spotShadowMatrix","pointShadowMap","pointShadowMatrix","progUniforms","uniformsList","seqWithValue","_usedTextureUnits","_clippingEnabled","_localClippingEnabled","useCache","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","LN2","isMeshPhongMaterial","isMeshStandardMaterial","uCamPos","cameraPosition","isMeshLambertMaterial","isMeshBasicMaterial","toneMappingExposure","toneMappingWhitePoint","setOptional","boneTexture","sqrt","nextPowerOfTwo","ceil","boneMatrices","boneTextureSize","markUniformsLightsNeedsUpdate","refreshUniformsFog","isMeshNormalMaterial","isMeshDepthMaterial","refreshUniformsCommon","isLineBasicMaterial","refreshUniformsLine","isLineDashedMaterial","refreshUniformsDash","isPointsMaterial","refreshUniformsPoints","refreshUniformsLambert","isMeshToonMaterial","refreshUniformsToon","refreshUniformsPhong","isMeshPhysicalMaterial","refreshUniformsPhysical","refreshUniformsStandard","refreshUniformsNormal","ltcMat","UniformsLib","LTC_MAT_TEXTURE","ltcMag","LTC_MAG_TEXTURE","upload","diffuse","uvScaleMap","offsetRepeat","flipEnvMap","isCubeTexture","dashSize","totalSize","gapSize","roughness","metalness","envMapIntensity","clearCoat","clearCoatRoughness","setupShadows","lightShadowsLength","setupLights","ll","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","isAmbientLight","isDirectionalLight","lightCache","sub","transformDirection","isSpotLight","cos","isRectAreaLight","_matrix42","identity","_matrix4","premultiply","extractRotation","isHemisphereLight","normalize","textureUnit","RepeatWrapping","REPEAT","MirroredRepeatWrapping","MIRRORED_REPEAT","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LinearMipMapNearestFilter","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","UnsignedShort4444Type","UNSIGNED_SHORT_4_4_4_4","UnsignedShort5551Type","UNSIGNED_SHORT_5_5_5_1","UnsignedShort565Type","UNSIGNED_SHORT_5_6_5","ByteType","ShortType","IntType","HALF_FLOAT_OES","AlphaFormat","ALPHA","LuminanceFormat","LUMINANCE","LuminanceAlphaFormat","LUMINANCE_ALPHA","SubtractEquation","FUNC_SUBTRACT","ReverseSubtractEquation","FUNC_REVERSE_SUBTRACT","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","DstAlphaFactor","DST_ALPHA","OneMinusDstAlphaFactor","ONE_MINUS_DST_ALPHA","DstColorFactor","DST_COLOR","OneMinusDstColorFactor","ONE_MINUS_DST_COLOR","SrcAlphaSaturateFactor","SRC_ALPHA_SATURATE","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","RGB_ETC1_Format","COMPRESSED_RGB_ETC1_WEBGL","MinEquation","MaxEquation","MIN_EXT","MAX_EXT","UNSIGNED_INT_24_8_WEBGL","REVISION","_canvas","_context","_alpha","alpha","_depth","_stencil","_antialias","antialias","_preserveDrawingBuffer","preserveDrawingBuffer","morphInfluences","domElement","autoClear","autoClearColor","autoClearDepth","autoClearStencil","_currentFramebuffer","_currentScissorTest","_scissorTest","_infoMemory","_infoRender","points","memory","contextAttributes","rangeMin","rangeMax","MaxIndex","renderLists","backgroundPlaneCamera","backgroundPlaneMesh","backgroundBoxCamera","backgroundBoxMesh","bufferRenderer","indexedBufferRenderer","spritePlugin","lensFlarePlugin","getContextAttributes","forceContextLoss","loseContext","getPixelRatio","setPixelRatio","setSize","getSize","updateStyle","style","boolean","setClearAlpha","bits","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","clearTarget","hasPositions","hasNormals","hasUvs","hasColors","positionArray","normalArray","nx","ny","nz","uvArray","colorArray","geometryProgram","updateBuffers","morphTargetInfluences","activeInfluences","influence","removeAttribute","rangeFactor","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","LINES","TriangleStripDrawMode","TRIANGLE_STRIP","TriangleFanDrawMode","TRIANGLE_FAN","isLineSegments","isLineLoop","LINE_LOOP","LINE_STRIP","POINTS","compile","traverse","forceClear","isCamera","cube","opaqueObjects","transparentObjects","setFaceCulling","frontFaceDirection","FrontFaceDirectionCW","warned","setTexture","activeCubeFace","activeMipMapLevel","readRenderTargetPixels","restore","textureFormat","IMPLEMENTATION_COLOR_READ_FORMAT","IMPLEMENTATION_COLOR_READ_TYPE","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readPixels","Spherical","phi","theta","OrbitControls","getAutoRotationAngle","autoRotateSpeed","getZoomScale","pow","zoomSpeed","rotateLeft","rotateUp","dollyIn","dollyScale","minZoom","maxZoom","enableZoom","dollyOut","handleMouseDownRotate","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","subVectors","rotateEnd","rotateStart","element","body","rotateDelta","clientWidth","rotateSpeed","clientHeight","handleMouseMoveDolly","dollyEnd","dollyStart","dollyDelta","handleMouseMovePan","panEnd","panStart","panDelta","handleMouseUp","handleMouseWheel","delta","wheelDelta","detail","handleKeyDown","keyCode","keys","UP","keyPanSpeed","BOTTOM","LEFT","RIGHT","handleTouchStartRotate","touches","pageX","pageY","handleTouchStartDolly","dx","dy","handleTouchStartPan","handleTouchMoveRotate","handleTouchMoveDolly","handleTouchMovePan","handleTouchEnd","onMouseDown","button","mouseButtons","ORBIT","enableRotate","STATE","ROTATE","ZOOM","DOLLY","PAN","enablePan","NONE","onMouseMove","onMouseUp","dispatchEvent","startEvent","endEvent","onMouseWheel","stopPropagation","onKeyDown","enableKeys","onTouchStart","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","onTouchMove","onTouchEnd","onContextMenu","minDistance","maxDistance","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","autoRotate","THREE","MIDDLE","target0","position0","zoom0","getPolarAngle","spherical","getAzimuthalAngle","changeEvent","quat","setFromUnitVectors","quatInverse","inverse","lastPosition","lastQuaternion","applyQuaternion","setFromVector3","sphericalDelta","makeSafe","panOffset","setFromSpherical","zoomChanged","distanceToSquared","EPS","dot","panLeft","objectMatrix","setFromMatrixColumn","panUp","pan","deltaX","deltaY","targetDistance","tan","TextureLoader","MOUSE","DEG2RAD","RAD2DEG","chars","rnd","clamp","euclideanModulo","m","mapLinear","a1","a2","b1","b2","lerp","t","smoothstep","smootherstep","randInt","low","high","randFloat","randFloatSpread","range","degToRad","degrees","radToDeg","radians","round","assign","prototype","isMatrix4","n11","n12","n13","n14","n21","n22","n23","n24","n31","n32","n33","n34","n41","n42","n43","n44","te","fromArray","me","copyPosition","extractBasis","xAxis","yAxis","zAxis","makeBasis","v1","scaleX","scaleY","scaleZ","makeRotationFromEuler","euler","isEuler","sin","e","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","makeRotationFromQuaternion","q","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","eye","lengthSq","crossVectors","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","s","applyToBufferAttribute","getX","getY","getZ","setXYZ","determinant","transpose","tmp","setPosition","throwOnDegenerate","t11","t12","t13","t14","det","msg","detInv","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","axis","tx","ty","makeScale","makeShear","compose","sx","sy","sz","invSX","invSY","invSZ","setFromRotationMatrix","makePerspective","makeOrthographic","h","slerp","qa","qb","qm","slerpFlat","dst","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","dir","sqrSin","Number","EPSILON","len","atan2","tDir","onChangeCallback","constructor","c1","c2","c3","s1","s2","s3","setFromAxisAngle","halfAngle","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","vFrom","vTo","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","callback","setScalar","scalar","setX","setY","setZ","setComponent","getComponent","addVectors","addScalar","addScaledVector","subScalar","multiplyVectors","applyEuler","applyAxisAngle","applyMatrix3","divideScalar","qx","qy","qz","qw","iz","iw","project","unproject","divide","clampScalar","minVal","maxVal","clampLength","roundToZero","negate","lengthManhattan","setLength","lerpVectors","v2","cross","ax","ay","az","bx","by","bz","projectOnVector","projectOnPlane","planeNormal","reflect","angleTo","acos","distanceTo","dz","distanceToManhattan","sinPhiRadius","setFromCylindrical","setFromMatrixScale","fromBufferAttribute","isVector2","rotateAround","isBox3","setFromArray","minX","minY","minZ","maxX","maxY","maxZ","setFromBufferAttribute","setFromPoints","makeEmpty","expandByPoint","setFromCenterAndSize","halfSize","expandByObject","box","isEmpty","getCenter","optionalTarget","expandByVector","expandByScalar","node","containsBox","intersectsBox","intersectsSphere","closestPoint","sphere","clampPoint","intersectsPlane","distanceToPoint","getBoundingSphere","intersect","union","translate","optionalCenter","maxRadiusSq","empty","radiusSum","deltaLengthSq","getBoundingBox","ray","at","recast","closestPointToPoint","directionDistance","distanceSqToPoint","distanceSqToSegment","segCenter","segDir","diff","v0","optionalPointOnRay","optionalPointOnSegment","s0","sqrDist","extDet","segExtent","a01","b0","invDet","intersectSphere","tca","d2","radius2","thc","t0","t1","distanceToPlane","denominator","intersectPlane","distToPoint","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","edge1","edge2","backfaceCulling","sign","DdN","DdQxE2","DdE1xQ","QdN","matrix4","listener","_listeners","listeners","hasEventListener","listenerArray","splice","RotationOrders","asin","reorder","newOrder","toVector3","optionalResult","channel","toggle","isMatrix3","setFromMatrix4","transposeIntoArray","isObject3D","applyMatrix","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","q1","rotateX","rotateY","rotateZ","translateOnAxis","translateX","translateY","translateZ","localToWorld","worldToLocal","m1","getObjectById","getObjectByProperty","getObjectByName","getWorldPosition","getWorldQuaternion","getWorldRotation","getWorldScale","getWorldDirection","raycast","traverseVisible","traverseAncestors","force","toJSON","meta","serialize","library","extractFromCache","values","key","metadata","isRootObject","output","materials","generator","JSON","stringify","uuids","recursive","source","parse","child","line","distanceSq","closestPointToPointParameter","startP","startEnd","clampToLine","startEnd2","setComponents","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","orthoPoint","perpendicularMagnitude","intersectLine","intersectsLine","startSign","endSign","coplanarPoint","optionalNormalMatrix","referencePoint","resultLengthSq","barycoordFromPoint","dot00","dot01","dot02","dot11","dot12","denom","invDenom","setFromPointsAndIndices","i0","i1","i2","triangle","area","midpoint","edgeList","projectedPoint","ColorKeywords","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","setHex","setStyle","hex","setHSL","hue2rgb","handleAlpha","charAt","copyGammaToLinear","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","getHex","getHexString","toString","slice","getHSL","hue","saturation","hsl","lightness","getStyle","offsetHSL","addColors","color1","color2","isMaterial","newValue","currentValue","isRoot","srcPlanes","dstPlanes","create","isVector4","setW","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","getW","isBufferAttribute","setArray","setDynamic","copyAt","index1","index2","copyArray","copyColorsArray","copyIndicesArray","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","setXY","setXYZW","onUpload","computeGroups","fromGeometry","morphTargetsPosition","hasFaceVertexUv","hasFaceVertexUv2","morphTargetsLength","morphTargetsNormal","morphNormalsLength","hasSkinIndices","hasSkinWeights","vertexUvs","morphTarget","morphNormal","computeBoundingBox","computeBoundingSphere","obj","fromBufferGeometry","addFace","tempNormals","tempUVs","tempUVs2","positions","computeFaceNormals","cb","ab","fl","vA","vB","vC","computeVertexNormals","areaWeighted","vl","computeFlatVertexNormals","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","computeLineDistances","merge","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","uvs1","colors1","colors2","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","uvCopy","mergeMesh","mesh","mergeVertices","verticesMap","unique","changes","faceIndicesToRemove","idx","sortFacesByMaterialIndex","materialIndexSort","_id","newUvs1","newUvs2","setBit","getNormalIndex","normalsHash","getColorIndex","colorsHash","getUvIndex","uvsHash","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","uvsCopy","srcVertexNormal","destVertexNormal","getIndex","getAttribute","clearGroups","setDrawRange","direct","__directGeometry","lineDistance","fromDirectGeometry","isNaN","pA","pB","pC","normalizeNormals","attributeArray1","attribute2","attributeArray2","toNonIndexed","geometry2","array2","morphAttribute","setDrawMode","morphTargetDictionary","ml","uvIntersection","uv1","uv3","barycoord","checkIntersection","raycaster","intersectionPointWorld","checkBufferGeometryIntersection","intersection","intersectionPoint","uvA","uvB","uvC","faceIndex","inverseMatrix","tempA","tempB","tempC","intersects","fvA","fvB","fvC","isMultiMaterial","faceMaterial","tl","targets","uvs_f","performance","Date","now","stop","getElapsedTime","getDelta","newTime","isPerspectiveCamera","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","getEffectiveFOV","getFilmWidth","setViewOffset","fullWidth","fullHeight","offsetX","offsetY","clearViewOffset","skew","wrap","toDataURL","transformUv","Cache","files","file","load","cached","setTimeout","substr","crossOrigin","src","setCrossOrigin","setPath","urls","loader","loaded","isOrthographicCamera","cx","cy","zoomW","zoomH","scaleW","scaleH","dataUriRegex","dataUriRegexResult","mimeType","isBase64","window","decodeURIComponent","atob","response","responseType","toLowerCase","ArrayBuffer","charCodeAt","Blob","parser","DOMParser","parseFromString","request","XMLHttpRequest","open","status","withCredentials","overrideMimeType","header","requestHeader","setRequestHeader","send","setResponseType","setWithCredentials","setMimeType","linePrecision","precisionSq","vStart","vEnd","interSegment","interRay","step","distSq","nbVertices","text","getElementsByTagName","xml","childNodes","nodeName","parseFloats","parts","trim","parseInts","parseId","substring","parseAssetUnit","parseAssetUpAxis","textContent","parseLibrary","libraryName","buildLibrary","builder","build","getBuild","parseImage","buildImage","img","Image","base","init_from","getImage","parseEffect","nodeType","profile","parseEffectProfileCOMMON","effects","technique","parseEffectTechnique","parseEffectNewparam","sid","surfaces","parseEffectSurface","samplers","parseEffectSampler","parseEffectParameters","parseEffectParameter","extra","parseEffectParameterTexture","parseEffectParameterTextureExtra","parseEffectParameterTextureExtraTechnique","buildEffect","getEffect","parseMaterial","buildMaterial","effect","parameter","textureObject","sampler","wrapU","wrapV","offsetU","offsetV","repeatU","repeatV","float","getMaterial","parseCamera","optics","parseCameraOptics","parseCameraTechnique","parseCameraParameters","buildCamera","yfov","aspect_ratio","znear","zfar","getCamera","parseLight","parseLightTechnique","parseLightParameters","falloffAngle","buildLight","getLight","parseGeometry","sources","parseGeometrySource","parseGeometryVertices","primitives","parseGeometryPrimitive","accessor","primitive","semantic","inputs","vcount","buildGeometry","input","buildGeometryAttribute","DEFAULT_LINEMATERIAL","DEFAULT_MESHMATERIAL","pushVector","sourceStride","sourceArray","maxcount","getGeometry","parseNode","hasAttribute","nodes","instanceCameras","instanceLights","instanceGeometries","parseNodeInstanceGeometry","instanceNodes","instances","instance","symbol","buildNode","getNode","parseVisualScene","visualScenes","buildVisualScene","getVisualScene","slIndex","lastIndexOf","time","timeEnd","collada","asset","upAxis","joints","setPoint","common","aomap","lightmap","emissivemap","bumpmap","normalmap","displacementmap","roughnessmap","metalnessmap","gradientmap","merged","uniforms_src","uniforms_dst","parameter_src","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_template","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_flip","normal_fragment","normalmap_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","basic","lambert","phong","standard","dashed","tCube","tFlip","equirect","tEquirect","distanceRGBA","physical","frustum","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","negRadius","d1","other","vec3","isJPEG","search","objpath","UpdateBBox","o","bb","bbMin","bbMax","CalcMinDistance","CalculateBoundingBox","obj3d","onWindowResize","animate","controls","getElementById","devicePixelRatio","panSpeed","convertUpAxis"],"mappings":"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LACAC,+0BACAC,yiBACAC,2NACAC,kJACAC,mJACAC,yEACAC,yEACAC,qEACAC,mEACA9B,6gEACA+B,inIACAC,2IACAC,gLACAC,wKACAC,oOACAC,+FACAC,6EACAC,wwFACAC,ioDACAC,woBACAC,oPACAC,qhBACAC,iEACAC,sEACAC,4TACAC,8NACAC,oaACAC,iJACAC,wHACAC,mqEACAC,g+NACAC,8NACAC,04FACAC,ukBACAC,8rJACAC,08GACAC,yJACAC,oKACAC,gKACAC,wRACAC,mKACAC,uEACAC,2NACAC,8GACAC,+LACAC,gGACAC,mWACAC,mMACAC,6rBACAC,6IACAC,uhBACAC,wnBACAC,6yCACAC,2GACAC,qNACAC,6GACAC,6WACAC,+LACAC,gGACAC,8hNACAC,ggBACAC,kiBACAC,uqCACAC,kPACAC,iiCACAC,sYACAC,gYACAC,+MACAC,6FACAC,oHACAC,86BACAC,kRACAC,gTACAC,uSACAC,sGACAC,2HACAC,wFACAC,iTAEAC,qRACAC,yMACAC,4vBACAC,+hBACAC,iTACAC,gcACAC,sYACAC,6MACAC,qzBACAC,kiBACAC,i/CACAC,s3BACAC,8nEACAC,6kCACAC,y6DACAC,srCACAC,yrEACAC,uqCACAC,8iBACAC,68BACAC,0zBACAC,wnBACAC,iSACAC,yLCnNGhqE,IAEHiqE,OAEC30E,SAAU4K,GAAcovD,OACvB3jC,GAAY22C,OACZ32C,GAAY42C,MACZ52C,GAAY62C,SACZ72C,GAAYtxC,MAGb0a,aAAc8U,GAAYu/D,eAC1Bn0E,eAAgB4U,GAAYs/D,gBAI7Be,SAEC50E,SAAU4K,GAAcovD,OACvB3jC,GAAY22C,OACZ32C,GAAY42C,MACZ52C,GAAY62C,SACZ72C,GAAY82C,YACZ92C,GAAYtxC,IACZsxC,GAAYrxC,QAEXyM,UAAYrQ,MAAO,IAAI2C,EAAO,OAIhC0b,aAAc8U,GAAYy/D,iBAC1Br0E,eAAgB4U,GAAYw/D,kBAI7Bc,OAEC70E,SAAU4K,GAAcovD,OACvB3jC,GAAY22C,OACZ32C,GAAY42C,MACZ52C,GAAY62C,SACZ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"}